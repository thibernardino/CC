{"{\"assumptions\":{},\"sourceRoot\":\"/Users/thiago/Dev/workspace/Cadre Carton e-commerce/backend/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/thiago/Dev/workspace/Cadre Carton e-commerce\",\"filename\":\"/Users/thiago/Dev/workspace/Cadre Carton e-commerce/backend/server.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/thiago/Dev/workspace/Cadre Carton e-commerce\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.19.6:development":{"value":{"code":"\"use strict\";\n\nvar _express = _interopRequireDefault(require(\"express\"));\nvar _cors = _interopRequireDefault(require(\"cors\"));\nvar _mongoose = _interopRequireDefault(require(\"mongoose\"));\nvar _bodyParser = _interopRequireDefault(require(\"body-parser\"));\nvar _dotenv = _interopRequireWildcard(require(\"dotenv\"));\nvar _path = _interopRequireDefault(require(\"path\"));\nvar _userRouter = _interopRequireDefault(require(\"./routers/userRouter\"));\nvar _orderRouter = _interopRequireDefault(require(\"./routers/orderRouter\"));\nvar _productRouter = _interopRequireDefault(require(\"./routers/productRouter\"));\nvar _uploadRouter = _interopRequireDefault(require(\"./routers/uploadRouter\"));\nfunction _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== \"function\") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function (nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }\nfunction _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== \"object\" && typeof obj !== \"function\") { return { default: obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n/* eslint-disable no-unused-vars */\n\n_dotenv.default.config();\n_mongoose.default.connect(process.env.MONGODB_URI).then(() => {\n  console.log(\"Connected to db!\");\n}).catch(err => {\n  console.log(err.message);\n});\nconst app = (0, _express.default)();\napp.use((0, _cors.default)());\napp.use(_bodyParser.default.json());\napp.use(\"/api/uploads\", _uploadRouter.default);\napp.use(\"/api/users\", _userRouter.default);\napp.use(\"/api/products\", _productRouter.default);\napp.use(\"/api/orders\", _orderRouter.default);\n\n// Original code\n//  app.get(\"/api/paypal/clientId\", (req, res) => {\n//    res.send({ clientId: config.PAYPAL_CLIENT_ID });\n//  });\n\n// new code\n// app.get(\"/api/paypal/clientId\", (req, res) => {\n//  console.log(process.env.PAYPAL_CLIENT_ID);\n// });\n\napp.get(\"/api/paypal/clientId\", (req, res) => {\n  console.log(process.env.PAYPAL_CLIENT_ID);\n});\napp.use(\"/uploads\", _express.default.static(_path.default.join(__dirname, \"/../uploads\")));\napp.use(_express.default.static(_path.default.join(__dirname, \"/../frontend\")));\napp.get(\"*\", (req, res) => {\n  res.sendFile(_path.default.join(__dirname, \"/../frontend/index.html\"));\n});\napp.use((err, req, res, next) => {\n  const status = err.name && err.name === \"ValidationError\" ? 400 : 500;\n  res.status(status).send({\n    message: err.message\n  });\n});\napp.listen(5070, () => {\n  console.log(\"serve at http://localhost:5070\");\n});\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJkb3RlbnYiLCJjb25maWciLCJtb25nb29zZSIsImNvbm5lY3QiLCJwcm9jZXNzIiwiZW52IiwiTU9OR09EQl9VUkkiLCJ0aGVuIiwiY29uc29sZSIsImxvZyIsImNhdGNoIiwiZXJyIiwibWVzc2FnZSIsImFwcCIsImV4cHJlc3MiLCJ1c2UiLCJjb3JzIiwiYm9keVBhcnNlciIsImpzb24iLCJ1cGxvYWRSb3V0ZXIiLCJ1c2VyUm91dGVyIiwicHJvZHVjdFJvdXRlciIsIm9yZGVyUm91dGVyIiwiZ2V0IiwicmVxIiwicmVzIiwiUEFZUEFMX0NMSUVOVF9JRCIsInN0YXRpYyIsInBhdGgiLCJqb2luIiwiX19kaXJuYW1lIiwic2VuZEZpbGUiLCJuZXh0Iiwic3RhdHVzIiwibmFtZSIsInNlbmQiLCJsaXN0ZW4iXSwic291cmNlUm9vdCI6Ii9Vc2Vycy90aGlhZ28vRGV2L3dvcmtzcGFjZS9DYWRyZSBDYXJ0b24gZS1jb21tZXJjZS9iYWNrZW5kLyIsInNvdXJjZXMiOlsic2VydmVyLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qIGVzbGludC1kaXNhYmxlIG5vLXVudXNlZC12YXJzICovXG5pbXBvcnQgZXhwcmVzcyBmcm9tIFwiZXhwcmVzc1wiO1xuaW1wb3J0IGNvcnMgZnJvbSBcImNvcnNcIjtcbmltcG9ydCBtb25nb29zZSBmcm9tIFwibW9uZ29vc2VcIjtcbmltcG9ydCBib2R5UGFyc2VyIGZyb20gXCJib2R5LXBhcnNlclwiO1xuaW1wb3J0IGRvdGVudiwgeyBjb25maWcgfSBmcm9tIFwiZG90ZW52XCI7XG5pbXBvcnQgcGF0aCBmcm9tIFwicGF0aFwiO1xuaW1wb3J0IHVzZXJSb3V0ZXIgZnJvbSBcIi4vcm91dGVycy91c2VyUm91dGVyXCI7XG5pbXBvcnQgb3JkZXJSb3V0ZXIgZnJvbSBcIi4vcm91dGVycy9vcmRlclJvdXRlclwiO1xuaW1wb3J0IHByb2R1Y3RSb3V0ZXIgZnJvbSBcIi4vcm91dGVycy9wcm9kdWN0Um91dGVyXCI7XG5pbXBvcnQgdXBsb2FkUm91dGVyIGZyb20gXCIuL3JvdXRlcnMvdXBsb2FkUm91dGVyXCI7XG5cbmRvdGVudi5jb25maWcoKTtcblxubW9uZ29vc2VcbiAgLmNvbm5lY3QocHJvY2Vzcy5lbnYuTU9OR09EQl9VUkkpXG4gIC50aGVuKCgpID0+IHtcbiAgICBjb25zb2xlLmxvZyhcIkNvbm5lY3RlZCB0byBkYiFcIik7XG4gIH0pXG4gIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgY29uc29sZS5sb2coZXJyLm1lc3NhZ2UpO1xuICB9KTtcblxuY29uc3QgYXBwID0gZXhwcmVzcygpO1xuYXBwLnVzZShjb3JzKCkpO1xuYXBwLnVzZShib2R5UGFyc2VyLmpzb24oKSk7XG5hcHAudXNlKFwiL2FwaS91cGxvYWRzXCIsIHVwbG9hZFJvdXRlcik7XG5hcHAudXNlKFwiL2FwaS91c2Vyc1wiLCB1c2VyUm91dGVyKTtcbmFwcC51c2UoXCIvYXBpL3Byb2R1Y3RzXCIsIHByb2R1Y3RSb3V0ZXIpO1xuYXBwLnVzZShcIi9hcGkvb3JkZXJzXCIsIG9yZGVyUm91dGVyKTtcblxuLy8gT3JpZ2luYWwgY29kZVxuLy8gIGFwcC5nZXQoXCIvYXBpL3BheXBhbC9jbGllbnRJZFwiLCAocmVxLCByZXMpID0+IHtcbi8vICAgIHJlcy5zZW5kKHsgY2xpZW50SWQ6IGNvbmZpZy5QQVlQQUxfQ0xJRU5UX0lEIH0pO1xuLy8gIH0pO1xuXG4vLyBuZXcgY29kZVxuLy8gYXBwLmdldChcIi9hcGkvcGF5cGFsL2NsaWVudElkXCIsIChyZXEsIHJlcykgPT4ge1xuLy8gIGNvbnNvbGUubG9nKHByb2Nlc3MuZW52LlBBWVBBTF9DTElFTlRfSUQpO1xuLy8gfSk7XG5cbmFwcC5nZXQoXCIvYXBpL3BheXBhbC9jbGllbnRJZFwiLCAocmVxLCByZXMpID0+IHtcbiAgY29uc29sZS5sb2cocHJvY2Vzcy5lbnYuUEFZUEFMX0NMSUVOVF9JRCk7XG59KTtcblxuYXBwLnVzZShcIi91cGxvYWRzXCIsIGV4cHJlc3Muc3RhdGljKHBhdGguam9pbihfX2Rpcm5hbWUsIFwiLy4uL3VwbG9hZHNcIikpKTtcbmFwcC51c2UoZXhwcmVzcy5zdGF0aWMocGF0aC5qb2luKF9fZGlybmFtZSwgXCIvLi4vZnJvbnRlbmRcIikpKTtcbmFwcC5nZXQoXCIqXCIsIChyZXEsIHJlcykgPT4ge1xuICByZXMuc2VuZEZpbGUocGF0aC5qb2luKF9fZGlybmFtZSwgXCIvLi4vZnJvbnRlbmQvaW5kZXguaHRtbFwiKSk7XG59KTtcbmFwcC51c2UoKGVyciwgcmVxLCByZXMsIG5leHQpID0+IHtcbiAgY29uc3Qgc3RhdHVzID0gZXJyLm5hbWUgJiYgZXJyLm5hbWUgPT09IFwiVmFsaWRhdGlvbkVycm9yXCIgPyA0MDAgOiA1MDA7XG4gIHJlcy5zdGF0dXMoc3RhdHVzKS5zZW5kKHsgbWVzc2FnZTogZXJyLm1lc3NhZ2UgfSk7XG59KTtcbmFwcC5saXN0ZW4oNTA3MCwgKCkgPT4ge1xuICBjb25zb2xlLmxvZyhcInNlcnZlIGF0IGh0dHA6Ly9sb2NhbGhvc3Q6NTA3MFwiKTtcbn0pO1xuIl0sIm1hcHBpbmdzIjoiOztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQWtEO0FBQUE7QUFBQTtBQVZsRDs7QUFZQUEsZUFBTSxDQUFDQyxNQUFNLEVBQUU7QUFFZkMsaUJBQVEsQ0FDTEMsT0FBTyxDQUFDQyxPQUFPLENBQUNDLEdBQUcsQ0FBQ0MsV0FBVyxDQUFDLENBQ2hDQyxJQUFJLENBQUMsTUFBTTtFQUNWQyxPQUFPLENBQUNDLEdBQUcsQ0FBQyxrQkFBa0IsQ0FBQztBQUNqQyxDQUFDLENBQUMsQ0FDREMsS0FBSyxDQUFFQyxHQUFHLElBQUs7RUFDZEgsT0FBTyxDQUFDQyxHQUFHLENBQUNFLEdBQUcsQ0FBQ0MsT0FBTyxDQUFDO0FBQzFCLENBQUMsQ0FBQztBQUVKLE1BQU1DLEdBQUcsR0FBRyxJQUFBQyxnQkFBTyxHQUFFO0FBQ3JCRCxHQUFHLENBQUNFLEdBQUcsQ0FBQyxJQUFBQyxhQUFJLEdBQUUsQ0FBQztBQUNmSCxHQUFHLENBQUNFLEdBQUcsQ0FBQ0UsbUJBQVUsQ0FBQ0MsSUFBSSxFQUFFLENBQUM7QUFDMUJMLEdBQUcsQ0FBQ0UsR0FBRyxDQUFDLGNBQWMsRUFBRUkscUJBQVksQ0FBQztBQUNyQ04sR0FBRyxDQUFDRSxHQUFHLENBQUMsWUFBWSxFQUFFSyxtQkFBVSxDQUFDO0FBQ2pDUCxHQUFHLENBQUNFLEdBQUcsQ0FBQyxlQUFlLEVBQUVNLHNCQUFhLENBQUM7QUFDdkNSLEdBQUcsQ0FBQ0UsR0FBRyxDQUFDLGFBQWEsRUFBRU8sb0JBQVcsQ0FBQzs7QUFFbkM7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUFULEdBQUcsQ0FBQ1UsR0FBRyxDQUFDLHNCQUFzQixFQUFFLENBQUNDLEdBQUcsRUFBRUMsR0FBRyxLQUFLO0VBQzVDakIsT0FBTyxDQUFDQyxHQUFHLENBQUNMLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDcUIsZ0JBQWdCLENBQUM7QUFDM0MsQ0FBQyxDQUFDO0FBRUZiLEdBQUcsQ0FBQ0UsR0FBRyxDQUFDLFVBQVUsRUFBRUQsZ0JBQU8sQ0FBQ2EsTUFBTSxDQUFDQyxhQUFJLENBQUNDLElBQUksQ0FBQ0MsU0FBUyxFQUFFLGFBQWEsQ0FBQyxDQUFDLENBQUM7QUFDeEVqQixHQUFHLENBQUNFLEdBQUcsQ0FBQ0QsZ0JBQU8sQ0FBQ2EsTUFBTSxDQUFDQyxhQUFJLENBQUNDLElBQUksQ0FBQ0MsU0FBUyxFQUFFLGNBQWMsQ0FBQyxDQUFDLENBQUM7QUFDN0RqQixHQUFHLENBQUNVLEdBQUcsQ0FBQyxHQUFHLEVBQUUsQ0FBQ0MsR0FBRyxFQUFFQyxHQUFHLEtBQUs7RUFDekJBLEdBQUcsQ0FBQ00sUUFBUSxDQUFDSCxhQUFJLENBQUNDLElBQUksQ0FBQ0MsU0FBUyxFQUFFLHlCQUF5QixDQUFDLENBQUM7QUFDL0QsQ0FBQyxDQUFDO0FBQ0ZqQixHQUFHLENBQUNFLEdBQUcsQ0FBQyxDQUFDSixHQUFHLEVBQUVhLEdBQUcsRUFBRUMsR0FBRyxFQUFFTyxJQUFJLEtBQUs7RUFDL0IsTUFBTUMsTUFBTSxHQUFHdEIsR0FBRyxDQUFDdUIsSUFBSSxJQUFJdkIsR0FBRyxDQUFDdUIsSUFBSSxLQUFLLGlCQUFpQixHQUFHLEdBQUcsR0FBRyxHQUFHO0VBQ3JFVCxHQUFHLENBQUNRLE1BQU0sQ0FBQ0EsTUFBTSxDQUFDLENBQUNFLElBQUksQ0FBQztJQUFFdkIsT0FBTyxFQUFFRCxHQUFHLENBQUNDO0VBQVEsQ0FBQyxDQUFDO0FBQ25ELENBQUMsQ0FBQztBQUNGQyxHQUFHLENBQUN1QixNQUFNLENBQUMsSUFBSSxFQUFFLE1BQU07RUFDckI1QixPQUFPLENBQUNDLEdBQUcsQ0FBQyxnQ0FBZ0MsQ0FBQztBQUMvQyxDQUFDLENBQUMifQ==","map":{"version":3,"names":["dotenv","config","mongoose","connect","process","env","MONGODB_URI","then","console","log","catch","err","message","app","express","use","cors","bodyParser","json","uploadRouter","userRouter","productRouter","orderRouter","get","req","res","PAYPAL_CLIENT_ID","static","path","join","__dirname","sendFile","next","status","name","send","listen"],"sourceRoot":"/Users/thiago/Dev/workspace/Cadre Carton e-commerce/backend/","sources":["server.js"],"sourcesContent":["/* eslint-disable no-unused-vars */\nimport express from \"express\";\nimport cors from \"cors\";\nimport mongoose from \"mongoose\";\nimport bodyParser from \"body-parser\";\nimport dotenv, { config } from \"dotenv\";\nimport path from \"path\";\nimport userRouter from \"./routers/userRouter\";\nimport orderRouter from \"./routers/orderRouter\";\nimport productRouter from \"./routers/productRouter\";\nimport uploadRouter from \"./routers/uploadRouter\";\n\ndotenv.config();\n\nmongoose\n  .connect(process.env.MONGODB_URI)\n  .then(() => {\n    console.log(\"Connected to db!\");\n  })\n  .catch((err) => {\n    console.log(err.message);\n  });\n\nconst app = express();\napp.use(cors());\napp.use(bodyParser.json());\napp.use(\"/api/uploads\", uploadRouter);\napp.use(\"/api/users\", userRouter);\napp.use(\"/api/products\", productRouter);\napp.use(\"/api/orders\", orderRouter);\n\n// Original code\n//  app.get(\"/api/paypal/clientId\", (req, res) => {\n//    res.send({ clientId: config.PAYPAL_CLIENT_ID });\n//  });\n\n// new code\n// app.get(\"/api/paypal/clientId\", (req, res) => {\n//  console.log(process.env.PAYPAL_CLIENT_ID);\n// });\n\napp.get(\"/api/paypal/clientId\", (req, res) => {\n  console.log(process.env.PAYPAL_CLIENT_ID);\n});\n\napp.use(\"/uploads\", express.static(path.join(__dirname, \"/../uploads\")));\napp.use(express.static(path.join(__dirname, \"/../frontend\")));\napp.get(\"*\", (req, res) => {\n  res.sendFile(path.join(__dirname, \"/../frontend/index.html\"));\n});\napp.use((err, req, res, next) => {\n  const status = err.name && err.name === \"ValidationError\" ? 400 : 500;\n  res.status(status).send({ message: err.message });\n});\napp.listen(5070, () => {\n  console.log(\"serve at http://localhost:5070\");\n});\n"],"mappings":";;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAkD;AAAA;AAAA;AAVlD;;AAYAA,eAAM,CAACC,MAAM,EAAE;AAEfC,iBAAQ,CACLC,OAAO,CAACC,OAAO,CAACC,GAAG,CAACC,WAAW,CAAC,CAChCC,IAAI,CAAC,MAAM;EACVC,OAAO,CAACC,GAAG,CAAC,kBAAkB,CAAC;AACjC,CAAC,CAAC,CACDC,KAAK,CAAEC,GAAG,IAAK;EACdH,OAAO,CAACC,GAAG,CAACE,GAAG,CAACC,OAAO,CAAC;AAC1B,CAAC,CAAC;AAEJ,MAAMC,GAAG,GAAG,IAAAC,gBAAO,GAAE;AACrBD,GAAG,CAACE,GAAG,CAAC,IAAAC,aAAI,GAAE,CAAC;AACfH,GAAG,CAACE,GAAG,CAACE,mBAAU,CAACC,IAAI,EAAE,CAAC;AAC1BL,GAAG,CAACE,GAAG,CAAC,cAAc,EAAEI,qBAAY,CAAC;AACrCN,GAAG,CAACE,GAAG,CAAC,YAAY,EAAEK,mBAAU,CAAC;AACjCP,GAAG,CAACE,GAAG,CAAC,eAAe,EAAEM,sBAAa,CAAC;AACvCR,GAAG,CAACE,GAAG,CAAC,aAAa,EAAEO,oBAAW,CAAC;;AAEnC;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEAT,GAAG,CAACU,GAAG,CAAC,sBAAsB,EAAE,CAACC,GAAG,EAAEC,GAAG,KAAK;EAC5CjB,OAAO,CAACC,GAAG,CAACL,OAAO,CAACC,GAAG,CAACqB,gBAAgB,CAAC;AAC3C,CAAC,CAAC;AAEFb,GAAG,CAACE,GAAG,CAAC,UAAU,EAAED,gBAAO,CAACa,MAAM,CAACC,aAAI,CAACC,IAAI,CAACC,SAAS,EAAE,aAAa,CAAC,CAAC,CAAC;AACxEjB,GAAG,CAACE,GAAG,CAACD,gBAAO,CAACa,MAAM,CAACC,aAAI,CAACC,IAAI,CAACC,SAAS,EAAE,cAAc,CAAC,CAAC,CAAC;AAC7DjB,GAAG,CAACU,GAAG,CAAC,GAAG,EAAE,CAACC,GAAG,EAAEC,GAAG,KAAK;EACzBA,GAAG,CAACM,QAAQ,CAACH,aAAI,CAACC,IAAI,CAACC,SAAS,EAAE,yBAAyB,CAAC,CAAC;AAC/D,CAAC,CAAC;AACFjB,GAAG,CAACE,GAAG,CAAC,CAACJ,GAAG,EAAEa,GAAG,EAAEC,GAAG,EAAEO,IAAI,KAAK;EAC/B,MAAMC,MAAM,GAAGtB,GAAG,CAACuB,IAAI,IAAIvB,GAAG,CAACuB,IAAI,KAAK,iBAAiB,GAAG,GAAG,GAAG,GAAG;EACrET,GAAG,CAACQ,MAAM,CAACA,MAAM,CAAC,CAACE,IAAI,CAAC;IAAEvB,OAAO,EAAED,GAAG,CAACC;EAAQ,CAAC,CAAC;AACnD,CAAC,CAAC;AACFC,GAAG,CAACuB,MAAM,CAAC,IAAI,EAAE,MAAM;EACrB5B,OAAO,CAACC,GAAG,CAAC,gCAAgC,CAAC;AAC/C,CAAC,CAAC"}},"mtime":1669799158135},"{\"assumptions\":{},\"sourceRoot\":\"/Users/thiago/Dev/workspace/Cadre Carton e-commerce/backend/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/thiago/Dev/workspace/Cadre Carton e-commerce\",\"filename\":\"/Users/thiago/Dev/workspace/Cadre Carton e-commerce/backend/data.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/thiago/Dev/workspace/Cadre Carton e-commerce\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.19.6:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _default = {\n  products: [{\n    _id: '111111111111111111111111',\n    name: 'Kit 1',\n    category: 'kit',\n    image: '/images/product-1.jpg',\n    price: 10,\n    type: 'own',\n    rating: 4.5,\n    numReviews: 10,\n    countInStock: 1,\n    description: 'Quelque chose'\n  }, {\n    _id: '222222222222222222222222',\n    name: 'Kit 2',\n    category: 'kit',\n    image: '/images/product-1.jpg',\n    price: 20,\n    type: 'own',\n    rating: 4.5,\n    numReviews: 15,\n    countInStock: 2,\n    description: 'Quelque chose'\n  }, {\n    _id: '3',\n    name: 'Kit 3',\n    category: 'kit',\n    image: '/images/product-4.jpg',\n    price: 30,\n    type: 'own',\n    rating: 4.5,\n    numReviews: 15,\n    countInStock: 3,\n    description: 'Quelque chose'\n  }, {\n    _id: '4',\n    name: 'Kit 4',\n    category: 'kit',\n    image: '/images/product-4.jpg',\n    price: 40,\n    type: 'own',\n    rating: 4.5,\n    numReviews: 19,\n    countInStock: 4,\n    description: 'Quelque chose'\n  }, {\n    _id: '5',\n    name: 'Kit 5',\n    category: 'kit',\n    image: '/images/product-5.jpg',\n    price: 50,\n    type: 'own',\n    rating: 4.5,\n    numReviews: 13,\n    countInStock: 5,\n    description: 'Quelque chose'\n  }, {\n    _id: '6',\n    name: 'Kit 6',\n    category: 'kit',\n    image: '/images/product-6.jpg',\n    price: 60,\n    type: 'own',\n    rating: 4.5,\n    numReviews: 11,\n    countInStock: 6,\n    description: 'Quelque chose'\n  }]\n};\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJwcm9kdWN0cyIsIl9pZCIsIm5hbWUiLCJjYXRlZ29yeSIsImltYWdlIiwicHJpY2UiLCJ0eXBlIiwicmF0aW5nIiwibnVtUmV2aWV3cyIsImNvdW50SW5TdG9jayIsImRlc2NyaXB0aW9uIl0sInNvdXJjZVJvb3QiOiIvVXNlcnMvdGhpYWdvL0Rldi93b3Jrc3BhY2UvQ2FkcmUgQ2FydG9uIGUtY29tbWVyY2UvYmFja2VuZC8iLCJzb3VyY2VzIjpbImRhdGEuanMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGRlZmF1bHQge1xuICBwcm9kdWN0czogW1xuICAgIHtcbiAgICAgIF9pZDogJzExMTExMTExMTExMTExMTExMTExMTExMScsXG4gICAgICBuYW1lOiAnS2l0IDEnLFxuICAgICAgY2F0ZWdvcnk6ICdraXQnLFxuICAgICAgaW1hZ2U6ICcvaW1hZ2VzL3Byb2R1Y3QtMS5qcGcnLFxuICAgICAgcHJpY2U6IDEwLFxuICAgICAgdHlwZTogJ293bicsXG4gICAgICByYXRpbmc6IDQuNSxcbiAgICAgIG51bVJldmlld3M6IDEwLFxuICAgICAgY291bnRJblN0b2NrOiAxLFxuICAgICAgZGVzY3JpcHRpb246ICdRdWVscXVlIGNob3NlJyxcbiAgICB9LFxuICAgIHtcbiAgICAgIF9pZDogJzIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMicsXG4gICAgICBuYW1lOiAnS2l0IDInLFxuICAgICAgY2F0ZWdvcnk6ICdraXQnLFxuICAgICAgaW1hZ2U6ICcvaW1hZ2VzL3Byb2R1Y3QtMS5qcGcnLFxuICAgICAgcHJpY2U6IDIwLFxuICAgICAgdHlwZTogJ293bicsXG4gICAgICByYXRpbmc6IDQuNSxcbiAgICAgIG51bVJldmlld3M6IDE1LFxuICAgICAgY291bnRJblN0b2NrOiAyLFxuICAgICAgZGVzY3JpcHRpb246ICdRdWVscXVlIGNob3NlJyxcbiAgICB9LFxuICAgIHtcbiAgICAgIF9pZDogJzMnLFxuICAgICAgbmFtZTogJ0tpdCAzJyxcbiAgICAgIGNhdGVnb3J5OiAna2l0JyxcbiAgICAgIGltYWdlOiAnL2ltYWdlcy9wcm9kdWN0LTQuanBnJyxcbiAgICAgIHByaWNlOiAzMCxcbiAgICAgIHR5cGU6ICdvd24nLFxuICAgICAgcmF0aW5nOiA0LjUsXG4gICAgICBudW1SZXZpZXdzOiAxNSxcbiAgICAgIGNvdW50SW5TdG9jazogMyxcbiAgICAgIGRlc2NyaXB0aW9uOiAnUXVlbHF1ZSBjaG9zZScsXG4gICAgfSxcbiAgICB7XG4gICAgICBfaWQ6ICc0JyxcbiAgICAgIG5hbWU6ICdLaXQgNCcsXG4gICAgICBjYXRlZ29yeTogJ2tpdCcsXG4gICAgICBpbWFnZTogJy9pbWFnZXMvcHJvZHVjdC00LmpwZycsXG4gICAgICBwcmljZTogNDAsXG4gICAgICB0eXBlOiAnb3duJyxcbiAgICAgIHJhdGluZzogNC41LFxuICAgICAgbnVtUmV2aWV3czogMTksXG4gICAgICBjb3VudEluU3RvY2s6IDQsXG4gICAgICBkZXNjcmlwdGlvbjogJ1F1ZWxxdWUgY2hvc2UnLFxuICAgIH0sXG4gICAge1xuICAgICAgX2lkOiAnNScsXG4gICAgICBuYW1lOiAnS2l0IDUnLFxuICAgICAgY2F0ZWdvcnk6ICdraXQnLFxuICAgICAgaW1hZ2U6ICcvaW1hZ2VzL3Byb2R1Y3QtNS5qcGcnLFxuICAgICAgcHJpY2U6IDUwLFxuICAgICAgdHlwZTogJ293bicsXG4gICAgICByYXRpbmc6IDQuNSxcbiAgICAgIG51bVJldmlld3M6IDEzLFxuICAgICAgY291bnRJblN0b2NrOiA1LFxuICAgICAgZGVzY3JpcHRpb246ICdRdWVscXVlIGNob3NlJyxcbiAgICB9LFxuICAgIHtcbiAgICAgIF9pZDogJzYnLFxuICAgICAgbmFtZTogJ0tpdCA2JyxcbiAgICAgIGNhdGVnb3J5OiAna2l0JyxcbiAgICAgIGltYWdlOiAnL2ltYWdlcy9wcm9kdWN0LTYuanBnJyxcbiAgICAgIHByaWNlOiA2MCxcbiAgICAgIHR5cGU6ICdvd24nLFxuICAgICAgcmF0aW5nOiA0LjUsXG4gICAgICBudW1SZXZpZXdzOiAxMSxcbiAgICAgIGNvdW50SW5TdG9jazogNixcbiAgICAgIGRlc2NyaXB0aW9uOiAnUXVlbHF1ZSBjaG9zZScsXG4gICAgfSxcbiAgXSxcbn07XG4iXSwibWFwcGluZ3MiOiI7Ozs7OztlQUFlO0VBQ2JBLFFBQVEsRUFBRSxDQUNSO0lBQ0VDLEdBQUcsRUFBRSwwQkFBMEI7SUFDL0JDLElBQUksRUFBRSxPQUFPO0lBQ2JDLFFBQVEsRUFBRSxLQUFLO0lBQ2ZDLEtBQUssRUFBRSx1QkFBdUI7SUFDOUJDLEtBQUssRUFBRSxFQUFFO0lBQ1RDLElBQUksRUFBRSxLQUFLO0lBQ1hDLE1BQU0sRUFBRSxHQUFHO0lBQ1hDLFVBQVUsRUFBRSxFQUFFO0lBQ2RDLFlBQVksRUFBRSxDQUFDO0lBQ2ZDLFdBQVcsRUFBRTtFQUNmLENBQUMsRUFDRDtJQUNFVCxHQUFHLEVBQUUsMEJBQTBCO0lBQy9CQyxJQUFJLEVBQUUsT0FBTztJQUNiQyxRQUFRLEVBQUUsS0FBSztJQUNmQyxLQUFLLEVBQUUsdUJBQXVCO0lBQzlCQyxLQUFLLEVBQUUsRUFBRTtJQUNUQyxJQUFJLEVBQUUsS0FBSztJQUNYQyxNQUFNLEVBQUUsR0FBRztJQUNYQyxVQUFVLEVBQUUsRUFBRTtJQUNkQyxZQUFZLEVBQUUsQ0FBQztJQUNmQyxXQUFXLEVBQUU7RUFDZixDQUFDLEVBQ0Q7SUFDRVQsR0FBRyxFQUFFLEdBQUc7SUFDUkMsSUFBSSxFQUFFLE9BQU87SUFDYkMsUUFBUSxFQUFFLEtBQUs7SUFDZkMsS0FBSyxFQUFFLHVCQUF1QjtJQUM5QkMsS0FBSyxFQUFFLEVBQUU7SUFDVEMsSUFBSSxFQUFFLEtBQUs7SUFDWEMsTUFBTSxFQUFFLEdBQUc7SUFDWEMsVUFBVSxFQUFFLEVBQUU7SUFDZEMsWUFBWSxFQUFFLENBQUM7SUFDZkMsV0FBVyxFQUFFO0VBQ2YsQ0FBQyxFQUNEO0lBQ0VULEdBQUcsRUFBRSxHQUFHO0lBQ1JDLElBQUksRUFBRSxPQUFPO0lBQ2JDLFFBQVEsRUFBRSxLQUFLO0lBQ2ZDLEtBQUssRUFBRSx1QkFBdUI7SUFDOUJDLEtBQUssRUFBRSxFQUFFO0lBQ1RDLElBQUksRUFBRSxLQUFLO0lBQ1hDLE1BQU0sRUFBRSxHQUFHO0lBQ1hDLFVBQVUsRUFBRSxFQUFFO0lBQ2RDLFlBQVksRUFBRSxDQUFDO0lBQ2ZDLFdBQVcsRUFBRTtFQUNmLENBQUMsRUFDRDtJQUNFVCxHQUFHLEVBQUUsR0FBRztJQUNSQyxJQUFJLEVBQUUsT0FBTztJQUNiQyxRQUFRLEVBQUUsS0FBSztJQUNmQyxLQUFLLEVBQUUsdUJBQXVCO0lBQzlCQyxLQUFLLEVBQUUsRUFBRTtJQUNUQyxJQUFJLEVBQUUsS0FBSztJQUNYQyxNQUFNLEVBQUUsR0FBRztJQUNYQyxVQUFVLEVBQUUsRUFBRTtJQUNkQyxZQUFZLEVBQUUsQ0FBQztJQUNmQyxXQUFXLEVBQUU7RUFDZixDQUFDLEVBQ0Q7SUFDRVQsR0FBRyxFQUFFLEdBQUc7SUFDUkMsSUFBSSxFQUFFLE9BQU87SUFDYkMsUUFBUSxFQUFFLEtBQUs7SUFDZkMsS0FBSyxFQUFFLHVCQUF1QjtJQUM5QkMsS0FBSyxFQUFFLEVBQUU7SUFDVEMsSUFBSSxFQUFFLEtBQUs7SUFDWEMsTUFBTSxFQUFFLEdBQUc7SUFDWEMsVUFBVSxFQUFFLEVBQUU7SUFDZEMsWUFBWSxFQUFFLENBQUM7SUFDZkMsV0FBVyxFQUFFO0VBQ2YsQ0FBQztBQUVMLENBQUM7QUFBQSJ9","map":{"version":3,"names":["products","_id","name","category","image","price","type","rating","numReviews","countInStock","description"],"sourceRoot":"/Users/thiago/Dev/workspace/Cadre Carton e-commerce/backend/","sources":["data.js"],"sourcesContent":["export default {\n  products: [\n    {\n      _id: '111111111111111111111111',\n      name: 'Kit 1',\n      category: 'kit',\n      image: '/images/product-1.jpg',\n      price: 10,\n      type: 'own',\n      rating: 4.5,\n      numReviews: 10,\n      countInStock: 1,\n      description: 'Quelque chose',\n    },\n    {\n      _id: '222222222222222222222222',\n      name: 'Kit 2',\n      category: 'kit',\n      image: '/images/product-1.jpg',\n      price: 20,\n      type: 'own',\n      rating: 4.5,\n      numReviews: 15,\n      countInStock: 2,\n      description: 'Quelque chose',\n    },\n    {\n      _id: '3',\n      name: 'Kit 3',\n      category: 'kit',\n      image: '/images/product-4.jpg',\n      price: 30,\n      type: 'own',\n      rating: 4.5,\n      numReviews: 15,\n      countInStock: 3,\n      description: 'Quelque chose',\n    },\n    {\n      _id: '4',\n      name: 'Kit 4',\n      category: 'kit',\n      image: '/images/product-4.jpg',\n      price: 40,\n      type: 'own',\n      rating: 4.5,\n      numReviews: 19,\n      countInStock: 4,\n      description: 'Quelque chose',\n    },\n    {\n      _id: '5',\n      name: 'Kit 5',\n      category: 'kit',\n      image: '/images/product-5.jpg',\n      price: 50,\n      type: 'own',\n      rating: 4.5,\n      numReviews: 13,\n      countInStock: 5,\n      description: 'Quelque chose',\n    },\n    {\n      _id: '6',\n      name: 'Kit 6',\n      category: 'kit',\n      image: '/images/product-6.jpg',\n      price: 60,\n      type: 'own',\n      rating: 4.5,\n      numReviews: 11,\n      countInStock: 6,\n      description: 'Quelque chose',\n    },\n  ],\n};\n"],"mappings":";;;;;;eAAe;EACbA,QAAQ,EAAE,CACR;IACEC,GAAG,EAAE,0BAA0B;IAC/BC,IAAI,EAAE,OAAO;IACbC,QAAQ,EAAE,KAAK;IACfC,KAAK,EAAE,uBAAuB;IAC9BC,KAAK,EAAE,EAAE;IACTC,IAAI,EAAE,KAAK;IACXC,MAAM,EAAE,GAAG;IACXC,UAAU,EAAE,EAAE;IACdC,YAAY,EAAE,CAAC;IACfC,WAAW,EAAE;EACf,CAAC,EACD;IACET,GAAG,EAAE,0BAA0B;IAC/BC,IAAI,EAAE,OAAO;IACbC,QAAQ,EAAE,KAAK;IACfC,KAAK,EAAE,uBAAuB;IAC9BC,KAAK,EAAE,EAAE;IACTC,IAAI,EAAE,KAAK;IACXC,MAAM,EAAE,GAAG;IACXC,UAAU,EAAE,EAAE;IACdC,YAAY,EAAE,CAAC;IACfC,WAAW,EAAE;EACf,CAAC,EACD;IACET,GAAG,EAAE,GAAG;IACRC,IAAI,EAAE,OAAO;IACbC,QAAQ,EAAE,KAAK;IACfC,KAAK,EAAE,uBAAuB;IAC9BC,KAAK,EAAE,EAAE;IACTC,IAAI,EAAE,KAAK;IACXC,MAAM,EAAE,GAAG;IACXC,UAAU,EAAE,EAAE;IACdC,YAAY,EAAE,CAAC;IACfC,WAAW,EAAE;EACf,CAAC,EACD;IACET,GAAG,EAAE,GAAG;IACRC,IAAI,EAAE,OAAO;IACbC,QAAQ,EAAE,KAAK;IACfC,KAAK,EAAE,uBAAuB;IAC9BC,KAAK,EAAE,EAAE;IACTC,IAAI,EAAE,KAAK;IACXC,MAAM,EAAE,GAAG;IACXC,UAAU,EAAE,EAAE;IACdC,YAAY,EAAE,CAAC;IACfC,WAAW,EAAE;EACf,CAAC,EACD;IACET,GAAG,EAAE,GAAG;IACRC,IAAI,EAAE,OAAO;IACbC,QAAQ,EAAE,KAAK;IACfC,KAAK,EAAE,uBAAuB;IAC9BC,KAAK,EAAE,EAAE;IACTC,IAAI,EAAE,KAAK;IACXC,MAAM,EAAE,GAAG;IACXC,UAAU,EAAE,EAAE;IACdC,YAAY,EAAE,CAAC;IACfC,WAAW,EAAE;EACf,CAAC,EACD;IACET,GAAG,EAAE,GAAG;IACRC,IAAI,EAAE,OAAO;IACbC,QAAQ,EAAE,KAAK;IACfC,KAAK,EAAE,uBAAuB;IAC9BC,KAAK,EAAE,EAAE;IACTC,IAAI,EAAE,KAAK;IACXC,MAAM,EAAE,GAAG;IACXC,UAAU,EAAE,EAAE;IACdC,YAAY,EAAE,CAAC;IACfC,WAAW,EAAE;EACf,CAAC;AAEL,CAAC;AAAA"}},"mtime":1667545514962},"{\"assumptions\":{},\"sourceRoot\":\"/Users/thiago/Dev/workspace/Cadre Carton e-commerce/backend/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/thiago/Dev/workspace/Cadre Carton e-commerce\",\"filename\":\"/Users/thiago/Dev/workspace/Cadre Carton e-commerce/backend/data.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/thiago/Dev/workspace/Cadre Carton e-commerce\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.19.6:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _default = {\n  products: [{\n    _id: '111111111111111111111111',\n    name: 'Kit 1',\n    category: 'kit',\n    image: '/images/product-1.jpg',\n    price: 10,\n    type: 'own',\n    rating: 4.5,\n    numReviews: 10,\n    countInStock: 1,\n    description: 'Quelque chose'\n  }, {\n    _id: '222222222222222222222222',\n    name: 'Kit 2',\n    category: 'kit',\n    image: '/images/product-1.jpg',\n    price: 20,\n    type: 'own',\n    rating: 4.5,\n    numReviews: 15,\n    countInStock: 2,\n    description: 'Quelque chose'\n  }, {\n    _id: '3',\n    name: 'Kit 3',\n    category: 'kit',\n    image: '/images/product-4.jpg',\n    price: 30,\n    type: 'own',\n    rating: 4.5,\n    numReviews: 15,\n    countInStock: 3,\n    description: 'Quelque chose'\n  }, {\n    _id: '4',\n    name: 'Kit 4',\n    category: 'kit',\n    image: '/images/product-4.jpg',\n    price: 40,\n    type: 'own',\n    rating: 4.5,\n    numReviews: 19,\n    countInStock: 4,\n    description: 'Quelque chose'\n  }, {\n    _id: '5',\n    name: 'Kit 5',\n    category: 'kit',\n    image: '/images/product-5.jpg',\n    price: 50,\n    type: 'own',\n    rating: 4.5,\n    numReviews: 13,\n    countInStock: 5,\n    description: 'Quelque chose'\n  }, {\n    _id: '6',\n    name: 'Kit 6',\n    category: 'kit',\n    image: '/images/product-6.jpg',\n    price: 60,\n    type: 'own',\n    rating: 4.5,\n    numReviews: 11,\n    countInStock: 6,\n    description: 'Quelque chose'\n  }]\n};\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJwcm9kdWN0cyIsIl9pZCIsIm5hbWUiLCJjYXRlZ29yeSIsImltYWdlIiwicHJpY2UiLCJ0eXBlIiwicmF0aW5nIiwibnVtUmV2aWV3cyIsImNvdW50SW5TdG9jayIsImRlc2NyaXB0aW9uIl0sInNvdXJjZVJvb3QiOiIvVXNlcnMvdGhpYWdvL0Rldi93b3Jrc3BhY2UvQ2FkcmUgQ2FydG9uIGUtY29tbWVyY2UvYmFja2VuZC8iLCJzb3VyY2VzIjpbImRhdGEuanMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGRlZmF1bHQge1xuICBwcm9kdWN0czogW1xuICAgIHtcbiAgICAgIF9pZDogJzExMTExMTExMTExMTExMTExMTExMTExMScsXG4gICAgICBuYW1lOiAnS2l0IDEnLFxuICAgICAgY2F0ZWdvcnk6ICdraXQnLFxuICAgICAgaW1hZ2U6ICcvaW1hZ2VzL3Byb2R1Y3QtMS5qcGcnLFxuICAgICAgcHJpY2U6IDEwLFxuICAgICAgdHlwZTogJ293bicsXG4gICAgICByYXRpbmc6IDQuNSxcbiAgICAgIG51bVJldmlld3M6IDEwLFxuICAgICAgY291bnRJblN0b2NrOiAxLFxuICAgICAgZGVzY3JpcHRpb246ICdRdWVscXVlIGNob3NlJyxcbiAgICB9LFxuICAgIHtcbiAgICAgIF9pZDogJzIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMicsXG4gICAgICBuYW1lOiAnS2l0IDInLFxuICAgICAgY2F0ZWdvcnk6ICdraXQnLFxuICAgICAgaW1hZ2U6ICcvaW1hZ2VzL3Byb2R1Y3QtMS5qcGcnLFxuICAgICAgcHJpY2U6IDIwLFxuICAgICAgdHlwZTogJ293bicsXG4gICAgICByYXRpbmc6IDQuNSxcbiAgICAgIG51bVJldmlld3M6IDE1LFxuICAgICAgY291bnRJblN0b2NrOiAyLFxuICAgICAgZGVzY3JpcHRpb246ICdRdWVscXVlIGNob3NlJyxcbiAgICB9LFxuICAgIHtcbiAgICAgIF9pZDogJzMnLFxuICAgICAgbmFtZTogJ0tpdCAzJyxcbiAgICAgIGNhdGVnb3J5OiAna2l0JyxcbiAgICAgIGltYWdlOiAnL2ltYWdlcy9wcm9kdWN0LTQuanBnJyxcbiAgICAgIHByaWNlOiAzMCxcbiAgICAgIHR5cGU6ICdvd24nLFxuICAgICAgcmF0aW5nOiA0LjUsXG4gICAgICBudW1SZXZpZXdzOiAxNSxcbiAgICAgIGNvdW50SW5TdG9jazogMyxcbiAgICAgIGRlc2NyaXB0aW9uOiAnUXVlbHF1ZSBjaG9zZScsXG4gICAgfSxcbiAgICB7XG4gICAgICBfaWQ6ICc0JyxcbiAgICAgIG5hbWU6ICdLaXQgNCcsXG4gICAgICBjYXRlZ29yeTogJ2tpdCcsXG4gICAgICBpbWFnZTogJy9pbWFnZXMvcHJvZHVjdC00LmpwZycsXG4gICAgICBwcmljZTogNDAsXG4gICAgICB0eXBlOiAnb3duJyxcbiAgICAgIHJhdGluZzogNC41LFxuICAgICAgbnVtUmV2aWV3czogMTksXG4gICAgICBjb3VudEluU3RvY2s6IDQsXG4gICAgICBkZXNjcmlwdGlvbjogJ1F1ZWxxdWUgY2hvc2UnLFxuICAgIH0sXG4gICAge1xuICAgICAgX2lkOiAnNScsXG4gICAgICBuYW1lOiAnS2l0IDUnLFxuICAgICAgY2F0ZWdvcnk6ICdraXQnLFxuICAgICAgaW1hZ2U6ICcvaW1hZ2VzL3Byb2R1Y3QtNS5qcGcnLFxuICAgICAgcHJpY2U6IDUwLFxuICAgICAgdHlwZTogJ293bicsXG4gICAgICByYXRpbmc6IDQuNSxcbiAgICAgIG51bVJldmlld3M6IDEzLFxuICAgICAgY291bnRJblN0b2NrOiA1LFxuICAgICAgZGVzY3JpcHRpb246ICdRdWVscXVlIGNob3NlJyxcbiAgICB9LFxuICAgIHtcbiAgICAgIF9pZDogJzYnLFxuICAgICAgbmFtZTogJ0tpdCA2JyxcbiAgICAgIGNhdGVnb3J5OiAna2l0JyxcbiAgICAgIGltYWdlOiAnL2ltYWdlcy9wcm9kdWN0LTYuanBnJyxcbiAgICAgIHByaWNlOiA2MCxcbiAgICAgIHR5cGU6ICdvd24nLFxuICAgICAgcmF0aW5nOiA0LjUsXG4gICAgICBudW1SZXZpZXdzOiAxMSxcbiAgICAgIGNvdW50SW5TdG9jazogNixcbiAgICAgIGRlc2NyaXB0aW9uOiAnUXVlbHF1ZSBjaG9zZScsXG4gICAgfSxcbiAgXSxcbn07XG4iXSwibWFwcGluZ3MiOiI7Ozs7OztlQUFlO0VBQ2JBLFFBQVEsRUFBRSxDQUNSO0lBQ0VDLEdBQUcsRUFBRSwwQkFBMEI7SUFDL0JDLElBQUksRUFBRSxPQUFPO0lBQ2JDLFFBQVEsRUFBRSxLQUFLO0lBQ2ZDLEtBQUssRUFBRSx1QkFBdUI7SUFDOUJDLEtBQUssRUFBRSxFQUFFO0lBQ1RDLElBQUksRUFBRSxLQUFLO0lBQ1hDLE1BQU0sRUFBRSxHQUFHO0lBQ1hDLFVBQVUsRUFBRSxFQUFFO0lBQ2RDLFlBQVksRUFBRSxDQUFDO0lBQ2ZDLFdBQVcsRUFBRTtFQUNmLENBQUMsRUFDRDtJQUNFVCxHQUFHLEVBQUUsMEJBQTBCO0lBQy9CQyxJQUFJLEVBQUUsT0FBTztJQUNiQyxRQUFRLEVBQUUsS0FBSztJQUNmQyxLQUFLLEVBQUUsdUJBQXVCO0lBQzlCQyxLQUFLLEVBQUUsRUFBRTtJQUNUQyxJQUFJLEVBQUUsS0FBSztJQUNYQyxNQUFNLEVBQUUsR0FBRztJQUNYQyxVQUFVLEVBQUUsRUFBRTtJQUNkQyxZQUFZLEVBQUUsQ0FBQztJQUNmQyxXQUFXLEVBQUU7RUFDZixDQUFDLEVBQ0Q7SUFDRVQsR0FBRyxFQUFFLEdBQUc7SUFDUkMsSUFBSSxFQUFFLE9BQU87SUFDYkMsUUFBUSxFQUFFLEtBQUs7SUFDZkMsS0FBSyxFQUFFLHVCQUF1QjtJQUM5QkMsS0FBSyxFQUFFLEVBQUU7SUFDVEMsSUFBSSxFQUFFLEtBQUs7SUFDWEMsTUFBTSxFQUFFLEdBQUc7SUFDWEMsVUFBVSxFQUFFLEVBQUU7SUFDZEMsWUFBWSxFQUFFLENBQUM7SUFDZkMsV0FBVyxFQUFFO0VBQ2YsQ0FBQyxFQUNEO0lBQ0VULEdBQUcsRUFBRSxHQUFHO0lBQ1JDLElBQUksRUFBRSxPQUFPO0lBQ2JDLFFBQVEsRUFBRSxLQUFLO0lBQ2ZDLEtBQUssRUFBRSx1QkFBdUI7SUFDOUJDLEtBQUssRUFBRSxFQUFFO0lBQ1RDLElBQUksRUFBRSxLQUFLO0lBQ1hDLE1BQU0sRUFBRSxHQUFHO0lBQ1hDLFVBQVUsRUFBRSxFQUFFO0lBQ2RDLFlBQVksRUFBRSxDQUFDO0lBQ2ZDLFdBQVcsRUFBRTtFQUNmLENBQUMsRUFDRDtJQUNFVCxHQUFHLEVBQUUsR0FBRztJQUNSQyxJQUFJLEVBQUUsT0FBTztJQUNiQyxRQUFRLEVBQUUsS0FBSztJQUNmQyxLQUFLLEVBQUUsdUJBQXVCO0lBQzlCQyxLQUFLLEVBQUUsRUFBRTtJQUNUQyxJQUFJLEVBQUUsS0FBSztJQUNYQyxNQUFNLEVBQUUsR0FBRztJQUNYQyxVQUFVLEVBQUUsRUFBRTtJQUNkQyxZQUFZLEVBQUUsQ0FBQztJQUNmQyxXQUFXLEVBQUU7RUFDZixDQUFDLEVBQ0Q7SUFDRVQsR0FBRyxFQUFFLEdBQUc7SUFDUkMsSUFBSSxFQUFFLE9BQU87SUFDYkMsUUFBUSxFQUFFLEtBQUs7SUFDZkMsS0FBSyxFQUFFLHVCQUF1QjtJQUM5QkMsS0FBSyxFQUFFLEVBQUU7SUFDVEMsSUFBSSxFQUFFLEtBQUs7SUFDWEMsTUFBTSxFQUFFLEdBQUc7SUFDWEMsVUFBVSxFQUFFLEVBQUU7SUFDZEMsWUFBWSxFQUFFLENBQUM7SUFDZkMsV0FBVyxFQUFFO0VBQ2YsQ0FBQztBQUVMLENBQUM7QUFBQSJ9","map":{"version":3,"names":["products","_id","name","category","image","price","type","rating","numReviews","countInStock","description"],"sourceRoot":"/Users/thiago/Dev/workspace/Cadre Carton e-commerce/backend/","sources":["data.js"],"sourcesContent":["export default {\n  products: [\n    {\n      _id: '111111111111111111111111',\n      name: 'Kit 1',\n      category: 'kit',\n      image: '/images/product-1.jpg',\n      price: 10,\n      type: 'own',\n      rating: 4.5,\n      numReviews: 10,\n      countInStock: 1,\n      description: 'Quelque chose',\n    },\n    {\n      _id: '222222222222222222222222',\n      name: 'Kit 2',\n      category: 'kit',\n      image: '/images/product-1.jpg',\n      price: 20,\n      type: 'own',\n      rating: 4.5,\n      numReviews: 15,\n      countInStock: 2,\n      description: 'Quelque chose',\n    },\n    {\n      _id: '3',\n      name: 'Kit 3',\n      category: 'kit',\n      image: '/images/product-4.jpg',\n      price: 30,\n      type: 'own',\n      rating: 4.5,\n      numReviews: 15,\n      countInStock: 3,\n      description: 'Quelque chose',\n    },\n    {\n      _id: '4',\n      name: 'Kit 4',\n      category: 'kit',\n      image: '/images/product-4.jpg',\n      price: 40,\n      type: 'own',\n      rating: 4.5,\n      numReviews: 19,\n      countInStock: 4,\n      description: 'Quelque chose',\n    },\n    {\n      _id: '5',\n      name: 'Kit 5',\n      category: 'kit',\n      image: '/images/product-5.jpg',\n      price: 50,\n      type: 'own',\n      rating: 4.5,\n      numReviews: 13,\n      countInStock: 5,\n      description: 'Quelque chose',\n    },\n    {\n      _id: '6',\n      name: 'Kit 6',\n      category: 'kit',\n      image: '/images/product-6.jpg',\n      price: 60,\n      type: 'own',\n      rating: 4.5,\n      numReviews: 11,\n      countInStock: 6,\n      description: 'Quelque chose',\n    },\n  ],\n};\n"],"mappings":";;;;;;eAAe;EACbA,QAAQ,EAAE,CACR;IACEC,GAAG,EAAE,0BAA0B;IAC/BC,IAAI,EAAE,OAAO;IACbC,QAAQ,EAAE,KAAK;IACfC,KAAK,EAAE,uBAAuB;IAC9BC,KAAK,EAAE,EAAE;IACTC,IAAI,EAAE,KAAK;IACXC,MAAM,EAAE,GAAG;IACXC,UAAU,EAAE,EAAE;IACdC,YAAY,EAAE,CAAC;IACfC,WAAW,EAAE;EACf,CAAC,EACD;IACET,GAAG,EAAE,0BAA0B;IAC/BC,IAAI,EAAE,OAAO;IACbC,QAAQ,EAAE,KAAK;IACfC,KAAK,EAAE,uBAAuB;IAC9BC,KAAK,EAAE,EAAE;IACTC,IAAI,EAAE,KAAK;IACXC,MAAM,EAAE,GAAG;IACXC,UAAU,EAAE,EAAE;IACdC,YAAY,EAAE,CAAC;IACfC,WAAW,EAAE;EACf,CAAC,EACD;IACET,GAAG,EAAE,GAAG;IACRC,IAAI,EAAE,OAAO;IACbC,QAAQ,EAAE,KAAK;IACfC,KAAK,EAAE,uBAAuB;IAC9BC,KAAK,EAAE,EAAE;IACTC,IAAI,EAAE,KAAK;IACXC,MAAM,EAAE,GAAG;IACXC,UAAU,EAAE,EAAE;IACdC,YAAY,EAAE,CAAC;IACfC,WAAW,EAAE;EACf,CAAC,EACD;IACET,GAAG,EAAE,GAAG;IACRC,IAAI,EAAE,OAAO;IACbC,QAAQ,EAAE,KAAK;IACfC,KAAK,EAAE,uBAAuB;IAC9BC,KAAK,EAAE,EAAE;IACTC,IAAI,EAAE,KAAK;IACXC,MAAM,EAAE,GAAG;IACXC,UAAU,EAAE,EAAE;IACdC,YAAY,EAAE,CAAC;IACfC,WAAW,EAAE;EACf,CAAC,EACD;IACET,GAAG,EAAE,GAAG;IACRC,IAAI,EAAE,OAAO;IACbC,QAAQ,EAAE,KAAK;IACfC,KAAK,EAAE,uBAAuB;IAC9BC,KAAK,EAAE,EAAE;IACTC,IAAI,EAAE,KAAK;IACXC,MAAM,EAAE,GAAG;IACXC,UAAU,EAAE,EAAE;IACdC,YAAY,EAAE,CAAC;IACfC,WAAW,EAAE;EACf,CAAC,EACD;IACET,GAAG,EAAE,GAAG;IACRC,IAAI,EAAE,OAAO;IACbC,QAAQ,EAAE,KAAK;IACfC,KAAK,EAAE,uBAAuB;IAC9BC,KAAK,EAAE,EAAE;IACTC,IAAI,EAAE,KAAK;IACXC,MAAM,EAAE,GAAG;IACXC,UAAU,EAAE,EAAE;IACdC,YAAY,EAAE,CAAC;IACfC,WAAW,EAAE;EACf,CAAC;AAEL,CAAC;AAAA"}},"mtime":1667545514962},"{\"assumptions\":{},\"sourceRoot\":\"/Users/thiago/Dev/workspace/Cadre Carton e-commerce/backend/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/thiago/Dev/workspace/Cadre Carton e-commerce\",\"filename\":\"/Users/thiago/Dev/workspace/Cadre Carton e-commerce/backend/config.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/thiago/Dev/workspace/Cadre Carton e-commerce\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.19.6:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _dotenv = _interopRequireDefault(require(\"dotenv\"));\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n_dotenv.default.config();\nvar _default = {\n  JWT_SECRET: process.env.JWT_SECRET,\n  PAYPAL_CLIENT_ID: process.env.PAYPAL_CLIENT_ID\n};\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJkb3RlbnYiLCJjb25maWciLCJKV1RfU0VDUkVUIiwicHJvY2VzcyIsImVudiIsIlBBWVBBTF9DTElFTlRfSUQiXSwic291cmNlUm9vdCI6Ii9Vc2Vycy90aGlhZ28vRGV2L3dvcmtzcGFjZS9DYWRyZSBDYXJ0b24gZS1jb21tZXJjZS9iYWNrZW5kLyIsInNvdXJjZXMiOlsiY29uZmlnLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBkb3RlbnYgZnJvbSAnZG90ZW52JztcblxuZG90ZW52LmNvbmZpZygpO1xuXG5leHBvcnQgZGVmYXVsdCB7XG4gIEpXVF9TRUNSRVQ6IHByb2Nlc3MuZW52LkpXVF9TRUNSRVQsXG4gIFBBWVBBTF9DTElFTlRfSUQ6IHByb2Nlc3MuZW52LlBBWVBBTF9DTElFTlRfSUQsXG59O1xuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7QUFBQTtBQUE0QjtBQUU1QkEsZUFBTSxDQUFDQyxNQUFNLEVBQUU7QUFBQyxlQUVEO0VBQ2JDLFVBQVUsRUFBRUMsT0FBTyxDQUFDQyxHQUFHLENBQUNGLFVBQVU7RUFDbENHLGdCQUFnQixFQUFFRixPQUFPLENBQUNDLEdBQUcsQ0FBQ0M7QUFDaEMsQ0FBQztBQUFBIn0=","map":{"version":3,"names":["dotenv","config","JWT_SECRET","process","env","PAYPAL_CLIENT_ID"],"sourceRoot":"/Users/thiago/Dev/workspace/Cadre Carton e-commerce/backend/","sources":["config.js"],"sourcesContent":["import dotenv from 'dotenv';\n\ndotenv.config();\n\nexport default {\n  JWT_SECRET: process.env.JWT_SECRET,\n  PAYPAL_CLIENT_ID: process.env.PAYPAL_CLIENT_ID,\n};\n"],"mappings":";;;;;;AAAA;AAA4B;AAE5BA,eAAM,CAACC,MAAM,EAAE;AAAC,eAED;EACbC,UAAU,EAAEC,OAAO,CAACC,GAAG,CAACF,UAAU;EAClCG,gBAAgB,EAAEF,OAAO,CAACC,GAAG,CAACC;AAChC,CAAC;AAAA"}},"mtime":1667553681073},"{\"assumptions\":{},\"sourceRoot\":\"/Users/thiago/Dev/workspace/Cadre Carton e-commerce/backend/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/thiago/Dev/workspace/Cadre Carton e-commerce\",\"filename\":\"/Users/thiago/Dev/workspace/Cadre Carton e-commerce/backend/config.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/thiago/Dev/workspace/Cadre Carton e-commerce\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.19.6:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _dotenv = _interopRequireDefault(require(\"dotenv\"));\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n_dotenv.default.config();\nvar _default = {\n  JWT_SECRET: process.env.JWT_SECRET,\n  PAYPAL_CLIENT_ID: process.env.PAYPAL_CLIENT_ID\n};\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJkb3RlbnYiLCJjb25maWciLCJKV1RfU0VDUkVUIiwicHJvY2VzcyIsImVudiIsIlBBWVBBTF9DTElFTlRfSUQiXSwic291cmNlUm9vdCI6Ii9Vc2Vycy90aGlhZ28vRGV2L3dvcmtzcGFjZS9DYWRyZSBDYXJ0b24gZS1jb21tZXJjZS9iYWNrZW5kLyIsInNvdXJjZXMiOlsiY29uZmlnLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBkb3RlbnYgZnJvbSAnZG90ZW52JztcblxuZG90ZW52LmNvbmZpZygpO1xuXG5leHBvcnQgZGVmYXVsdCB7XG4gIEpXVF9TRUNSRVQ6IHByb2Nlc3MuZW52LkpXVF9TRUNSRVQsXG4gIFBBWVBBTF9DTElFTlRfSUQ6IHByb2Nlc3MuZW52LlBBWVBBTF9DTElFTlRfSUQsXG59O1xuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7QUFBQTtBQUE0QjtBQUU1QkEsZUFBTSxDQUFDQyxNQUFNLEVBQUU7QUFBQyxlQUVEO0VBQ2JDLFVBQVUsRUFBRUMsT0FBTyxDQUFDQyxHQUFHLENBQUNGLFVBQVU7RUFDbENHLGdCQUFnQixFQUFFRixPQUFPLENBQUNDLEdBQUcsQ0FBQ0M7QUFDaEMsQ0FBQztBQUFBIn0=","map":{"version":3,"names":["dotenv","config","JWT_SECRET","process","env","PAYPAL_CLIENT_ID"],"sourceRoot":"/Users/thiago/Dev/workspace/Cadre Carton e-commerce/backend/","sources":["config.js"],"sourcesContent":["import dotenv from 'dotenv';\n\ndotenv.config();\n\nexport default {\n  JWT_SECRET: process.env.JWT_SECRET,\n  PAYPAL_CLIENT_ID: process.env.PAYPAL_CLIENT_ID,\n};\n"],"mappings":";;;;;;AAAA;AAA4B;AAE5BA,eAAM,CAACC,MAAM,EAAE;AAAC,eAED;EACbC,UAAU,EAAEC,OAAO,CAACC,GAAG,CAACF,UAAU;EAClCG,gBAAgB,EAAEF,OAAO,CAACC,GAAG,CAACC;AAChC,CAAC;AAAA"}},"mtime":1667553681073},"{\"assumptions\":{},\"sourceRoot\":\"/Users/thiago/Dev/workspace/Cadre Carton e-commerce/backend/routers/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/thiago/Dev/workspace/Cadre Carton e-commerce\",\"filename\":\"/Users/thiago/Dev/workspace/Cadre Carton e-commerce/backend/routers/userRoute.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/thiago/Dev/workspace/Cadre Carton e-commerce\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.19.6:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _express = _interopRequireDefault(require(\"express\"));\nvar _userModel = _interopRequireDefault(require(\"../models/userModel\"));\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\nconst userRouter = _express.default.Router();\nuserRouter.get('/createadmin', async (req, res) => {\n  try {\n    const user = new _userModel.default({\n      name: 'admin',\n      email: 'admin@example.com',\n      password: 'ccdb'\n    });\n    const createdUser = await user.save();\n    res.send(createdUser);\n  } catch (err) {\n    res.status(500).send({\n      message: err.message\n    });\n  }\n});\nvar _default = userRouter;\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJ1c2VyUm91dGVyIiwiZXhwcmVzcyIsIlJvdXRlciIsImdldCIsInJlcSIsInJlcyIsInVzZXIiLCJVc2VyIiwibmFtZSIsImVtYWlsIiwicGFzc3dvcmQiLCJjcmVhdGVkVXNlciIsInNhdmUiLCJzZW5kIiwiZXJyIiwic3RhdHVzIiwibWVzc2FnZSJdLCJzb3VyY2VSb290IjoiL1VzZXJzL3RoaWFnby9EZXYvd29ya3NwYWNlL0NhZHJlIENhcnRvbiBlLWNvbW1lcmNlL2JhY2tlbmQvcm91dGVycy8iLCJzb3VyY2VzIjpbInVzZXJSb3V0ZS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgZXhwcmVzcyBmcm9tICdleHByZXNzJztcbmltcG9ydCBVc2VyIGZyb20gJy4uL21vZGVscy91c2VyTW9kZWwnO1xuXG5jb25zdCB1c2VyUm91dGVyID0gZXhwcmVzcy5Sb3V0ZXIoKTtcblxudXNlclJvdXRlci5nZXQoXG4gICcvY3JlYXRlYWRtaW4nLCBhc3luYyAocmVxLCByZXMpID0+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgdXNlciA9IG5ldyBVc2VyKHtcbiAgICAgICAgbmFtZTogJ2FkbWluJyxcbiAgICAgICAgZW1haWw6ICdhZG1pbkBleGFtcGxlLmNvbScsXG4gICAgICAgIHBhc3N3b3JkOiAnY2NkYicsXG4gICAgICB9KTtcbiAgICAgIGNvbnN0IGNyZWF0ZWRVc2VyID0gYXdhaXQgdXNlci5zYXZlKCk7XG4gICAgICByZXMuc2VuZChjcmVhdGVkVXNlcik7XG4gICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICByZXMuc3RhdHVzKDUwMCkuc2VuZCh7IG1lc3NhZ2U6IGVyci5tZXNzYWdlIH0pO1xuICAgIH1cbiAgfSk7XG5leHBvcnQgZGVmYXVsdCB1c2VyUm91dGVyO1xuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7QUFBQTtBQUNBO0FBQXVDO0FBRXZDLE1BQU1BLFVBQVUsR0FBR0MsZ0JBQU8sQ0FBQ0MsTUFBTSxFQUFFO0FBRW5DRixVQUFVLENBQUNHLEdBQUcsQ0FDWixjQUFjLEVBQUUsT0FBT0MsR0FBRyxFQUFFQyxHQUFHLEtBQUs7RUFDbEMsSUFBSTtJQUNGLE1BQU1DLElBQUksR0FBRyxJQUFJQyxrQkFBSSxDQUFDO01BQ3BCQyxJQUFJLEVBQUUsT0FBTztNQUNiQyxLQUFLLEVBQUUsbUJBQW1CO01BQzFCQyxRQUFRLEVBQUU7SUFDWixDQUFDLENBQUM7SUFDRixNQUFNQyxXQUFXLEdBQUcsTUFBTUwsSUFBSSxDQUFDTSxJQUFJLEVBQUU7SUFDckNQLEdBQUcsQ0FBQ1EsSUFBSSxDQUFDRixXQUFXLENBQUM7RUFDdkIsQ0FBQyxDQUFDLE9BQU9HLEdBQUcsRUFBRTtJQUNaVCxHQUFHLENBQUNVLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQ0YsSUFBSSxDQUFDO01BQUVHLE9BQU8sRUFBRUYsR0FBRyxDQUFDRTtJQUFRLENBQUMsQ0FBQztFQUNoRDtBQUNGLENBQUMsQ0FBQztBQUFDLGVBQ1VoQixVQUFVO0FBQUEifQ==","map":{"version":3,"names":["userRouter","express","Router","get","req","res","user","User","name","email","password","createdUser","save","send","err","status","message"],"sourceRoot":"/Users/thiago/Dev/workspace/Cadre Carton e-commerce/backend/routers/","sources":["userRoute.js"],"sourcesContent":["import express from 'express';\nimport User from '../models/userModel';\n\nconst userRouter = express.Router();\n\nuserRouter.get(\n  '/createadmin', async (req, res) => {\n    try {\n      const user = new User({\n        name: 'admin',\n        email: 'admin@example.com',\n        password: 'ccdb',\n      });\n      const createdUser = await user.save();\n      res.send(createdUser);\n    } catch (err) {\n      res.status(500).send({ message: err.message });\n    }\n  });\nexport default userRouter;\n"],"mappings":";;;;;;AAAA;AACA;AAAuC;AAEvC,MAAMA,UAAU,GAAGC,gBAAO,CAACC,MAAM,EAAE;AAEnCF,UAAU,CAACG,GAAG,CACZ,cAAc,EAAE,OAAOC,GAAG,EAAEC,GAAG,KAAK;EAClC,IAAI;IACF,MAAMC,IAAI,GAAG,IAAIC,kBAAI,CAAC;MACpBC,IAAI,EAAE,OAAO;MACbC,KAAK,EAAE,mBAAmB;MAC1BC,QAAQ,EAAE;IACZ,CAAC,CAAC;IACF,MAAMC,WAAW,GAAG,MAAML,IAAI,CAACM,IAAI,EAAE;IACrCP,GAAG,CAACQ,IAAI,CAACF,WAAW,CAAC;EACvB,CAAC,CAAC,OAAOG,GAAG,EAAE;IACZT,GAAG,CAACU,MAAM,CAAC,GAAG,CAAC,CAACF,IAAI,CAAC;MAAEG,OAAO,EAAEF,GAAG,CAACE;IAAQ,CAAC,CAAC;EAChD;AACF,CAAC,CAAC;AAAC,eACUhB,UAAU;AAAA"}},"mtime":1666877548151},"{\"assumptions\":{},\"sourceRoot\":\"/Users/thiago/Dev/workspace/Cadre Carton e-commerce/backend/models/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/thiago/Dev/workspace/Cadre Carton e-commerce\",\"filename\":\"/Users/thiago/Dev/workspace/Cadre Carton e-commerce/backend/models/userModel.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/thiago/Dev/workspace/Cadre Carton e-commerce\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.19.6:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _mongoose = _interopRequireDefault(require(\"mongoose\"));\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\nconst userSchema = new _mongoose.default.Schema({\n  name: {\n    type: String,\n    required: true\n  },\n  email: {\n    type: String,\n    required: true,\n    index: true,\n    unique: true\n  },\n  password: {\n    type: String,\n    required: true\n  },\n  isAdmin: {\n    type: Boolean,\n    required: true,\n    default: false\n  }\n});\nconst User = _mongoose.default.model('User', userSchema);\nvar _default = User;\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJ1c2VyU2NoZW1hIiwibW9uZ29vc2UiLCJTY2hlbWEiLCJuYW1lIiwidHlwZSIsIlN0cmluZyIsInJlcXVpcmVkIiwiZW1haWwiLCJpbmRleCIsInVuaXF1ZSIsInBhc3N3b3JkIiwiaXNBZG1pbiIsIkJvb2xlYW4iLCJkZWZhdWx0IiwiVXNlciIsIm1vZGVsIl0sInNvdXJjZVJvb3QiOiIvVXNlcnMvdGhpYWdvL0Rldi93b3Jrc3BhY2UvQ2FkcmUgQ2FydG9uIGUtY29tbWVyY2UvYmFja2VuZC9tb2RlbHMvIiwic291cmNlcyI6WyJ1c2VyTW9kZWwuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IG1vbmdvb3NlIGZyb20gJ21vbmdvb3NlJztcblxuY29uc3QgdXNlclNjaGVtYSA9IG5ldyBtb25nb29zZS5TY2hlbWEoe1xuICBuYW1lOiB7IHR5cGU6IFN0cmluZywgcmVxdWlyZWQ6IHRydWUgfSxcbiAgZW1haWw6IHtcbiAgICB0eXBlOiBTdHJpbmcsXG4gICAgcmVxdWlyZWQ6IHRydWUsXG4gICAgaW5kZXg6IHRydWUsXG4gICAgdW5pcXVlOiB0cnVlLFxuICB9LFxuICBwYXNzd29yZDogeyB0eXBlOiBTdHJpbmcsIHJlcXVpcmVkOiB0cnVlIH0sXG4gIGlzQWRtaW46IHsgdHlwZTogQm9vbGVhbiwgcmVxdWlyZWQ6IHRydWUsIGRlZmF1bHQ6IGZhbHNlIH0sXG59KTtcbmNvbnN0IFVzZXIgPSBtb25nb29zZS5tb2RlbCgnVXNlcicsIHVzZXJTY2hlbWEpO1xuZXhwb3J0IGRlZmF1bHQgVXNlcjsiXSwibWFwcGluZ3MiOiI7Ozs7OztBQUFBO0FBQWdDO0FBRWhDLE1BQU1BLFVBQVUsR0FBRyxJQUFJQyxpQkFBUSxDQUFDQyxNQUFNLENBQUM7RUFDckNDLElBQUksRUFBRTtJQUFFQyxJQUFJLEVBQUVDLE1BQU07SUFBRUMsUUFBUSxFQUFFO0VBQUssQ0FBQztFQUN0Q0MsS0FBSyxFQUFFO0lBQ0xILElBQUksRUFBRUMsTUFBTTtJQUNaQyxRQUFRLEVBQUUsSUFBSTtJQUNkRSxLQUFLLEVBQUUsSUFBSTtJQUNYQyxNQUFNLEVBQUU7RUFDVixDQUFDO0VBQ0RDLFFBQVEsRUFBRTtJQUFFTixJQUFJLEVBQUVDLE1BQU07SUFBRUMsUUFBUSxFQUFFO0VBQUssQ0FBQztFQUMxQ0ssT0FBTyxFQUFFO0lBQUVQLElBQUksRUFBRVEsT0FBTztJQUFFTixRQUFRLEVBQUUsSUFBSTtJQUFFTyxPQUFPLEVBQUU7RUFBTTtBQUMzRCxDQUFDLENBQUM7QUFDRixNQUFNQyxJQUFJLEdBQUdiLGlCQUFRLENBQUNjLEtBQUssQ0FBQyxNQUFNLEVBQUVmLFVBQVUsQ0FBQztBQUFDLGVBQ2pDYyxJQUFJO0FBQUEifQ==","map":{"version":3,"names":["userSchema","mongoose","Schema","name","type","String","required","email","index","unique","password","isAdmin","Boolean","default","User","model"],"sourceRoot":"/Users/thiago/Dev/workspace/Cadre Carton e-commerce/backend/models/","sources":["userModel.js"],"sourcesContent":["import mongoose from 'mongoose';\n\nconst userSchema = new mongoose.Schema({\n  name: { type: String, required: true },\n  email: {\n    type: String,\n    required: true,\n    index: true,\n    unique: true,\n  },\n  password: { type: String, required: true },\n  isAdmin: { type: Boolean, required: true, default: false },\n});\nconst User = mongoose.model('User', userSchema);\nexport default User;"],"mappings":";;;;;;AAAA;AAAgC;AAEhC,MAAMA,UAAU,GAAG,IAAIC,iBAAQ,CAACC,MAAM,CAAC;EACrCC,IAAI,EAAE;IAAEC,IAAI,EAAEC,MAAM;IAAEC,QAAQ,EAAE;EAAK,CAAC;EACtCC,KAAK,EAAE;IACLH,IAAI,EAAEC,MAAM;IACZC,QAAQ,EAAE,IAAI;IACdE,KAAK,EAAE,IAAI;IACXC,MAAM,EAAE;EACV,CAAC;EACDC,QAAQ,EAAE;IAAEN,IAAI,EAAEC,MAAM;IAAEC,QAAQ,EAAE;EAAK,CAAC;EAC1CK,OAAO,EAAE;IAAEP,IAAI,EAAEQ,OAAO;IAAEN,QAAQ,EAAE,IAAI;IAAEO,OAAO,EAAE;EAAM;AAC3D,CAAC,CAAC;AACF,MAAMC,IAAI,GAAGb,iBAAQ,CAACc,KAAK,CAAC,MAAM,EAAEf,UAAU,CAAC;AAAC,eACjCc,IAAI;AAAA"}},"mtime":1666877201300},"{\"assumptions\":{},\"sourceRoot\":\"/Users/thiago/Dev/workspace/Cadre Carton e-commerce/backend/routers/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/thiago/Dev/workspace/Cadre Carton e-commerce\",\"filename\":\"/Users/thiago/Dev/workspace/Cadre Carton e-commerce/backend/routers/userRoute.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/thiago/Dev/workspace/Cadre Carton e-commerce\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.19.6:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _express = _interopRequireDefault(require(\"express\"));\nvar _userModel = _interopRequireDefault(require(\"../models/userModel\"));\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\nconst userRouter = _express.default.Router();\nuserRouter.get('/createadmin', async (req, res) => {\n  try {\n    const user = new _userModel.default({\n      name: 'admin',\n      email: 'admin@example.com',\n      password: 'ccdb',\n      isAdmin: true\n    });\n    const createdUser = await user.save();\n    res.send(createdUser);\n  } catch (err) {\n    res.status(500).send({\n      message: err.message\n    });\n  }\n});\nvar _default = userRouter;\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJ1c2VyUm91dGVyIiwiZXhwcmVzcyIsIlJvdXRlciIsImdldCIsInJlcSIsInJlcyIsInVzZXIiLCJVc2VyIiwibmFtZSIsImVtYWlsIiwicGFzc3dvcmQiLCJpc0FkbWluIiwiY3JlYXRlZFVzZXIiLCJzYXZlIiwic2VuZCIsImVyciIsInN0YXR1cyIsIm1lc3NhZ2UiXSwic291cmNlUm9vdCI6Ii9Vc2Vycy90aGlhZ28vRGV2L3dvcmtzcGFjZS9DYWRyZSBDYXJ0b24gZS1jb21tZXJjZS9iYWNrZW5kL3JvdXRlcnMvIiwic291cmNlcyI6WyJ1c2VyUm91dGUuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGV4cHJlc3MgZnJvbSAnZXhwcmVzcyc7XG5pbXBvcnQgVXNlciBmcm9tICcuLi9tb2RlbHMvdXNlck1vZGVsJztcblxuY29uc3QgdXNlclJvdXRlciA9IGV4cHJlc3MuUm91dGVyKCk7XG5cbnVzZXJSb3V0ZXIuZ2V0KFxuICAnL2NyZWF0ZWFkbWluJywgYXN5bmMgKHJlcSwgcmVzKSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHVzZXIgPSBuZXcgVXNlcih7XG4gICAgICAgIG5hbWU6ICdhZG1pbicsXG4gICAgICAgIGVtYWlsOiAnYWRtaW5AZXhhbXBsZS5jb20nLFxuICAgICAgICBwYXNzd29yZDogJ2NjZGInLFxuICAgICAgICBpc0FkbWluOiB0cnVlLFxuICAgICAgfSk7XG4gICAgICBjb25zdCBjcmVhdGVkVXNlciA9IGF3YWl0IHVzZXIuc2F2ZSgpO1xuICAgICAgcmVzLnNlbmQoY3JlYXRlZFVzZXIpO1xuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgcmVzLnN0YXR1cyg1MDApLnNlbmQoeyBtZXNzYWdlOiBlcnIubWVzc2FnZSB9KTtcbiAgICB9XG4gIH0pO1xuZXhwb3J0IGRlZmF1bHQgdXNlclJvdXRlcjtcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQUE7QUFDQTtBQUF1QztBQUV2QyxNQUFNQSxVQUFVLEdBQUdDLGdCQUFPLENBQUNDLE1BQU0sRUFBRTtBQUVuQ0YsVUFBVSxDQUFDRyxHQUFHLENBQ1osY0FBYyxFQUFFLE9BQU9DLEdBQUcsRUFBRUMsR0FBRyxLQUFLO0VBQ2xDLElBQUk7SUFDRixNQUFNQyxJQUFJLEdBQUcsSUFBSUMsa0JBQUksQ0FBQztNQUNwQkMsSUFBSSxFQUFFLE9BQU87TUFDYkMsS0FBSyxFQUFFLG1CQUFtQjtNQUMxQkMsUUFBUSxFQUFFLE1BQU07TUFDaEJDLE9BQU8sRUFBRTtJQUNYLENBQUMsQ0FBQztJQUNGLE1BQU1DLFdBQVcsR0FBRyxNQUFNTixJQUFJLENBQUNPLElBQUksRUFBRTtJQUNyQ1IsR0FBRyxDQUFDUyxJQUFJLENBQUNGLFdBQVcsQ0FBQztFQUN2QixDQUFDLENBQUMsT0FBT0csR0FBRyxFQUFFO0lBQ1pWLEdBQUcsQ0FBQ1csTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDRixJQUFJLENBQUM7TUFBRUcsT0FBTyxFQUFFRixHQUFHLENBQUNFO0lBQVEsQ0FBQyxDQUFDO0VBQ2hEO0FBQ0YsQ0FBQyxDQUFDO0FBQUMsZUFDVWpCLFVBQVU7QUFBQSJ9","map":{"version":3,"names":["userRouter","express","Router","get","req","res","user","User","name","email","password","isAdmin","createdUser","save","send","err","status","message"],"sourceRoot":"/Users/thiago/Dev/workspace/Cadre Carton e-commerce/backend/routers/","sources":["userRoute.js"],"sourcesContent":["import express from 'express';\nimport User from '../models/userModel';\n\nconst userRouter = express.Router();\n\nuserRouter.get(\n  '/createadmin', async (req, res) => {\n    try {\n      const user = new User({\n        name: 'admin',\n        email: 'admin@example.com',\n        password: 'ccdb',\n        isAdmin: true,\n      });\n      const createdUser = await user.save();\n      res.send(createdUser);\n    } catch (err) {\n      res.status(500).send({ message: err.message });\n    }\n  });\nexport default userRouter;\n"],"mappings":";;;;;;AAAA;AACA;AAAuC;AAEvC,MAAMA,UAAU,GAAGC,gBAAO,CAACC,MAAM,EAAE;AAEnCF,UAAU,CAACG,GAAG,CACZ,cAAc,EAAE,OAAOC,GAAG,EAAEC,GAAG,KAAK;EAClC,IAAI;IACF,MAAMC,IAAI,GAAG,IAAIC,kBAAI,CAAC;MACpBC,IAAI,EAAE,OAAO;MACbC,KAAK,EAAE,mBAAmB;MAC1BC,QAAQ,EAAE,MAAM;MAChBC,OAAO,EAAE;IACX,CAAC,CAAC;IACF,MAAMC,WAAW,GAAG,MAAMN,IAAI,CAACO,IAAI,EAAE;IACrCR,GAAG,CAACS,IAAI,CAACF,WAAW,CAAC;EACvB,CAAC,CAAC,OAAOG,GAAG,EAAE;IACZV,GAAG,CAACW,MAAM,CAAC,GAAG,CAAC,CAACF,IAAI,CAAC;MAAEG,OAAO,EAAEF,GAAG,CAACE;IAAQ,CAAC,CAAC;EAChD;AACF,CAAC,CAAC;AAAC,eACUjB,UAAU;AAAA"}},"mtime":1666877717563},"{\"assumptions\":{},\"sourceRoot\":\"/Users/thiago/Dev/workspace/Cadre Carton e-commerce/backend/models/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/thiago/Dev/workspace/Cadre Carton e-commerce\",\"filename\":\"/Users/thiago/Dev/workspace/Cadre Carton e-commerce/backend/models/userModel.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/thiago/Dev/workspace/Cadre Carton e-commerce\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.19.6:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _mongoose = _interopRequireDefault(require(\"mongoose\"));\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\nconst userSchema = new _mongoose.default.Schema({\n  name: {\n    type: String,\n    required: true\n  },\n  email: {\n    type: String,\n    required: true,\n    index: true,\n    unique: true\n  },\n  password: {\n    type: String,\n    required: true\n  },\n  isAdmin: {\n    type: Boolean,\n    required: true,\n    default: false\n  }\n});\nconst User = _mongoose.default.model('User', userSchema);\nvar _default = User;\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJ1c2VyU2NoZW1hIiwibW9uZ29vc2UiLCJTY2hlbWEiLCJuYW1lIiwidHlwZSIsIlN0cmluZyIsInJlcXVpcmVkIiwiZW1haWwiLCJpbmRleCIsInVuaXF1ZSIsInBhc3N3b3JkIiwiaXNBZG1pbiIsIkJvb2xlYW4iLCJkZWZhdWx0IiwiVXNlciIsIm1vZGVsIl0sInNvdXJjZVJvb3QiOiIvVXNlcnMvdGhpYWdvL0Rldi93b3Jrc3BhY2UvQ2FkcmUgQ2FydG9uIGUtY29tbWVyY2UvYmFja2VuZC9tb2RlbHMvIiwic291cmNlcyI6WyJ1c2VyTW9kZWwuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IG1vbmdvb3NlIGZyb20gJ21vbmdvb3NlJztcblxuY29uc3QgdXNlclNjaGVtYSA9IG5ldyBtb25nb29zZS5TY2hlbWEoe1xuICBuYW1lOiB7IHR5cGU6IFN0cmluZywgcmVxdWlyZWQ6IHRydWUgfSxcbiAgZW1haWw6IHtcbiAgICB0eXBlOiBTdHJpbmcsXG4gICAgcmVxdWlyZWQ6IHRydWUsXG4gICAgaW5kZXg6IHRydWUsXG4gICAgdW5pcXVlOiB0cnVlLFxuICB9LFxuICBwYXNzd29yZDogeyB0eXBlOiBTdHJpbmcsIHJlcXVpcmVkOiB0cnVlIH0sXG4gIGlzQWRtaW46IHsgdHlwZTogQm9vbGVhbiwgcmVxdWlyZWQ6IHRydWUsIGRlZmF1bHQ6IGZhbHNlIH0sXG59KTtcbmNvbnN0IFVzZXIgPSBtb25nb29zZS5tb2RlbCgnVXNlcicsIHVzZXJTY2hlbWEpO1xuZXhwb3J0IGRlZmF1bHQgVXNlcjsiXSwibWFwcGluZ3MiOiI7Ozs7OztBQUFBO0FBQWdDO0FBRWhDLE1BQU1BLFVBQVUsR0FBRyxJQUFJQyxpQkFBUSxDQUFDQyxNQUFNLENBQUM7RUFDckNDLElBQUksRUFBRTtJQUFFQyxJQUFJLEVBQUVDLE1BQU07SUFBRUMsUUFBUSxFQUFFO0VBQUssQ0FBQztFQUN0Q0MsS0FBSyxFQUFFO0lBQ0xILElBQUksRUFBRUMsTUFBTTtJQUNaQyxRQUFRLEVBQUUsSUFBSTtJQUNkRSxLQUFLLEVBQUUsSUFBSTtJQUNYQyxNQUFNLEVBQUU7RUFDVixDQUFDO0VBQ0RDLFFBQVEsRUFBRTtJQUFFTixJQUFJLEVBQUVDLE1BQU07SUFBRUMsUUFBUSxFQUFFO0VBQUssQ0FBQztFQUMxQ0ssT0FBTyxFQUFFO0lBQUVQLElBQUksRUFBRVEsT0FBTztJQUFFTixRQUFRLEVBQUUsSUFBSTtJQUFFTyxPQUFPLEVBQUU7RUFBTTtBQUMzRCxDQUFDLENBQUM7QUFDRixNQUFNQyxJQUFJLEdBQUdiLGlCQUFRLENBQUNjLEtBQUssQ0FBQyxNQUFNLEVBQUVmLFVBQVUsQ0FBQztBQUFDLGVBQ2pDYyxJQUFJO0FBQUEifQ==","map":{"version":3,"names":["userSchema","mongoose","Schema","name","type","String","required","email","index","unique","password","isAdmin","Boolean","default","User","model"],"sourceRoot":"/Users/thiago/Dev/workspace/Cadre Carton e-commerce/backend/models/","sources":["userModel.js"],"sourcesContent":["import mongoose from 'mongoose';\n\nconst userSchema = new mongoose.Schema({\n  name: { type: String, required: true },\n  email: {\n    type: String,\n    required: true,\n    index: true,\n    unique: true,\n  },\n  password: { type: String, required: true },\n  isAdmin: { type: Boolean, required: true, default: false },\n});\nconst User = mongoose.model('User', userSchema);\nexport default User;"],"mappings":";;;;;;AAAA;AAAgC;AAEhC,MAAMA,UAAU,GAAG,IAAIC,iBAAQ,CAACC,MAAM,CAAC;EACrCC,IAAI,EAAE;IAAEC,IAAI,EAAEC,MAAM;IAAEC,QAAQ,EAAE;EAAK,CAAC;EACtCC,KAAK,EAAE;IACLH,IAAI,EAAEC,MAAM;IACZC,QAAQ,EAAE,IAAI;IACdE,KAAK,EAAE,IAAI;IACXC,MAAM,EAAE;EACV,CAAC;EACDC,QAAQ,EAAE;IAAEN,IAAI,EAAEC,MAAM;IAAEC,QAAQ,EAAE;EAAK,CAAC;EAC1CK,OAAO,EAAE;IAAEP,IAAI,EAAEQ,OAAO;IAAEN,QAAQ,EAAE,IAAI;IAAEO,OAAO,EAAE;EAAM;AAC3D,CAAC,CAAC;AACF,MAAMC,IAAI,GAAGb,iBAAQ,CAACc,KAAK,CAAC,MAAM,EAAEf,UAAU,CAAC;AAAC,eACjCc,IAAI;AAAA"}},"mtime":1666877201300},"{\"assumptions\":{},\"sourceRoot\":\"/Users/thiago/Dev/workspace/Cadre Carton e-commerce/backend/routers/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/thiago/Dev/workspace/Cadre Carton e-commerce\",\"filename\":\"/Users/thiago/Dev/workspace/Cadre Carton e-commerce/backend/routers/userRouter.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/thiago/Dev/workspace/Cadre Carton e-commerce\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.19.6:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _express = _interopRequireDefault(require(\"express\"));\nvar _expressAsyncHandler = _interopRequireDefault(require(\"express-async-handler\"));\nvar _userModel = _interopRequireDefault(require(\"../models/userModel\"));\nvar _utils = require(\"../utils\");\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\nconst userRouter = _express.default.Router();\nuserRouter.get('/createadmin', (0, _expressAsyncHandler.default)(async (req, res) => {\n  try {\n    const user = new _userModel.default({\n      name: 'admin',\n      email: 'thiago@example.com',\n      password: 'bbdc',\n      isAdmin: true\n    });\n    const createdUser = await user.save();\n    res.send(createdUser);\n  } catch (err) {\n    res.status(500).send({\n      message: err.message\n    });\n  }\n}));\nuserRouter.post('/signin', (0, _expressAsyncHandler.default)(async (req, res) => {\n  const signinUser = await _userModel.default.findOne({\n    email: req.body.email,\n    password: req.body.password\n  });\n  if (!signinUser) {\n    res.status(401).send({\n      message: 'E-mail ou mot de passe incorrect.'\n    });\n  } else {\n    res.send({\n      _id: signinUser._id,\n      name: signinUser.name,\n      email: signinUser.email,\n      isAdmin: signinUser.isAdmin,\n      token: (0, _utils.generateToken)(signinUser)\n    });\n  }\n}));\nuserRouter.post('/register', (0, _expressAsyncHandler.default)(async (req, res) => {\n  const user = new _userModel.default({\n    name: req.body.name,\n    email: req.body.email,\n    password: req.body.password\n  });\n  const createdUser = await user.save();\n  if (!createdUser) {\n    res.status(401).send({\n      message: 'Données utilisateur invalides'\n    });\n  } else {\n    res.send({\n      _id: createdUser._id,\n      name: createdUser.name,\n      email: createdUser.email,\n      isAdmin: createdUser.isAdmin,\n      token: (0, _utils.generateToken)(createdUser)\n    });\n  }\n}));\nuserRouter.put('/:id', _utils.isAuth, (0, _expressAsyncHandler.default)(async (req, res) => {\n  const user = await _userModel.default.findById(req.params.id);\n  if (!user) {\n    res.status(404).send({\n      message: 'Utilisateur non trouvé.'\n    });\n  } else {\n    user.name = req.body.name || user.name;\n    user.email = req.body.email || user.email;\n    user.password = req.body.password || user.password;\n    const updatedUser = await user.save();\n    res.send({\n      _id: updatedUser._id,\n      name: updatedUser.name,\n      email: updatedUser.email,\n      isAdmin: updatedUser.isAdmin,\n      token: (0, _utils.generateToken)(updatedUser)\n    });\n  }\n}));\nvar _default = userRouter;\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJ1c2VyUm91dGVyIiwiZXhwcmVzcyIsIlJvdXRlciIsImdldCIsImV4cHJlc3NBc3luY0hhbmRsZXIiLCJyZXEiLCJyZXMiLCJ1c2VyIiwiVXNlciIsIm5hbWUiLCJlbWFpbCIsInBhc3N3b3JkIiwiaXNBZG1pbiIsImNyZWF0ZWRVc2VyIiwic2F2ZSIsInNlbmQiLCJlcnIiLCJzdGF0dXMiLCJtZXNzYWdlIiwicG9zdCIsInNpZ25pblVzZXIiLCJmaW5kT25lIiwiYm9keSIsIl9pZCIsInRva2VuIiwiZ2VuZXJhdGVUb2tlbiIsInB1dCIsImlzQXV0aCIsImZpbmRCeUlkIiwicGFyYW1zIiwiaWQiLCJ1cGRhdGVkVXNlciJdLCJzb3VyY2VSb290IjoiL1VzZXJzL3RoaWFnby9EZXYvd29ya3NwYWNlL0NhZHJlIENhcnRvbiBlLWNvbW1lcmNlL2JhY2tlbmQvcm91dGVycy8iLCJzb3VyY2VzIjpbInVzZXJSb3V0ZXIuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGV4cHJlc3MgZnJvbSAnZXhwcmVzcyc7XG5pbXBvcnQgZXhwcmVzc0FzeW5jSGFuZGxlciBmcm9tICdleHByZXNzLWFzeW5jLWhhbmRsZXInO1xuaW1wb3J0IFVzZXIgZnJvbSAnLi4vbW9kZWxzL3VzZXJNb2RlbCc7XG5pbXBvcnQgeyBnZW5lcmF0ZVRva2VuLCBpc0F1dGggfSBmcm9tICcuLi91dGlscyc7XG5cbmNvbnN0IHVzZXJSb3V0ZXIgPSBleHByZXNzLlJvdXRlcigpO1xuXG51c2VyUm91dGVyLmdldChcbiAgJy9jcmVhdGVhZG1pbicsXG4gIGV4cHJlc3NBc3luY0hhbmRsZXIoYXN5bmMgKHJlcSwgcmVzKSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHVzZXIgPSBuZXcgVXNlcih7XG4gICAgICAgIG5hbWU6ICdhZG1pbicsXG4gICAgICAgIGVtYWlsOiAndGhpYWdvQGV4YW1wbGUuY29tJyxcbiAgICAgICAgcGFzc3dvcmQ6ICdiYmRjJyxcbiAgICAgICAgaXNBZG1pbjogdHJ1ZSxcbiAgICAgIH0pO1xuICAgICAgY29uc3QgY3JlYXRlZFVzZXIgPSBhd2FpdCB1c2VyLnNhdmUoKTtcbiAgICAgIHJlcy5zZW5kKGNyZWF0ZWRVc2VyKTtcbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgIHJlcy5zdGF0dXMoNTAwKS5zZW5kKHsgbWVzc2FnZTogZXJyLm1lc3NhZ2UgfSk7XG4gICAgfVxuICB9KVxuKTtcblxudXNlclJvdXRlci5wb3N0KFxuICAnL3NpZ25pbicsXG4gIGV4cHJlc3NBc3luY0hhbmRsZXIoYXN5bmMgKHJlcSwgcmVzKSA9PiB7XG4gICAgY29uc3Qgc2lnbmluVXNlciA9IGF3YWl0IFVzZXIuZmluZE9uZSh7XG4gICAgICBlbWFpbDogcmVxLmJvZHkuZW1haWwsXG4gICAgICBwYXNzd29yZDogcmVxLmJvZHkucGFzc3dvcmQsXG4gICAgfSk7XG4gICAgaWYgKCFzaWduaW5Vc2VyKSB7XG4gICAgICByZXMuc3RhdHVzKDQwMSkuc2VuZCh7XG4gICAgICAgIG1lc3NhZ2U6ICdFLW1haWwgb3UgbW90IGRlIHBhc3NlIGluY29ycmVjdC4nLFxuICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJlcy5zZW5kKHtcbiAgICAgICAgX2lkOiBzaWduaW5Vc2VyLl9pZCxcbiAgICAgICAgbmFtZTogc2lnbmluVXNlci5uYW1lLFxuICAgICAgICBlbWFpbDogc2lnbmluVXNlci5lbWFpbCxcbiAgICAgICAgaXNBZG1pbjogc2lnbmluVXNlci5pc0FkbWluLFxuICAgICAgICB0b2tlbjogZ2VuZXJhdGVUb2tlbihzaWduaW5Vc2VyKSxcbiAgICAgIH0pO1xuICAgIH1cbiAgfSlcbik7XG5cbnVzZXJSb3V0ZXIucG9zdChcbiAgJy9yZWdpc3RlcicsXG4gIGV4cHJlc3NBc3luY0hhbmRsZXIoYXN5bmMgKHJlcSwgcmVzKSA9PiB7XG4gICAgY29uc3QgdXNlciA9IG5ldyBVc2VyKHtcbiAgICAgIG5hbWU6IHJlcS5ib2R5Lm5hbWUsXG4gICAgICBlbWFpbDogcmVxLmJvZHkuZW1haWwsXG4gICAgICBwYXNzd29yZDogcmVxLmJvZHkucGFzc3dvcmQsXG4gICAgfSk7XG4gICAgY29uc3QgY3JlYXRlZFVzZXIgPSBhd2FpdCB1c2VyLnNhdmUoKTtcbiAgICBpZiAoIWNyZWF0ZWRVc2VyKSB7XG4gICAgICByZXMuc3RhdHVzKDQwMSkuc2VuZCh7XG4gICAgICAgIG1lc3NhZ2U6ICdEb25uw6llcyB1dGlsaXNhdGV1ciBpbnZhbGlkZXMnLFxuICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJlcy5zZW5kKHtcbiAgICAgICAgX2lkOiBjcmVhdGVkVXNlci5faWQsXG4gICAgICAgIG5hbWU6IGNyZWF0ZWRVc2VyLm5hbWUsXG4gICAgICAgIGVtYWlsOiBjcmVhdGVkVXNlci5lbWFpbCxcbiAgICAgICAgaXNBZG1pbjogY3JlYXRlZFVzZXIuaXNBZG1pbixcbiAgICAgICAgdG9rZW46IGdlbmVyYXRlVG9rZW4oY3JlYXRlZFVzZXIpLFxuICAgICAgfSk7XG4gICAgfVxuICB9KVxuKTtcblxudXNlclJvdXRlci5wdXQoXG4gICcvOmlkJyxcbiAgaXNBdXRoLFxuICBleHByZXNzQXN5bmNIYW5kbGVyKGFzeW5jIChyZXEsIHJlcykgPT4ge1xuICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBVc2VyLmZpbmRCeUlkKHJlcS5wYXJhbXMuaWQpO1xuXG4gICAgaWYgKCF1c2VyKSB7XG4gICAgICByZXMuc3RhdHVzKDQwNCkuc2VuZCh7XG4gICAgICAgIG1lc3NhZ2U6ICdVdGlsaXNhdGV1ciBub24gdHJvdXbDqS4nLFxuICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHVzZXIubmFtZSA9IHJlcS5ib2R5Lm5hbWUgfHwgdXNlci5uYW1lO1xuICAgICAgdXNlci5lbWFpbCA9IHJlcS5ib2R5LmVtYWlsIHx8IHVzZXIuZW1haWw7XG4gICAgICB1c2VyLnBhc3N3b3JkID0gcmVxLmJvZHkucGFzc3dvcmQgfHwgdXNlci5wYXNzd29yZDtcbiAgICAgIGNvbnN0IHVwZGF0ZWRVc2VyID0gYXdhaXQgdXNlci5zYXZlKCk7XG4gICAgICByZXMuc2VuZCh7XG4gICAgICAgIF9pZDogdXBkYXRlZFVzZXIuX2lkLFxuICAgICAgICBuYW1lOiB1cGRhdGVkVXNlci5uYW1lLFxuICAgICAgICBlbWFpbDogdXBkYXRlZFVzZXIuZW1haWwsXG4gICAgICAgIGlzQWRtaW46IHVwZGF0ZWRVc2VyLmlzQWRtaW4sXG4gICAgICAgIHRva2VuOiBnZW5lcmF0ZVRva2VuKHVwZGF0ZWRVc2VyKSxcbiAgICAgIH0pO1xuICAgIH1cbiAgfSlcbik7XG5cbmV4cG9ydCBkZWZhdWx0IHVzZXJSb3V0ZXI7XG4iXSwibWFwcGluZ3MiOiI7Ozs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQWlEO0FBRWpELE1BQU1BLFVBQVUsR0FBR0MsZ0JBQU8sQ0FBQ0MsTUFBTSxFQUFFO0FBRW5DRixVQUFVLENBQUNHLEdBQUcsQ0FDWixjQUFjLEVBQ2QsSUFBQUMsNEJBQW1CLEVBQUMsT0FBT0MsR0FBRyxFQUFFQyxHQUFHLEtBQUs7RUFDdEMsSUFBSTtJQUNGLE1BQU1DLElBQUksR0FBRyxJQUFJQyxrQkFBSSxDQUFDO01BQ3BCQyxJQUFJLEVBQUUsT0FBTztNQUNiQyxLQUFLLEVBQUUsb0JBQW9CO01BQzNCQyxRQUFRLEVBQUUsTUFBTTtNQUNoQkMsT0FBTyxFQUFFO0lBQ1gsQ0FBQyxDQUFDO0lBQ0YsTUFBTUMsV0FBVyxHQUFHLE1BQU1OLElBQUksQ0FBQ08sSUFBSSxFQUFFO0lBQ3JDUixHQUFHLENBQUNTLElBQUksQ0FBQ0YsV0FBVyxDQUFDO0VBQ3ZCLENBQUMsQ0FBQyxPQUFPRyxHQUFHLEVBQUU7SUFDWlYsR0FBRyxDQUFDVyxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUNGLElBQUksQ0FBQztNQUFFRyxPQUFPLEVBQUVGLEdBQUcsQ0FBQ0U7SUFBUSxDQUFDLENBQUM7RUFDaEQ7QUFDRixDQUFDLENBQUMsQ0FDSDtBQUVEbEIsVUFBVSxDQUFDbUIsSUFBSSxDQUNiLFNBQVMsRUFDVCxJQUFBZiw0QkFBbUIs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","map":{"version":3,"names":["userRouter","express","Router","get","expressAsyncHandler","req","res","user","User","name","email","password","isAdmin","createdUser","save","send","err","status","message","post","signinUser","findOne","body","_id","token","generateToken","put","isAuth","findById","params","id","updatedUser"],"sourceRoot":"/Users/thiago/Dev/workspace/Cadre Carton e-commerce/backend/routers/","sources":["userRouter.js"],"sourcesContent":["import express from 'express';\nimport expressAsyncHandler from 'express-async-handler';\nimport User from '../models/userModel';\nimport { generateToken, isAuth } from '../utils';\n\nconst userRouter = express.Router();\n\nuserRouter.get(\n  '/createadmin',\n  expressAsyncHandler(async (req, res) => {\n    try {\n      const user = new User({\n        name: 'admin',\n        email: 'thiago@example.com',\n        password: 'bbdc',\n        isAdmin: true,\n      });\n      const createdUser = await user.save();\n      res.send(createdUser);\n    } catch (err) {\n      res.status(500).send({ message: err.message });\n    }\n  })\n);\n\nuserRouter.post(\n  '/signin',\n  expressAsyncHandler(async (req, res) => {\n    const signinUser = await User.findOne({\n      email: req.body.email,\n      password: req.body.password,\n    });\n    if (!signinUser) {\n      res.status(401).send({\n        message: 'E-mail ou mot de passe incorrect.',\n      });\n    } else {\n      res.send({\n        _id: signinUser._id,\n        name: signinUser.name,\n        email: signinUser.email,\n        isAdmin: signinUser.isAdmin,\n        token: generateToken(signinUser),\n      });\n    }\n  })\n);\n\nuserRouter.post(\n  '/register',\n  expressAsyncHandler(async (req, res) => {\n    const user = new User({\n      name: req.body.name,\n      email: req.body.email,\n      password: req.body.password,\n    });\n    const createdUser = await user.save();\n    if (!createdUser) {\n      res.status(401).send({\n        message: 'Données utilisateur invalides',\n      });\n    } else {\n      res.send({\n        _id: createdUser._id,\n        name: createdUser.name,\n        email: createdUser.email,\n        isAdmin: createdUser.isAdmin,\n        token: generateToken(createdUser),\n      });\n    }\n  })\n);\n\nuserRouter.put(\n  '/:id',\n  isAuth,\n  expressAsyncHandler(async (req, res) => {\n    const user = await User.findById(req.params.id);\n\n    if (!user) {\n      res.status(404).send({\n        message: 'Utilisateur non trouvé.',\n      });\n    } else {\n      user.name = req.body.name || user.name;\n      user.email = req.body.email || user.email;\n      user.password = req.body.password || user.password;\n      const updatedUser = await user.save();\n      res.send({\n        _id: updatedUser._id,\n        name: updatedUser.name,\n        email: updatedUser.email,\n        isAdmin: updatedUser.isAdmin,\n        token: generateToken(updatedUser),\n      });\n    }\n  })\n);\n\nexport default userRouter;\n"],"mappings":"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"}},"mtime":1667224153299},"{\"assumptions\":{},\"sourceRoot\":\"/Users/thiago/Dev/workspace/Cadre Carton e-commerce/backend/routers/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/thiago/Dev/workspace/Cadre Carton e-commerce\",\"filename\":\"/Users/thiago/Dev/workspace/Cadre Carton e-commerce/backend/routers/userRouter.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/thiago/Dev/workspace/Cadre Carton e-commerce\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.19.6:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _express = _interopRequireDefault(require(\"express\"));\nvar _expressAsyncHandler = _interopRequireDefault(require(\"express-async-handler\"));\nvar _userModel = _interopRequireDefault(require(\"../models/userModel\"));\nvar _utils = require(\"../utils\");\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\nconst userRouter = _express.default.Router();\nuserRouter.get('/createadmin', (0, _expressAsyncHandler.default)(async (req, res) => {\n  try {\n    const user = new _userModel.default({\n      name: 'admin',\n      email: 'thiago@example.com',\n      password: 'bbdc',\n      isAdmin: true\n    });\n    const createdUser = await user.save();\n    res.send(createdUser);\n  } catch (err) {\n    res.status(500).send({\n      message: err.message\n    });\n  }\n}));\nuserRouter.post('/signin', (0, _expressAsyncHandler.default)(async (req, res) => {\n  const signinUser = await _userModel.default.findOne({\n    email: req.body.email,\n    password: req.body.password\n  });\n  if (!signinUser) {\n    res.status(401).send({\n      message: 'E-mail ou mot de passe incorrect.'\n    });\n  } else {\n    res.send({\n      _id: signinUser._id,\n      name: signinUser.name,\n      email: signinUser.email,\n      isAdmin: signinUser.isAdmin,\n      token: (0, _utils.generateToken)(signinUser)\n    });\n  }\n}));\nuserRouter.post('/register', (0, _expressAsyncHandler.default)(async (req, res) => {\n  const user = new _userModel.default({\n    name: req.body.name,\n    email: req.body.email,\n    password: req.body.password\n  });\n  const createdUser = await user.save();\n  if (!createdUser) {\n    res.status(401).send({\n      message: 'Données utilisateur invalides'\n    });\n  } else {\n    res.send({\n      _id: createdUser._id,\n      name: createdUser.name,\n      email: createdUser.email,\n      isAdmin: createdUser.isAdmin,\n      token: (0, _utils.generateToken)(createdUser)\n    });\n  }\n}));\nuserRouter.put('/:id', _utils.isAuth, (0, _expressAsyncHandler.default)(async (req, res) => {\n  const user = await _userModel.default.findById(req.params.id);\n  if (!user) {\n    res.status(404).send({\n      message: 'Utilisateur non trouvé.'\n    });\n  } else {\n    user.name = req.body.name || user.name;\n    user.email = req.body.email || user.email;\n    user.password = req.body.password || user.password;\n    const updatedUser = await user.save();\n    res.send({\n      _id: updatedUser._id,\n      name: updatedUser.name,\n      email: updatedUser.email,\n      isAdmin: updatedUser.isAdmin,\n      token: (0, _utils.generateToken)(updatedUser)\n    });\n  }\n}));\nvar _default = userRouter;\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJ1c2VyUm91dGVyIiwiZXhwcmVzcyIsIlJvdXRlciIsImdldCIsImV4cHJlc3NBc3luY0hhbmRsZXIiLCJyZXEiLCJyZXMiLCJ1c2VyIiwiVXNlciIsIm5hbWUiLCJlbWFpbCIsInBhc3N3b3JkIiwiaXNBZG1pbiIsImNyZWF0ZWRVc2VyIiwic2F2ZSIsInNlbmQiLCJlcnIiLCJzdGF0dXMiLCJtZXNzYWdlIiwicG9zdCIsInNpZ25pblVzZXIiLCJmaW5kT25lIiwiYm9keSIsIl9pZCIsInRva2VuIiwiZ2VuZXJhdGVUb2tlbiIsInB1dCIsImlzQXV0aCIsImZpbmRCeUlkIiwicGFyYW1zIiwiaWQiLCJ1cGRhdGVkVXNlciJdLCJzb3VyY2VSb290IjoiL1VzZXJzL3RoaWFnby9EZXYvd29ya3NwYWNlL0NhZHJlIENhcnRvbiBlLWNvbW1lcmNlL2JhY2tlbmQvcm91dGVycy8iLCJzb3VyY2VzIjpbInVzZXJSb3V0ZXIuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGV4cHJlc3MgZnJvbSAnZXhwcmVzcyc7XG5pbXBvcnQgZXhwcmVzc0FzeW5jSGFuZGxlciBmcm9tICdleHByZXNzLWFzeW5jLWhhbmRsZXInO1xuaW1wb3J0IFVzZXIgZnJvbSAnLi4vbW9kZWxzL3VzZXJNb2RlbCc7XG5pbXBvcnQgeyBnZW5lcmF0ZVRva2VuLCBpc0F1dGggfSBmcm9tICcuLi91dGlscyc7XG5cbmNvbnN0IHVzZXJSb3V0ZXIgPSBleHByZXNzLlJvdXRlcigpO1xuXG51c2VyUm91dGVyLmdldChcbiAgJy9jcmVhdGVhZG1pbicsXG4gIGV4cHJlc3NBc3luY0hhbmRsZXIoYXN5bmMgKHJlcSwgcmVzKSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHVzZXIgPSBuZXcgVXNlcih7XG4gICAgICAgIG5hbWU6ICdhZG1pbicsXG4gICAgICAgIGVtYWlsOiAndGhpYWdvQGV4YW1wbGUuY29tJyxcbiAgICAgICAgcGFzc3dvcmQ6ICdiYmRjJyxcbiAgICAgICAgaXNBZG1pbjogdHJ1ZSxcbiAgICAgIH0pO1xuICAgICAgY29uc3QgY3JlYXRlZFVzZXIgPSBhd2FpdCB1c2VyLnNhdmUoKTtcbiAgICAgIHJlcy5zZW5kKGNyZWF0ZWRVc2VyKTtcbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgIHJlcy5zdGF0dXMoNTAwKS5zZW5kKHsgbWVzc2FnZTogZXJyLm1lc3NhZ2UgfSk7XG4gICAgfVxuICB9KVxuKTtcblxudXNlclJvdXRlci5wb3N0KFxuICAnL3NpZ25pbicsXG4gIGV4cHJlc3NBc3luY0hhbmRsZXIoYXN5bmMgKHJlcSwgcmVzKSA9PiB7XG4gICAgY29uc3Qgc2lnbmluVXNlciA9IGF3YWl0IFVzZXIuZmluZE9uZSh7XG4gICAgICBlbWFpbDogcmVxLmJvZHkuZW1haWwsXG4gICAgICBwYXNzd29yZDogcmVxLmJvZHkucGFzc3dvcmQsXG4gICAgfSk7XG4gICAgaWYgKCFzaWduaW5Vc2VyKSB7XG4gICAgICByZXMuc3RhdHVzKDQwMSkuc2VuZCh7XG4gICAgICAgIG1lc3NhZ2U6ICdFLW1haWwgb3UgbW90IGRlIHBhc3NlIGluY29ycmVjdC4nLFxuICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJlcy5zZW5kKHtcbiAgICAgICAgX2lkOiBzaWduaW5Vc2VyLl9pZCxcbiAgICAgICAgbmFtZTogc2lnbmluVXNlci5uYW1lLFxuICAgICAgICBlbWFpbDogc2lnbmluVXNlci5lbWFpbCxcbiAgICAgICAgaXNBZG1pbjogc2lnbmluVXNlci5pc0FkbWluLFxuICAgICAgICB0b2tlbjogZ2VuZXJhdGVUb2tlbihzaWduaW5Vc2VyKSxcbiAgICAgIH0pO1xuICAgIH1cbiAgfSlcbik7XG5cbnVzZXJSb3V0ZXIucG9zdChcbiAgJy9yZWdpc3RlcicsXG4gIGV4cHJlc3NBc3luY0hhbmRsZXIoYXN5bmMgKHJlcSwgcmVzKSA9PiB7XG4gICAgY29uc3QgdXNlciA9IG5ldyBVc2VyKHtcbiAgICAgIG5hbWU6IHJlcS5ib2R5Lm5hbWUsXG4gICAgICBlbWFpbDogcmVxLmJvZHkuZW1haWwsXG4gICAgICBwYXNzd29yZDogcmVxLmJvZHkucGFzc3dvcmQsXG4gICAgfSk7XG4gICAgY29uc3QgY3JlYXRlZFVzZXIgPSBhd2FpdCB1c2VyLnNhdmUoKTtcbiAgICBpZiAoIWNyZWF0ZWRVc2VyKSB7XG4gICAgICByZXMuc3RhdHVzKDQwMSkuc2VuZCh7XG4gICAgICAgIG1lc3NhZ2U6ICdEb25uw6llcyB1dGlsaXNhdGV1ciBpbnZhbGlkZXMnLFxuICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJlcy5zZW5kKHtcbiAgICAgICAgX2lkOiBjcmVhdGVkVXNlci5faWQsXG4gICAgICAgIG5hbWU6IGNyZWF0ZWRVc2VyLm5hbWUsXG4gICAgICAgIGVtYWlsOiBjcmVhdGVkVXNlci5lbWFpbCxcbiAgICAgICAgaXNBZG1pbjogY3JlYXRlZFVzZXIuaXNBZG1pbixcbiAgICAgICAgdG9rZW46IGdlbmVyYXRlVG9rZW4oY3JlYXRlZFVzZXIpLFxuICAgICAgfSk7XG4gICAgfVxuICB9KVxuKTtcblxudXNlclJvdXRlci5wdXQoXG4gICcvOmlkJyxcbiAgaXNBdXRoLFxuICBleHByZXNzQXN5bmNIYW5kbGVyKGFzeW5jIChyZXEsIHJlcykgPT4ge1xuICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBVc2VyLmZpbmRCeUlkKHJlcS5wYXJhbXMuaWQpO1xuXG4gICAgaWYgKCF1c2VyKSB7XG4gICAgICByZXMuc3RhdHVzKDQwNCkuc2VuZCh7XG4gICAgICAgIG1lc3NhZ2U6ICdVdGlsaXNhdGV1ciBub24gdHJvdXbDqS4nLFxuICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHVzZXIubmFtZSA9IHJlcS5ib2R5Lm5hbWUgfHwgdXNlci5uYW1lO1xuICAgICAgdXNlci5lbWFpbCA9IHJlcS5ib2R5LmVtYWlsIHx8IHVzZXIuZW1haWw7XG4gICAgICB1c2VyLnBhc3N3b3JkID0gcmVxLmJvZHkucGFzc3dvcmQgfHwgdXNlci5wYXNzd29yZDtcbiAgICAgIGNvbnN0IHVwZGF0ZWRVc2VyID0gYXdhaXQgdXNlci5zYXZlKCk7XG4gICAgICByZXMuc2VuZCh7XG4gICAgICAgIF9pZDogdXBkYXRlZFVzZXIuX2lkLFxuICAgICAgICBuYW1lOiB1cGRhdGVkVXNlci5uYW1lLFxuICAgICAgICBlbWFpbDogdXBkYXRlZFVzZXIuZW1haWwsXG4gICAgICAgIGlzQWRtaW46IHVwZGF0ZWRVc2VyLmlzQWRtaW4sXG4gICAgICAgIHRva2VuOiBnZW5lcmF0ZVRva2VuKHVwZGF0ZWRVc2VyKSxcbiAgICAgIH0pO1xuICAgIH1cbiAgfSlcbik7XG5cbmV4cG9ydCBkZWZhdWx0IHVzZXJSb3V0ZXI7XG4iXSwibWFwcGluZ3MiOiI7Ozs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQWlEO0FBRWpELE1BQU1BLFVBQVUsR0FBR0MsZ0JBQU8sQ0FBQ0MsTUFBTSxFQUFFO0FBRW5DRixVQUFVLENBQUNHLEdBQUcsQ0FDWixjQUFjLEVBQ2QsSUFBQUMsNEJBQW1CLEVBQUMsT0FBT0MsR0FBRyxFQUFFQyxHQUFHLEtBQUs7RUFDdEMsSUFBSTtJQUNGLE1BQU1DLElBQUksR0FBRyxJQUFJQyxrQkFBSSxDQUFDO01BQ3BCQyxJQUFJLEVBQUUsT0FBTztNQUNiQyxLQUFLLEVBQUUsb0JBQW9CO01BQzNCQyxRQUFRLEVBQUUsTUFBTTtNQUNoQkMsT0FBTyxFQUFFO0lBQ1gsQ0FBQyxDQUFDO0lBQ0YsTUFBTUMsV0FBVyxHQUFHLE1BQU1OLElBQUksQ0FBQ08sSUFBSSxFQUFFO0lBQ3JDUixHQUFHLENBQUNTLElBQUksQ0FBQ0YsV0FBVyxDQUFDO0VBQ3ZCLENBQUMsQ0FBQyxPQUFPRyxHQUFHLEVBQUU7SUFDWlYsR0FBRyxDQUFDVyxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUNGLElBQUksQ0FBQztNQUFFRyxPQUFPLEVBQUVGLEdBQUcsQ0FBQ0U7SUFBUSxDQUFDLENBQUM7RUFDaEQ7QUFDRixDQUFDLENBQUMsQ0FDSDtBQUVEbEIsVUFBVSxDQUFDbUIsSUFBSSxDQUNiLFNBQVMsRUFDVCxJQUFBZiw0QkFBbUIsRUFBQyxPQUFPQyxHQUFHLEVBQUVDLEdBQUcsS0FBSztFQUN0QyxNQUFNYyxVQUFVLEdBQUcsTUFBTVosa0JBQUksQ0FBQ2EsT0FBTyxDQUFDO0lBQ3BDWCxLQUFLLEVBQUVMLEdBQUcsQ0FBQ2lCLElBQUksQ0FBQ1osS0FBSztJQUNyQkMsUUFBUSxFQUFFTixHQUFHLENBQUNpQixJQUFJLENBQUNYO0VBQ3JCLENBQUMsQ0FBQztFQUNGLElBQUksQ0FBQ1MsVUFBVSxFQUFFO0lBQ2ZkLEdBQUcsQ0FBQ1csTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDRixJQUFJLENBQUM7TUFDbkJHLE9BQU8sRUFBRTtJQUNYLENBQUMsQ0FBQztFQUNKLENBQUMsTUFBTTtJQUNMWixHQUFHLENBQUNTLElBQUksQ0FBQztNQUNQUSxHQUFHLEVBQUVILFVBQVUsQ0FBQ0csR0FBRztNQUNuQmQsSUFBSSxFQUFFVyxVQUFVLENBQUNYLElBQUk7TUFDckJDLEtBQUssRUFBRVUsVUFBVSxDQUFDVixLQUFLO01BQ3ZCRSxPQUFPLEVBQUVRLFVBQVUsQ0FBQ1IsT0FBTztNQUMzQlksS0FBSyxFQUFFLElBQUFDLG9CQUFhLEVBQUNMLFVBQVU7SUFDakMsQ0FBQyxDQUFDO0VBQ0o7QUFDRixDQUFDLENBQUMsQ0FDSDtBQUVEcEIsVUFBVSxDQUFDbUIsSUFBSSxDQUNiLFdBQVcsRUFDWCxJQUFBZiw0QkFBbUIsRUFBQyxPQUFPQyxHQUFHLEVBQUVDLEdBQUcsS0FBSztFQUN0QyxNQUFNQyxJQUFJLEdBQUcsSUFBSUMsa0JBQUksQ0FBQztJQUNwQkMsSUFBSSxFQUFFSixHQUFHLENBQUNpQixJQUFJLENBQUNiLElBQUk7SUFDbkJDLEtBQUssRUFBRUwsR0FBRyxDQUFDaUIsSUFBSSxDQUFDWixLQUFLO0lBQ3JCQyxRQUFRLEVBQUVOLEdBQUcsQ0FBQ2lCLElBQUksQ0FBQ1g7RUFDckIsQ0FBQyxDQUFDO0VBQ0YsTUFBTUUsV0FBVyxHQUFHLE1BQU1OLElBQUksQ0FBQ08sSUFBSSxFQUFFO0VBQ3JDLElBQUksQ0FBQ0QsV0FBVyxFQUFFO0lBQ2hCUCxHQUFHLENBQUNXLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQ0YsSUFBSSxDQUFDO01BQ25CRyxPQUFPLEVBQUU7SUFDWCxDQUFDLENBQUM7RUFDSixDQUFDLE1BQU07SUFDTFosR0FBRyxDQUFDUyxJQUFJLENBQUM7TUFDUFEsR0FBRyxFQUFFVixXQUFXLENBQUNVLEdBQUc7TUFDcEJkLElBQUksRUFBRUksV0FBVyxDQUFDSixJQUFJO01BQ3RCQyxLQUFLLEVBQUVHLFdBQVcsQ0FBQ0gsS0FBSztNQUN4QkUsT0FBTyxFQUFFQyxXQUFXLENBQUNELE9BQU87TUFDNUJZLEtBQUssRUFBRSxJQUFBQyxvQkFBYSxFQUFDWixXQUFXO0lBQ2xDLENBQUMsQ0FBQztFQUNKO0FBQ0YsQ0FBQyxDQUFDLENBQ0g7QUFFRGIsVUFBVSxDQUFDMEIsR0FBRyxDQUNaLE1BQU0sRUFDTkMsYUFBTSxFQUNOLElBQUF2Qiw0QkFBbUIsRUFBQyxPQUFPQyxHQUFHLEVBQUVDLEdBQUcsS0FBSztFQUN0QyxNQUFNQyxJQUFJLEdBQUcsTUFBTUMsa0JBQUksQ0FBQ29CLFFBQVEsQ0FBQ3ZCLEdBQUcsQ0FBQ3dCLE1BQU0sQ0FBQ0MsRUFBRSxDQUFDO0VBRS9DLElBQUksQ0FBQ3ZCLElBQUksRUFBRTtJQUNURCxHQUFHLENBQUNXLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQ0YsSUFBSSxDQUFDO01BQ25CRyxPQUFPLEVBQUU7SUFDWCxDQUFDLENBQUM7RUFDSixDQUFDLE1BQU07SUFDTFgsSUFBSSxDQUFDRSxJQUFJLEdBQUdKLEdBQUcsQ0FBQ2lCLElBQUksQ0FBQ2IsSUFBSSxJQUFJRixJQUFJLENBQUNFLElBQUk7SUFDdENGLElBQUksQ0FBQ0csS0FBSyxHQUFHTCxHQUFHLENBQUNpQixJQUFJLENBQUNaLEtBQUssSUFBSUgsSUFBSSxDQUFDRyxLQUFLO0lBQ3pDSCxJQUFJLENBQUNJLFFBQVEsR0FBR04sR0FBRyxDQUFDaUIsSUFBSSxDQUFDWCxRQUFRLElBQUlKLElBQUksQ0FBQ0ksUUFBUTtJQUNsRCxNQUFNb0IsV0FBVyxHQUFHLE1BQU14QixJQUFJLENBQUNPLElBQUksRUFBRTtJQUNyQ1IsR0FBRyxDQUFDUyxJQUFJLENBQUM7TUFDUFEsR0FBRyxFQUFFUSxXQUFXLENBQUNSLEdBQUc7TUFDcEJkLElBQUksRUFBRXNCLFdBQVcsQ0FBQ3RCLElBQUk7TUFDdEJDLEtBQUssRUFBRXFCLFdBQVcsQ0FBQ3JCLEtBQUs7TUFDeEJFLE9BQU8sRUFBRW1CLFdBQVcsQ0FBQ25CLE9BQU87TUFDNUJZLEtBQUssRUFBRSxJQUFBQyxvQkFBYSxFQUFDTSxXQUFXO0lBQ2xDLENBQUMsQ0FBQztFQUNKO0FBQ0YsQ0FBQyxDQUFDLENBQ0g7QUFBQyxlQUVhL0IsVUFBVTtBQUFBIn0=","map":{"version":3,"names":["userRouter","express","Router","get","expressAsyncHandler","req","res","user","User","name","email","password","isAdmin","createdUser","save","send","err","status","message","post","signinUser","findOne","body","_id","token","generateToken","put","isAuth","findById","params","id","updatedUser"],"sourceRoot":"/Users/thiago/Dev/workspace/Cadre Carton e-commerce/backend/routers/","sources":["userRouter.js"],"sourcesContent":["import express from 'express';\nimport expressAsyncHandler from 'express-async-handler';\nimport User from '../models/userModel';\nimport { generateToken, isAuth } from '../utils';\n\nconst userRouter = express.Router();\n\nuserRouter.get(\n  '/createadmin',\n  expressAsyncHandler(async (req, res) => {\n    try {\n      const user = new User({\n        name: 'admin',\n        email: 'thiago@example.com',\n        password: 'bbdc',\n        isAdmin: true,\n      });\n      const createdUser = await user.save();\n      res.send(createdUser);\n    } catch (err) {\n      res.status(500).send({ message: err.message });\n    }\n  })\n);\n\nuserRouter.post(\n  '/signin',\n  expressAsyncHandler(async (req, res) => {\n    const signinUser = await User.findOne({\n      email: req.body.email,\n      password: req.body.password,\n    });\n    if (!signinUser) {\n      res.status(401).send({\n        message: 'E-mail ou mot de passe incorrect.',\n      });\n    } else {\n      res.send({\n        _id: signinUser._id,\n        name: signinUser.name,\n        email: signinUser.email,\n        isAdmin: signinUser.isAdmin,\n        token: generateToken(signinUser),\n      });\n    }\n  })\n);\n\nuserRouter.post(\n  '/register',\n  expressAsyncHandler(async (req, res) => {\n    const user = new User({\n      name: req.body.name,\n      email: req.body.email,\n      password: req.body.password,\n    });\n    const createdUser = await user.save();\n    if (!createdUser) {\n      res.status(401).send({\n        message: 'Données utilisateur invalides',\n      });\n    } else {\n      res.send({\n        _id: createdUser._id,\n        name: createdUser.name,\n        email: createdUser.email,\n        isAdmin: createdUser.isAdmin,\n        token: generateToken(createdUser),\n      });\n    }\n  })\n);\n\nuserRouter.put(\n  '/:id',\n  isAuth,\n  expressAsyncHandler(async (req, res) => {\n    const user = await User.findById(req.params.id);\n\n    if (!user) {\n      res.status(404).send({\n        message: 'Utilisateur non trouvé.',\n      });\n    } else {\n      user.name = req.body.name || user.name;\n      user.email = req.body.email || user.email;\n      user.password = req.body.password || user.password;\n      const updatedUser = await user.save();\n      res.send({\n        _id: updatedUser._id,\n        name: updatedUser.name,\n        email: updatedUser.email,\n        isAdmin: updatedUser.isAdmin,\n        token: generateToken(updatedUser),\n      });\n    }\n  })\n);\n\nexport default userRouter;\n"],"mappings":"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"}},"mtime":1667224153299},"{\"assumptions\":{},\"sourceRoot\":\"/Users/thiago/Dev/workspace/Cadre Carton e-commerce/backend/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/thiago/Dev/workspace/Cadre Carton e-commerce\",\"filename\":\"/Users/thiago/Dev/workspace/Cadre Carton e-commerce/backend/utils.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/thiago/Dev/workspace/Cadre Carton e-commerce\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.19.6:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.isAuth = exports.isAdmin = exports.generateToken = void 0;\nvar _jsonwebtoken = _interopRequireDefault(require(\"jsonwebtoken\"));\nvar _config = _interopRequireDefault(require(\"./config\"));\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\nconst generateToken = user => _jsonwebtoken.default.sign({\n  _id: user._id,\n  name: user.name,\n  email: user.email,\n  isAdmin: user.isAdmin\n}, _config.default.JWT_SECRET);\nexports.generateToken = generateToken;\nconst isAuth = (req, res, next) => {\n  const bearerToken = req.headers.authorization;\n  if (!bearerToken) {\n    res.status(401).send({\n      message: \"Token is not supplied\"\n    });\n  } else {\n    const token = bearerToken.slice(7, bearerToken.length);\n    _jsonwebtoken.default.verify(token, _config.default.JWT_SECRET, (err, data) => {\n      if (err) {\n        res.status(401).send({\n          message: \"Invalid Token\"\n        });\n      } else {\n        req.user = data;\n        next();\n      }\n    });\n  }\n};\nexports.isAuth = isAuth;\nconst isAdmin = (req, res, next) => {\n  if (req.user && req.user.isAdmin) {\n    next();\n  } else {\n    res.status(401).send({\n      message: \"Token is not valid for admin user\"\n    });\n  }\n};\nexports.isAdmin = isAdmin;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJnZW5lcmF0ZVRva2VuIiwidXNlciIsImp3dCIsInNpZ24iLCJfaWQiLCJuYW1lIiwiZW1haWwiLCJpc0FkbWluIiwiY29uZmlnIiwiSldUX1NFQ1JFVCIsImlzQXV0aCIsInJlcSIsInJlcyIsIm5leHQiLCJiZWFyZXJUb2tlbiIsImhlYWRlcnMiLCJhdXRob3JpemF0aW9uIiwic3RhdHVzIiwic2VuZCIsIm1lc3NhZ2UiLCJ0b2tlbiIsInNsaWNlIiwibGVuZ3RoIiwidmVyaWZ5IiwiZXJyIiwiZGF0YSJdLCJzb3VyY2VSb290IjoiL1VzZXJzL3RoaWFnby9EZXYvd29ya3NwYWNlL0NhZHJlIENhcnRvbiBlLWNvbW1lcmNlL2JhY2tlbmQvIiwic291cmNlcyI6WyJ1dGlscy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgand0IGZyb20gXCJqc29ud2VidG9rZW5cIjtcbmltcG9ydCBjb25maWcgZnJvbSBcIi4vY29uZmlnXCI7XG5cbmV4cG9ydCBjb25zdCBnZW5lcmF0ZVRva2VuID0gKHVzZXIpID0+XG4gIGp3dC5zaWduKFxuICAgIHtcbiAgICAgIF9pZDogdXNlci5faWQsXG4gICAgICBuYW1lOiB1c2VyLm5hbWUsXG4gICAgICBlbWFpbDogdXNlci5lbWFpbCxcbiAgICAgIGlzQWRtaW46IHVzZXIuaXNBZG1pbixcbiAgICB9LFxuICAgIGNvbmZpZy5KV1RfU0VDUkVUXG4gICk7XG5cbmV4cG9ydCBjb25zdCBpc0F1dGggPSAocmVxLCByZXMsIG5leHQpID0+IHtcbiAgY29uc3QgYmVhcmVyVG9rZW4gPSByZXEuaGVhZGVycy5hdXRob3JpemF0aW9uO1xuICBpZiAoIWJlYXJlclRva2VuKSB7XG4gICAgcmVzLnN0YXR1cyg0MDEpLnNlbmQoeyBtZXNzYWdlOiBcIlRva2VuIGlzIG5vdCBzdXBwbGllZFwiIH0pO1xuICB9IGVsc2Uge1xuICAgIGNvbnN0IHRva2VuID0gYmVhcmVyVG9rZW4uc2xpY2UoNywgYmVhcmVyVG9rZW4ubGVuZ3RoKTtcbiAgICBqd3QudmVyaWZ5KHRva2VuLCBjb25maWcuSldUX1NFQ1JFVCwgKGVyciwgZGF0YSkgPT4ge1xuICAgICAgaWYgKGVycikge1xuICAgICAgICByZXMuc3RhdHVzKDQwMSkuc2VuZCh7IG1lc3NhZ2U6IFwiSW52YWxpZCBUb2tlblwiIH0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmVxLnVzZXIgPSBkYXRhO1xuICAgICAgICBuZXh0KCk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cbn07XG5cbmV4cG9ydCBjb25zdCBpc0FkbWluID0gKHJlcSwgcmVzLCBuZXh0KSA9PiB7XG4gIGlmIChyZXEudXNlciAmJiByZXEudXNlci5pc0FkbWluKSB7XG4gICAgbmV4dCgpO1xuICB9IGVsc2Uge1xuICAgIHJlcy5zdGF0dXMoNDAxKS5zZW5kKHsgbWVzc2FnZTogXCJUb2tlbiBpcyBub3QgdmFsaWQgZm9yIGFkbWluIHVzZXJcIiB9KTtcbiAgfVxufTtcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQUE7QUFDQTtBQUE4QjtBQUV2QixNQUFNQSxhQUFhLEdBQUlDLElBQUksSUFDaENDLHFCQUFHLENBQUNDLElBQUksQ0FDTjtFQUNFQyxHQUFHLEVBQUVILElBQUksQ0FBQ0csR0FBRztFQUNiQyxJQUFJLEVBQUVKLElBQUksQ0FBQ0ksSUFBSTtFQUNmQyxLQUFLLEVBQUVMLElBQUksQ0FBQ0ssS0FBSztFQUNqQkMsT0FBTyxFQUFFTixJQUFJLENBQUNNO0FBQ2hCLENBQUMsRUFDREMsZUFBTSxDQUFDQyxVQUFVLENBQ2xCO0FBQUM7QUFFRyxNQUFNQyxNQUFNLEdBQUcsQ0FBQ0MsR0FBRyxFQUFFQyxHQUFHLEVBQUVDLElBQUksS0FBSztFQUN4QyxNQUFNQyxXQUFXLEdBQUdILEdBQUcsQ0FBQ0ksT0FBTyxDQUFDQyxhQUFhO0VBQzdDLElBQUksQ0FBQ0YsV0FBVyxFQUFFO0lBQ2hCRixHQUFHLENBQUNLLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQ0MsSUFBSSxDQUFDO01BQUVDLE9BQU8sRUFBRTtJQUF3QixDQUFDLENBQUM7RUFDNUQsQ0FBQyxNQUFNO0lBQ0wsTUFBTUMsS0FBSyxHQUFHTixXQUFXLENBQUNPLEtBQUssQ0FBQyxDQUFDLEVBQUVQLFdBQVcsQ0FBQ1EsTUFBTSxDQUFDO0lBQ3REcEIscUJBQUcsQ0FBQ3FCLE1BQU0sQ0FBQ0gsS0FBSyxFQUFFWixlQUFNLENBQUNDLFVBQVUsRUFBRSxDQUFDZSxHQUFHLEVBQUVDLElBQUksS0FBSztNQUNsRCxJQUFJRCxHQUFHLEVBQUU7UUFDUFosR0FBRyxDQUFDSyxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUNDLElBQUksQ0FBQztVQUFFQyxPQUFPLEVBQUU7UUFBZ0IsQ0FBQyxDQUFDO01BQ3BELENBQUMsTUFBTTtRQUNMUixHQUFHLENBQUNWLElBQUksR0FBR3dCLElBQUk7UUFDZlosSUFBSSxFQUFFO01BQ1I7SUFDRixDQUFDLENBQUM7RUFDSjtBQUNGLENBQUM7QUFBQztBQUVLLE1BQU1OLE9BQU8sR0FBRyxDQUFDSSxHQUFHLEVBQUVDLEdBQUcsRUFBRUMsSUFBSSxLQUFLO0VBQ3pDLElBQUlGLEdBQUcsQ0FBQ1YsSUFBSSxJQUFJVSxHQUFHLENBQUNWLElBQUksQ0FBQ00sT0FBTyxFQUFFO0lBQ2hDTSxJQUFJLEVBQUU7RUFDUixDQUFDLE1BQU07SUFDTEQsR0FBRyxDQUFDSyxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUNDLElBQUksQ0FBQztNQUFFQyxPQUFPLEVBQUU7SUFBb0MsQ0FBQyxDQUFDO0VBQ3hFO0FBQ0YsQ0FBQztBQUFDIn0=","map":{"version":3,"names":["generateToken","user","jwt","sign","_id","name","email","isAdmin","config","JWT_SECRET","isAuth","req","res","next","bearerToken","headers","authorization","status","send","message","token","slice","length","verify","err","data"],"sourceRoot":"/Users/thiago/Dev/workspace/Cadre Carton e-commerce/backend/","sources":["utils.js"],"sourcesContent":["import jwt from \"jsonwebtoken\";\nimport config from \"./config\";\n\nexport const generateToken = (user) =>\n  jwt.sign(\n    {\n      _id: user._id,\n      name: user.name,\n      email: user.email,\n      isAdmin: user.isAdmin,\n    },\n    config.JWT_SECRET\n  );\n\nexport const isAuth = (req, res, next) => {\n  const bearerToken = req.headers.authorization;\n  if (!bearerToken) {\n    res.status(401).send({ message: \"Token is not supplied\" });\n  } else {\n    const token = bearerToken.slice(7, bearerToken.length);\n    jwt.verify(token, config.JWT_SECRET, (err, data) => {\n      if (err) {\n        res.status(401).send({ message: \"Invalid Token\" });\n      } else {\n        req.user = data;\n        next();\n      }\n    });\n  }\n};\n\nexport const isAdmin = (req, res, next) => {\n  if (req.user && req.user.isAdmin) {\n    next();\n  } else {\n    res.status(401).send({ message: \"Token is not valid for admin user\" });\n  }\n};\n"],"mappings":";;;;;;AAAA;AACA;AAA8B;AAEvB,MAAMA,aAAa,GAAIC,IAAI,IAChCC,qBAAG,CAACC,IAAI,CACN;EACEC,GAAG,EAAEH,IAAI,CAACG,GAAG;EACbC,IAAI,EAAEJ,IAAI,CAACI,IAAI;EACfC,KAAK,EAAEL,IAAI,CAACK,KAAK;EACjBC,OAAO,EAAEN,IAAI,CAACM;AAChB,CAAC,EACDC,eAAM,CAACC,UAAU,CAClB;AAAC;AAEG,MAAMC,MAAM,GAAG,CAACC,GAAG,EAAEC,GAAG,EAAEC,IAAI,KAAK;EACxC,MAAMC,WAAW,GAAGH,GAAG,CAACI,OAAO,CAACC,aAAa;EAC7C,IAAI,CAACF,WAAW,EAAE;IAChBF,GAAG,CAACK,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;MAAEC,OAAO,EAAE;IAAwB,CAAC,CAAC;EAC5D,CAAC,MAAM;IACL,MAAMC,KAAK,GAAGN,WAAW,CAACO,KAAK,CAAC,CAAC,EAAEP,WAAW,CAACQ,MAAM,CAAC;IACtDpB,qBAAG,CAACqB,MAAM,CAACH,KAAK,EAAEZ,eAAM,CAACC,UAAU,EAAE,CAACe,GAAG,EAAEC,IAAI,KAAK;MAClD,IAAID,GAAG,EAAE;QACPZ,GAAG,CAACK,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;UAAEC,OAAO,EAAE;QAAgB,CAAC,CAAC;MACpD,CAAC,MAAM;QACLR,GAAG,CAACV,IAAI,GAAGwB,IAAI;QACfZ,IAAI,EAAE;MACR;IACF,CAAC,CAAC;EACJ;AACF,CAAC;AAAC;AAEK,MAAMN,OAAO,GAAG,CAACI,GAAG,EAAEC,GAAG,EAAEC,IAAI,KAAK;EACzC,IAAIF,GAAG,CAACV,IAAI,IAAIU,GAAG,CAACV,IAAI,CAACM,OAAO,EAAE;IAChCM,IAAI,EAAE;EACR,CAAC,MAAM;IACLD,GAAG,CAACK,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;MAAEC,OAAO,EAAE;IAAoC,CAAC,CAAC;EACxE;AACF,CAAC;AAAC"}},"mtime":1669799168998},"{\"assumptions\":{},\"sourceRoot\":\"/Users/thiago/Dev/workspace/Cadre Carton e-commerce/backend/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/thiago/Dev/workspace/Cadre Carton e-commerce\",\"filename\":\"/Users/thiago/Dev/workspace/Cadre Carton e-commerce/backend/utils.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/thiago/Dev/workspace/Cadre Carton e-commerce\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.19.6:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.isAuth = exports.isAdmin = exports.generateToken = void 0;\nvar _jsonwebtoken = _interopRequireDefault(require(\"jsonwebtoken\"));\nvar _config = _interopRequireDefault(require(\"./config\"));\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\nconst generateToken = user => _jsonwebtoken.default.sign({\n  _id: user._id,\n  name: user.name,\n  email: user.email,\n  isAdmin: user.isAdmin\n}, _config.default.JWT_SECRET);\nexports.generateToken = generateToken;\nconst isAuth = (req, res, next) => {\n  const bearerToken = req.headers.authorization;\n  if (!bearerToken) {\n    res.status(401).send({\n      message: \"Token is not supplied\"\n    });\n  } else {\n    const token = bearerToken.slice(7, bearerToken.length);\n    _jsonwebtoken.default.verify(token, _config.default.JWT_SECRET, (err, data) => {\n      if (err) {\n        res.status(401).send({\n          message: \"Invalid Token\"\n        });\n      } else {\n        req.user = data;\n        next();\n      }\n    });\n  }\n};\nexports.isAuth = isAuth;\nconst isAdmin = (req, res, next) => {\n  if (req.user && req.user.isAdmin) {\n    next();\n  } else {\n    res.status(401).send({\n      message: \"Token is not valid for admin user\"\n    });\n  }\n};\nexports.isAdmin = isAdmin;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJnZW5lcmF0ZVRva2VuIiwidXNlciIsImp3dCIsInNpZ24iLCJfaWQiLCJuYW1lIiwiZW1haWwiLCJpc0FkbWluIiwiY29uZmlnIiwiSldUX1NFQ1JFVCIsImlzQXV0aCIsInJlcSIsInJlcyIsIm5leHQiLCJiZWFyZXJUb2tlbiIsImhlYWRlcnMiLCJhdXRob3JpemF0aW9uIiwic3RhdHVzIiwic2VuZCIsIm1lc3NhZ2UiLCJ0b2tlbiIsInNsaWNlIiwibGVuZ3RoIiwidmVyaWZ5IiwiZXJyIiwiZGF0YSJdLCJzb3VyY2VSb290IjoiL1VzZXJzL3RoaWFnby9EZXYvd29ya3NwYWNlL0NhZHJlIENhcnRvbiBlLWNvbW1lcmNlL2JhY2tlbmQvIiwic291cmNlcyI6WyJ1dGlscy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgand0IGZyb20gXCJqc29ud2VidG9rZW5cIjtcbmltcG9ydCBjb25maWcgZnJvbSBcIi4vY29uZmlnXCI7XG5cbmV4cG9ydCBjb25zdCBnZW5lcmF0ZVRva2VuID0gKHVzZXIpID0+XG4gIGp3dC5zaWduKFxuICAgIHtcbiAgICAgIF9pZDogdXNlci5faWQsXG4gICAgICBuYW1lOiB1c2VyLm5hbWUsXG4gICAgICBlbWFpbDogdXNlci5lbWFpbCxcbiAgICAgIGlzQWRtaW46IHVzZXIuaXNBZG1pbixcbiAgICB9LFxuICAgIGNvbmZpZy5KV1RfU0VDUkVUXG4gICk7XG5cbmV4cG9ydCBjb25zdCBpc0F1dGggPSAocmVxLCByZXMsIG5leHQpID0+IHtcbiAgY29uc3QgYmVhcmVyVG9rZW4gPSByZXEuaGVhZGVycy5hdXRob3JpemF0aW9uO1xuICBpZiAoIWJlYXJlclRva2VuKSB7XG4gICAgcmVzLnN0YXR1cyg0MDEpLnNlbmQoeyBtZXNzYWdlOiBcIlRva2VuIGlzIG5vdCBzdXBwbGllZFwiIH0pO1xuICB9IGVsc2Uge1xuICAgIGNvbnN0IHRva2VuID0gYmVhcmVyVG9rZW4uc2xpY2UoNywgYmVhcmVyVG9rZW4ubGVuZ3RoKTtcbiAgICBqd3QudmVyaWZ5KHRva2VuLCBjb25maWcuSldUX1NFQ1JFVCwgKGVyciwgZGF0YSkgPT4ge1xuICAgICAgaWYgKGVycikge1xuICAgICAgICByZXMuc3RhdHVzKDQwMSkuc2VuZCh7IG1lc3NhZ2U6IFwiSW52YWxpZCBUb2tlblwiIH0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmVxLnVzZXIgPSBkYXRhO1xuICAgICAgICBuZXh0KCk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cbn07XG5cbmV4cG9ydCBjb25zdCBpc0FkbWluID0gKHJlcSwgcmVzLCBuZXh0KSA9PiB7XG4gIGlmIChyZXEudXNlciAmJiByZXEudXNlci5pc0FkbWluKSB7XG4gICAgbmV4dCgpO1xuICB9IGVsc2Uge1xuICAgIHJlcy5zdGF0dXMoNDAxKS5zZW5kKHsgbWVzc2FnZTogXCJUb2tlbiBpcyBub3QgdmFsaWQgZm9yIGFkbWluIHVzZXJcIiB9KTtcbiAgfVxufTtcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQUE7QUFDQTtBQUE4QjtBQUV2QixNQUFNQSxhQUFhLEdBQUlDLElBQUksSUFDaENDLHFCQUFHLENBQUNDLElBQUksQ0FDTjtFQUNFQyxHQUFHLEVBQUVILElBQUksQ0FBQ0csR0FBRztFQUNiQyxJQUFJLEVBQUVKLElBQUksQ0FBQ0ksSUFBSTtFQUNmQyxLQUFLLEVBQUVMLElBQUksQ0FBQ0ssS0FBSztFQUNqQkMsT0FBTyxFQUFFTixJQUFJLENBQUNNO0FBQ2hCLENBQUMsRUFDREMsZUFBTSxDQUFDQyxVQUFVLENBQ2xCO0FBQUM7QUFFRyxNQUFNQyxNQUFNLEdBQUcsQ0FBQ0MsR0FBRyxFQUFFQyxHQUFHLEVBQUVDLElBQUksS0FBSztFQUN4QyxNQUFNQyxXQUFXLEdBQUdILEdBQUcsQ0FBQ0ksT0FBTyxDQUFDQyxhQUFhO0VBQzdDLElBQUksQ0FBQ0YsV0FBVyxFQUFFO0lBQ2hCRixHQUFHLENBQUNLLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQ0MsSUFBSSxDQUFDO01BQUVDLE9BQU8sRUFBRTtJQUF3QixDQUFDLENBQUM7RUFDNUQsQ0FBQyxNQUFNO0lBQ0wsTUFBTUMsS0FBSyxHQUFHTixXQUFXLENBQUNPLEtBQUssQ0FBQyxDQUFDLEVBQUVQLFdBQVcsQ0FBQ1EsTUFBTSxDQUFDO0lBQ3REcEIscUJBQUcsQ0FBQ3FCLE1BQU0sQ0FBQ0gsS0FBSyxFQUFFWixlQUFNLENBQUNDLFVBQVUsRUFBRSxDQUFDZSxHQUFHLEVBQUVDLElBQUksS0FBSztNQUNsRCxJQUFJRCxHQUFHLEVBQUU7UUFDUFosR0FBRyxDQUFDSyxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUNDLElBQUksQ0FBQztVQUFFQyxPQUFPLEVBQUU7UUFBZ0IsQ0FBQyxDQUFDO01BQ3BELENBQUMsTUFBTTtRQUNMUixHQUFHLENBQUNWLElBQUksR0FBR3dCLElBQUk7UUFDZlosSUFBSSxFQUFFO01BQ1I7SUFDRixDQUFDLENBQUM7RUFDSjtBQUNGLENBQUM7QUFBQztBQUVLLE1BQU1OLE9BQU8sR0FBRyxDQUFDSSxHQUFHLEVBQUVDLEdBQUcsRUFBRUMsSUFBSSxLQUFLO0VBQ3pDLElBQUlGLEdBQUcsQ0FBQ1YsSUFBSSxJQUFJVSxHQUFHLENBQUNWLElBQUksQ0FBQ00sT0FBTyxFQUFFO0lBQ2hDTSxJQUFJLEVBQUU7RUFDUixDQUFDLE1BQU07SUFDTEQsR0FBRyxDQUFDSyxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUNDLElBQUksQ0FBQztNQUFFQyxPQUFPLEVBQUU7SUFBb0MsQ0FBQyxDQUFDO0VBQ3hFO0FBQ0YsQ0FBQztBQUFDIn0=","map":{"version":3,"names":["generateToken","user","jwt","sign","_id","name","email","isAdmin","config","JWT_SECRET","isAuth","req","res","next","bearerToken","headers","authorization","status","send","message","token","slice","length","verify","err","data"],"sourceRoot":"/Users/thiago/Dev/workspace/Cadre Carton e-commerce/backend/","sources":["utils.js"],"sourcesContent":["import jwt from \"jsonwebtoken\";\nimport config from \"./config\";\n\nexport const generateToken = (user) =>\n  jwt.sign(\n    {\n      _id: user._id,\n      name: user.name,\n      email: user.email,\n      isAdmin: user.isAdmin,\n    },\n    config.JWT_SECRET\n  );\n\nexport const isAuth = (req, res, next) => {\n  const bearerToken = req.headers.authorization;\n  if (!bearerToken) {\n    res.status(401).send({ message: \"Token is not supplied\" });\n  } else {\n    const token = bearerToken.slice(7, bearerToken.length);\n    jwt.verify(token, config.JWT_SECRET, (err, data) => {\n      if (err) {\n        res.status(401).send({ message: \"Invalid Token\" });\n      } else {\n        req.user = data;\n        next();\n      }\n    });\n  }\n};\n\nexport const isAdmin = (req, res, next) => {\n  if (req.user && req.user.isAdmin) {\n    next();\n  } else {\n    res.status(401).send({ message: \"Token is not valid for admin user\" });\n  }\n};\n"],"mappings":";;;;;;AAAA;AACA;AAA8B;AAEvB,MAAMA,aAAa,GAAIC,IAAI,IAChCC,qBAAG,CAACC,IAAI,CACN;EACEC,GAAG,EAAEH,IAAI,CAACG,GAAG;EACbC,IAAI,EAAEJ,IAAI,CAACI,IAAI;EACfC,KAAK,EAAEL,IAAI,CAACK,KAAK;EACjBC,OAAO,EAAEN,IAAI,CAACM;AAChB,CAAC,EACDC,eAAM,CAACC,UAAU,CAClB;AAAC;AAEG,MAAMC,MAAM,GAAG,CAACC,GAAG,EAAEC,GAAG,EAAEC,IAAI,KAAK;EACxC,MAAMC,WAAW,GAAGH,GAAG,CAACI,OAAO,CAACC,aAAa;EAC7C,IAAI,CAACF,WAAW,EAAE;IAChBF,GAAG,CAACK,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;MAAEC,OAAO,EAAE;IAAwB,CAAC,CAAC;EAC5D,CAAC,MAAM;IACL,MAAMC,KAAK,GAAGN,WAAW,CAACO,KAAK,CAAC,CAAC,EAAEP,WAAW,CAACQ,MAAM,CAAC;IACtDpB,qBAAG,CAACqB,MAAM,CAACH,KAAK,EAAEZ,eAAM,CAACC,UAAU,EAAE,CAACe,GAAG,EAAEC,IAAI,KAAK;MAClD,IAAID,GAAG,EAAE;QACPZ,GAAG,CAACK,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;UAAEC,OAAO,EAAE;QAAgB,CAAC,CAAC;MACpD,CAAC,MAAM;QACLR,GAAG,CAACV,IAAI,GAAGwB,IAAI;QACfZ,IAAI,EAAE;MACR;IACF,CAAC,CAAC;EACJ;AACF,CAAC;AAAC;AAEK,MAAMN,OAAO,GAAG,CAACI,GAAG,EAAEC,GAAG,EAAEC,IAAI,KAAK;EACzC,IAAIF,GAAG,CAACV,IAAI,IAAIU,GAAG,CAACV,IAAI,CAACM,OAAO,EAAE;IAChCM,IAAI,EAAE;EACR,CAAC,MAAM;IACLD,GAAG,CAACK,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;MAAEC,OAAO,EAAE;IAAoC,CAAC,CAAC;EACxE;AACF,CAAC;AAAC"}},"mtime":1669799168998},"{\"assumptions\":{},\"sourceRoot\":\"/Users/thiago/Dev/workspace/Cadre Carton e-commerce/backend/routers/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/thiago/Dev/workspace/Cadre Carton e-commerce\",\"filename\":\"/Users/thiago/Dev/workspace/Cadre Carton e-commerce/backend/routers/orderRouter.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/thiago/Dev/workspace/Cadre Carton e-commerce\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.19.6:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _express = _interopRequireDefault(require(\"express\"));\nvar _expressAsyncHandler = _interopRequireDefault(require(\"express-async-handler\"));\nvar _utils = require(\"../utils\");\nvar _orderModel = _interopRequireDefault(require(\"../models/orderModel\"));\nvar _userModel = _interopRequireDefault(require(\"../models/userModel\"));\nvar _productModel = _interopRequireDefault(require(\"../models/productModel\"));\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\nconst orderRouter = _express.default.Router();\norderRouter.get('/summary', _utils.isAuth, _utils.isAdmin, (0, _expressAsyncHandler.default)(async (req, res) => {\n  const orders = await _orderModel.default.aggregate([{\n    $group: {\n      _id: null,\n      numOrders: {\n        $sum: 1\n      },\n      totalSales: {\n        $sum: '$totalPrice'\n      }\n    }\n  }]);\n  const users = await _userModel.default.aggregate([{\n    $group: {\n      _id: null,\n      numUsers: {\n        $sum: 1\n      }\n    }\n  }]);\n  const dailyOrders = await _orderModel.default.aggregate([{\n    $group: {\n      _id: {\n        $dateToString: {\n          format: '%Y-%m-%d',\n          date: '$createdAt'\n        }\n      },\n      orders: {\n        $sum: 1\n      },\n      sales: {\n        $sum: '$totalPrice'\n      }\n    }\n  }]);\n  const productCategories = await _productModel.default.aggregate([{\n    $group: {\n      _id: '$category',\n      count: {\n        $sum: 1\n      }\n    }\n  }]);\n  res.send({\n    users,\n    orders: orders.length === 0 ? [{\n      numOrders: 0,\n      totalSales: 0\n    }] : orders,\n    dailyOrders,\n    productCategories\n  });\n}));\norderRouter.get('/', _utils.isAuth, _utils.isAdmin, (0, _expressAsyncHandler.default)(async (req, res) => {\n  const orders = await _orderModel.default.find({}).populate('user');\n  res.send(orders);\n}));\norderRouter.get('/mine', _utils.isAuth, (0, _expressAsyncHandler.default)(async (req, res) => {\n  const orders = await _orderModel.default.find({\n    user: req.user._id\n  });\n  res.send(orders);\n}));\norderRouter.get('/:id', _utils.isAuth, (0, _expressAsyncHandler.default)(async (req, res) => {\n  const order = await _orderModel.default.findById(req.params.id);\n  if (order) {\n    res.send(order);\n  } else {\n    res.status(404).send({\n      message: 'Commande introuvable.'\n    });\n  }\n}));\norderRouter.post('/', _utils.isAuth, (0, _expressAsyncHandler.default)(async (req, res) => {\n  const order = new _orderModel.default({\n    orderItems: req.body.orderItems,\n    user: req.user._id,\n    shipping: req.body.shipping,\n    payment: req.body.payment,\n    itemsPrice: req.body.itemsPrice,\n    taxPrice: req.body.taxPrice,\n    shippingPrice: req.body.shippingPrice,\n    totalPrice: req.body.totalPrice\n  });\n  const createdOrder = await order.save();\n  res.status(201).send({\n    message: 'Nouvelle commande créée',\n    order: createdOrder\n  });\n}));\norderRouter.delete('/:id', _utils.isAuth, _utils.isAdmin, (0, _expressAsyncHandler.default)(async (req, res) => {\n  const order = await _orderModel.default.findById(req.params.id);\n  if (order) {\n    const deletedOrder = await order.remove();\n    res.send({\n      message: 'Order Deleted',\n      product: deletedOrder\n    });\n  } else {\n    res.status(404).send({\n      message: 'Order Not Found'\n    });\n  }\n}));\norderRouter.put('/:id/pay', _utils.isAuth, (0, _expressAsyncHandler.default)(async (req, res) => {\n  const order = await _orderModel.default.findById(req.params.id);\n  if (order) {\n    order.isPaid = true;\n    order.paidAt = Date.now();\n    order.payment.paymentResult = {\n      payerID: req.body.payerID,\n      paymentID: req.body.paymentID,\n      orderID: req.body.orderID\n    };\n    const updatedOrder = await order.save();\n    res.send({\n      message: 'Order Paid',\n      order: updatedOrder\n    });\n  } else {\n    res.status(404).send({\n      message: 'Order Not Found.'\n    });\n  }\n}));\norderRouter.put('/:id/deliver', _utils.isAuth, (0, _expressAsyncHandler.default)(async (req, res) => {\n  const order = await _orderModel.default.findById(req.params.id);\n  if (order) {\n    order.isDelivered = true;\n    order.deliveredAt = Date.now();\n    const updatedOrder = await order.save();\n    res.send({\n      message: 'Order Delivered',\n      order: updatedOrder\n    });\n  } else {\n    res.status(404).send({\n      message: 'Order Not Found.'\n    });\n  }\n}));\nvar _default = orderRouter;\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJvcmRlclJvdXRlciIsImV4cHJlc3MiLCJSb3V0ZXIiLCJnZXQiLCJpc0F1dGgiLCJpc0FkbWluIiwiZXhwcmVzc0FzeW5jSGFuZGxlciIsInJlcSIsInJlcyIsIm9yZGVycyIsIk9yZGVyIiwiYWdncmVnYXRlIiwiJGdyb3VwIiwiX2lkIiwibnVtT3JkZXJzIiwiJHN1bSIsInRvdGFsU2FsZXMiLCJ1c2VycyIsIlVzZXIiLCJudW1Vc2VycyIsImRhaWx5T3JkZXJzIiwiJGRhdGVUb1N0cmluZyIsImZvcm1hdCIsImRhdGUiLCJzYWxlcyIsInByb2R1Y3RDYXRlZ29yaWVzIiwiUHJvZHVjdCIsImNvdW50Iiwic2VuZCIsImxlbmd0aCIsImZpbmQiLCJwb3B1bGF0ZSIsInVzZXIiLCJvcmRlciIsImZpbmRCeUlkIiwicGFyYW1zIiwiaWQiLCJzdGF0dXMiLCJtZXNzYWdlIiwicG9zdCIsIm9yZGVySXRlbXMiLCJib2R5Iiwic2hpcHBpbmciLCJwYXltZW50IiwiaXRlbXNQcmljZSIsInRheFByaWNlIiwic2hpcHBpbmdQcmljZSIsInRvdGFsUHJpY2UiLCJjcmVhdGVkT3JkZXIiLCJzYXZlIiwiZGVsZXRlIiwiZGVsZXRlZE9yZGVyIiwicmVtb3ZlIiwicHJvZHVjdCIsInB1dCIsImlzUGFpZCIsInBhaWRBdCIsIkRhdGUiLCJub3ciLCJwYXltZW50UmVzdWx0IiwicGF5ZXJJRCIsInBheW1lbnRJRCIsIm9yZGVySUQiLCJ1cGRhdGVkT3JkZXIiLCJpc0RlbGl2ZXJlZCIsImRlbGl2ZXJlZEF0Il0sInNvdXJjZVJvb3QiOiIvVXNlcnMvdGhpYWdvL0Rldi93b3Jrc3BhY2UvQ2FkcmUgQ2FydG9uIGUtY29tbWVyY2UvYmFja2VuZC9yb3V0ZXJzLyIsInNvdXJjZXMiOlsib3JkZXJSb3V0ZXIuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGV4cHJlc3MgZnJvbSAnZXhwcmVzcyc7XG5pbXBvcnQgZXhwcmVzc0FzeW5jSGFuZGxlciBmcm9tICdleHByZXNzLWFzeW5jLWhhbmRsZXInO1xuaW1wb3J0IHsgaXNBdXRoLCBpc0FkbWluIH0gZnJvbSAnLi4vdXRpbHMnO1xuaW1wb3J0IE9yZGVyIGZyb20gJy4uL21vZGVscy9vcmRlck1vZGVsJztcbmltcG9ydCBVc2VyIGZyb20gJy4uL21vZGVscy91c2VyTW9kZWwnO1xuaW1wb3J0IFByb2R1Y3QgZnJvbSAnLi4vbW9kZWxzL3Byb2R1Y3RNb2RlbCc7XG5cblxuY29uc3Qgb3JkZXJSb3V0ZXIgPSBleHByZXNzLlJvdXRlcigpO1xuXG5vcmRlclJvdXRlci5nZXQoXG4gICcvc3VtbWFyeScsXG4gIGlzQXV0aCxcbiAgaXNBZG1pbixcbiAgZXhwcmVzc0FzeW5jSGFuZGxlcihhc3luYyAocmVxLCByZXMpID0+IHtcbiAgICBjb25zdCBvcmRlcnMgPSBhd2FpdCBPcmRlci5hZ2dyZWdhdGUoW1xuICAgICAge1xuICAgICAgICAkZ3JvdXA6IHtcbiAgICAgICAgICBfaWQ6IG51bGwsXG4gICAgICAgICAgbnVtT3JkZXJzOiB7ICRzdW06IDEgfSxcbiAgICAgICAgICB0b3RhbFNhbGVzOiB7ICRzdW06ICckdG90YWxQcmljZScgfSxcbiAgICAgICAgfSxcbiAgICAgIH0sXG4gICAgXSk7XG4gICAgY29uc3QgdXNlcnMgPSBhd2FpdCBVc2VyLmFnZ3JlZ2F0ZShbXG4gICAgICB7XG4gICAgICAgICRncm91cDoge1xuICAgICAgICAgIF9pZDogbnVsbCxcbiAgICAgICAgICBudW1Vc2VyczogeyAkc3VtOiAxIH0sXG4gICAgICAgIH0sXG4gICAgICB9LFxuICAgIF0pO1xuICAgIGNvbnN0IGRhaWx5T3JkZXJzID0gYXdhaXQgT3JkZXIuYWdncmVnYXRlKFtcbiAgICAgIHtcbiAgICAgICAgJGdyb3VwOiB7XG4gICAgICAgICAgX2lkOiB7ICRkYXRlVG9TdHJpbmc6IHsgZm9ybWF0OiAnJVktJW0tJWQnLCBkYXRlOiAnJGNyZWF0ZWRBdCcgfSB9LFxuICAgICAgICAgIG9yZGVyczogeyAkc3VtOiAxIH0sXG4gICAgICAgICAgc2FsZXM6IHsgJHN1bTogJyR0b3RhbFByaWNlJyB9LFxuICAgICAgICB9LFxuICAgICAgfSxcbiAgICBdKTtcbiAgICBjb25zdCBwcm9kdWN0Q2F0ZWdvcmllcyA9IGF3YWl0IFByb2R1Y3QuYWdncmVnYXRlKFtcbiAgICAgIHtcbiAgICAgICAgJGdyb3VwOiB7XG4gICAgICAgICAgX2lkOiAnJGNhdGVnb3J5JyxcbiAgICAgICAgICBjb3VudDogeyAkc3VtOiAxIH0sXG4gICAgICAgIH0sXG4gICAgICB9LFxuICAgIF0pO1xuICAgIHJlcy5zZW5kKHtcbiAgICAgIHVzZXJzLFxuICAgICAgb3JkZXJzOiBvcmRlcnMubGVuZ3RoID09PSAwID8gW3sgbnVtT3JkZXJzOiAwLCB0b3RhbFNhbGVzOiAwIH1dIDogb3JkZXJzLFxuICAgICAgZGFpbHlPcmRlcnMsXG4gICAgICBwcm9kdWN0Q2F0ZWdvcmllcyxcbiAgICB9KTtcbiAgfSlcbik7XG5cbm9yZGVyUm91dGVyLmdldChcbiAgJy8nLFxuICBpc0F1dGgsXG4gIGlzQWRtaW4sXG4gIGV4cHJlc3NBc3luY0hhbmRsZXIoYXN5bmMgKHJlcSwgcmVzKSA9PiB7XG4gICAgY29uc3Qgb3JkZXJzID0gYXdhaXQgT3JkZXIuZmluZCh7fSkucG9wdWxhdGUoJ3VzZXInKTtcbiAgICByZXMuc2VuZChvcmRlcnMpO1xuICB9KVxuKTtcblxub3JkZXJSb3V0ZXIuZ2V0KFxuICAnL21pbmUnLFxuICBpc0F1dGgsXG4gIGV4cHJlc3NBc3luY0hhbmRsZXIoYXN5bmMgKHJlcSwgcmVzKSA9PiB7XG4gICAgY29uc3Qgb3JkZXJzID0gYXdhaXQgT3JkZXIuZmluZCh7IHVzZXI6IHJlcS51c2VyLl9pZCB9KTtcbiAgICByZXMuc2VuZChvcmRlcnMpO1xuICB9KVxuKVxuXG5vcmRlclJvdXRlci5nZXQoXG4gICcvOmlkJyxcbiAgaXNBdXRoLFxuICBleHByZXNzQXN5bmNIYW5kbGVyKGFzeW5jIChyZXEsIHJlcykgPT4ge1xuICAgIGNvbnN0IG9yZGVyID0gYXdhaXQgT3JkZXIuZmluZEJ5SWQocmVxLnBhcmFtcy5pZCk7XG4gICAgaWYgKG9yZGVyKSB7XG4gICAgICByZXMuc2VuZChvcmRlcik7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJlcy5zdGF0dXMoNDA0KS5zZW5kKHsgbWVzc2FnZTogJ0NvbW1hbmRlIGludHJvdXZhYmxlLicgfSk7XG4gICAgfVxuICB9KVxuKTtcblxub3JkZXJSb3V0ZXIucG9zdChcbiAgJy8nLFxuICBpc0F1dGgsXG4gIGV4cHJlc3NBc3luY0hhbmRsZXIoYXN5bmMgKHJlcSwgcmVzKSA9PiB7XG4gICAgY29uc3Qgb3JkZXIgPSBuZXcgT3JkZXIoe1xuICAgICAgb3JkZXJJdGVtczogcmVxLmJvZHkub3JkZXJJdGVtcyxcbiAgICAgIHVzZXI6IHJlcS51c2VyLl9pZCxcbiAgICAgIHNoaXBwaW5nOiByZXEuYm9keS5zaGlwcGluZyxcbiAgICAgIHBheW1lbnQ6IHJlcS5ib2R5LnBheW1lbnQsXG4gICAgICBpdGVtc1ByaWNlOiByZXEuYm9keS5pdGVtc1ByaWNlLFxuICAgICAgdGF4UHJpY2U6IHJlcS5ib2R5LnRheFByaWNlLFxuICAgICAgc2hpcHBpbmdQcmljZTogcmVxLmJvZHkuc2hpcHBpbmdQcmljZSxcbiAgICAgIHRvdGFsUHJpY2U6IHJlcS5ib2R5LnRvdGFsUHJpY2UsXG4gICAgfSk7XG4gICAgY29uc3QgY3JlYXRlZE9yZGVyID0gYXdhaXQgb3JkZXIuc2F2ZSgpO1xuICAgIHJlcy5zdGF0dXMoMjAxKS5zZW5kKHsgbWVzc2FnZTogJ05vdXZlbGxlIGNvbW1hbmRlIGNyw6nDqWUnLCBvcmRlcjogY3JlYXRlZE9yZGVyIH0pO1xuICB9KVxuKTtcblxub3JkZXJSb3V0ZXIuZGVsZXRlKFxuICAnLzppZCcsXG4gIGlzQXV0aCxcbiAgaXNBZG1pbixcbiAgZXhwcmVzc0FzeW5jSGFuZGxlcihhc3luYyAocmVxLCByZXMpID0+IHtcbiAgICBjb25zdCBvcmRlciA9IGF3YWl0IE9yZGVyLmZpbmRCeUlkKHJlcS5wYXJhbXMuaWQpO1xuICAgIGlmIChvcmRlcikge1xuICAgICAgY29uc3QgZGVsZXRlZE9yZGVyID0gYXdhaXQgb3JkZXIucmVtb3ZlKCk7XG4gICAgICByZXMuc2VuZCh7IG1lc3NhZ2U6ICdPcmRlciBEZWxldGVkJywgcHJvZHVjdDogZGVsZXRlZE9yZGVyIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXMuc3RhdHVzKDQwNCkuc2VuZCh7IG1lc3NhZ2U6ICdPcmRlciBOb3QgRm91bmQnIH0pO1xuICAgIH1cbiAgfSlcbik7XG5cbm9yZGVyUm91dGVyLnB1dChcbiAgJy86aWQvcGF5JyxcbiAgaXNBdXRoLFxuICBleHByZXNzQXN5bmNIYW5kbGVyKGFzeW5jIChyZXEsIHJlcykgPT4ge1xuICAgIGNvbnN0IG9yZGVyID0gYXdhaXQgT3JkZXIuZmluZEJ5SWQocmVxLnBhcmFtcy5pZCk7XG4gICAgaWYgKG9yZGVyKSB7XG4gICAgICBvcmRlci5pc1BhaWQgPSB0cnVlO1xuICAgICAgb3JkZXIucGFpZEF0ID0gRGF0ZS5ub3coKTtcbiAgICAgIG9yZGVyLnBheW1lbnQucGF5bWVudFJlc3VsdCA9IHtcbiAgICAgICAgcGF5ZXJJRDogcmVxLmJvZHkucGF5ZXJJRCxcbiAgICAgICAgcGF5bWVudElEOiByZXEuYm9keS5wYXltZW50SUQsXG4gICAgICAgIG9yZGVySUQ6IHJlcS5ib2R5Lm9yZGVySUQsXG4gICAgICB9O1xuICAgICAgY29uc3QgdXBkYXRlZE9yZGVyID0gYXdhaXQgb3JkZXIuc2F2ZSgpO1xuICAgICAgcmVzLnNlbmQoeyBtZXNzYWdlOiAnT3JkZXIgUGFpZCcsIG9yZGVyOiB1cGRhdGVkT3JkZXIgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJlcy5zdGF0dXMoNDA0KS5zZW5kKHsgbWVzc2FnZTogJ09yZGVyIE5vdCBGb3VuZC4nIH0pO1xuICAgIH1cbiAgfSlcbik7XG5cbm9yZGVyUm91dGVyLnB1dChcbiAgJy86aWQvZGVsaXZlcicsXG4gIGlzQXV0aCxcbiAgZXhwcmVzc0FzeW5jSGFuZGxlcihhc3luYyAocmVxLCByZXMpID0+IHtcbiAgICBjb25zdCBvcmRlciA9IGF3YWl0IE9yZGVyLmZpbmRCeUlkKHJlcS5wYXJhbXMuaWQpO1xuICAgIGlmIChvcmRlcikge1xuICAgICAgb3JkZXIuaXNEZWxpdmVyZWQgPSB0cnVlO1xuICAgICAgb3JkZXIuZGVsaXZlcmVkQXQgPSBEYXRlLm5vdygpO1xuICAgICAgY29uc3QgdXBkYXRlZE9yZGVyID0gYXdhaXQgb3JkZXIuc2F2ZSgpO1xuICAgICAgcmVzLnNlbmQoeyBtZXNzYWdlOiAnT3JkZXIgRGVsaXZlcmVkJywgb3JkZXI6IHVwZGF0ZWRPcmRlciB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmVzLnN0YXR1cyg0MDQpLnNlbmQoeyBtZXNzYWdlOiAnT3JkZXIgTm90IEZvdW5kLicgfSk7XG4gICAgfVxuICB9KVxuKTtcblxuZXhwb3J0IGRlZmF1bHQgb3JkZXJSb3V0ZXI7XG4iXSwibWFwcGluZ3MiOiI7Ozs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUE2QztBQUc3QyxNQUFNQSxXQUFXLEdBQUdDLGdCQUFPLENBQUNDLE1BQU0sRUFBRTtBQUVwQ0YsV0FBVyxDQUFDRyxHQUFHLENBQ2IsVUFBVSxFQUNWQyxhQUFNLEVBQ05DLGNBQU8sRUFDUCxJQUFBQyw0QkFBbUIsRUFBQyxPQUFPQyxHQUFHLEVBQUVDLEdBQUcsS0FBSztFQUN0QyxNQUFNQyxNQUFNLEdBQUcsTUFBTUMsbUJBQUssQ0FBQ0MsU0FBUyxDQUFDLENBQ25DO0lBQ0VDLE1BQU0sRUFBRTtNQUNOQyxHQUFHLEVBQUUsSUFBSTtNQUNUQyxTQUFTLEVBQUU7UUFBRUMsSUFBSSxFQUFFO01BQUUsQ0FBQztNQUN0QkMsVUFBVSxFQUFFO1FBQUVELElBQUksRUFBRTtNQUFjO0lBQ3BDO0VBQ0YsQ0FBQyxDQUNGLENBQUM7RUFDRixNQUFNRSxLQUFLLEdBQUcsTUFBTUMsa0JBQUksQ0FBQ1AsU0FBUyxDQUFDLENBQ2pDO0lBQ0VDLE1BQU0sRUFBRTtNQUNOQyxHQUFHLEVBQUUs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","map":{"version":3,"names":["orderRouter","express","Router","get","isAuth","isAdmin","expressAsyncHandler","req","res","orders","Order","aggregate","$group","_id","numOrders","$sum","totalSales","users","User","numUsers","dailyOrders","$dateToString","format","date","sales","productCategories","Product","count","send","length","find","populate","user","order","findById","params","id","status","message","post","orderItems","body","shipping","payment","itemsPrice","taxPrice","shippingPrice","totalPrice","createdOrder","save","delete","deletedOrder","remove","product","put","isPaid","paidAt","Date","now","paymentResult","payerID","paymentID","orderID","updatedOrder","isDelivered","deliveredAt"],"sourceRoot":"/Users/thiago/Dev/workspace/Cadre Carton e-commerce/backend/routers/","sources":["orderRouter.js"],"sourcesContent":["import express from 'express';\nimport expressAsyncHandler from 'express-async-handler';\nimport { isAuth, isAdmin } from '../utils';\nimport Order from '../models/orderModel';\nimport User from '../models/userModel';\nimport Product from '../models/productModel';\n\n\nconst orderRouter = express.Router();\n\norderRouter.get(\n  '/summary',\n  isAuth,\n  isAdmin,\n  expressAsyncHandler(async (req, res) => {\n    const orders = await Order.aggregate([\n      {\n        $group: {\n          _id: null,\n          numOrders: { $sum: 1 },\n          totalSales: { $sum: '$totalPrice' },\n        },\n      },\n    ]);\n    const users = await User.aggregate([\n      {\n        $group: {\n          _id: null,\n          numUsers: { $sum: 1 },\n        },\n      },\n    ]);\n    const dailyOrders = await Order.aggregate([\n      {\n        $group: {\n          _id: { $dateToString: { format: '%Y-%m-%d', date: '$createdAt' } },\n          orders: { $sum: 1 },\n          sales: { $sum: '$totalPrice' },\n        },\n      },\n    ]);\n    const productCategories = await Product.aggregate([\n      {\n        $group: {\n          _id: '$category',\n          count: { $sum: 1 },\n        },\n      },\n    ]);\n    res.send({\n      users,\n      orders: orders.length === 0 ? [{ numOrders: 0, totalSales: 0 }] : orders,\n      dailyOrders,\n      productCategories,\n    });\n  })\n);\n\norderRouter.get(\n  '/',\n  isAuth,\n  isAdmin,\n  expressAsyncHandler(async (req, res) => {\n    const orders = await Order.find({}).populate('user');\n    res.send(orders);\n  })\n);\n\norderRouter.get(\n  '/mine',\n  isAuth,\n  expressAsyncHandler(async (req, res) => {\n    const orders = await Order.find({ user: req.user._id });\n    res.send(orders);\n  })\n)\n\norderRouter.get(\n  '/:id',\n  isAuth,\n  expressAsyncHandler(async (req, res) => {\n    const order = await Order.findById(req.params.id);\n    if (order) {\n      res.send(order);\n    } else {\n      res.status(404).send({ message: 'Commande introuvable.' });\n    }\n  })\n);\n\norderRouter.post(\n  '/',\n  isAuth,\n  expressAsyncHandler(async (req, res) => {\n    const order = new Order({\n      orderItems: req.body.orderItems,\n      user: req.user._id,\n      shipping: req.body.shipping,\n      payment: req.body.payment,\n      itemsPrice: req.body.itemsPrice,\n      taxPrice: req.body.taxPrice,\n      shippingPrice: req.body.shippingPrice,\n      totalPrice: req.body.totalPrice,\n    });\n    const createdOrder = await order.save();\n    res.status(201).send({ message: 'Nouvelle commande créée', order: createdOrder });\n  })\n);\n\norderRouter.delete(\n  '/:id',\n  isAuth,\n  isAdmin,\n  expressAsyncHandler(async (req, res) => {\n    const order = await Order.findById(req.params.id);\n    if (order) {\n      const deletedOrder = await order.remove();\n      res.send({ message: 'Order Deleted', product: deletedOrder });\n    } else {\n      res.status(404).send({ message: 'Order Not Found' });\n    }\n  })\n);\n\norderRouter.put(\n  '/:id/pay',\n  isAuth,\n  expressAsyncHandler(async (req, res) => {\n    const order = await Order.findById(req.params.id);\n    if (order) {\n      order.isPaid = true;\n      order.paidAt = Date.now();\n      order.payment.paymentResult = {\n        payerID: req.body.payerID,\n        paymentID: req.body.paymentID,\n        orderID: req.body.orderID,\n      };\n      const updatedOrder = await order.save();\n      res.send({ message: 'Order Paid', order: updatedOrder });\n    } else {\n      res.status(404).send({ message: 'Order Not Found.' });\n    }\n  })\n);\n\norderRouter.put(\n  '/:id/deliver',\n  isAuth,\n  expressAsyncHandler(async (req, res) => {\n    const order = await Order.findById(req.params.id);\n    if (order) {\n      order.isDelivered = true;\n      order.deliveredAt = Date.now();\n      const updatedOrder = await order.save();\n      res.send({ message: 'Order Delivered', order: updatedOrder });\n    } else {\n      res.status(404).send({ message: 'Order Not Found.' });\n    }\n  })\n);\n\nexport default orderRouter;\n"],"mappings":"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"}},"mtime":1667805727007},"{\"assumptions\":{},\"sourceRoot\":\"/Users/thiago/Dev/workspace/Cadre Carton e-commerce/backend/models/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/thiago/Dev/workspace/Cadre Carton e-commerce\",\"filename\":\"/Users/thiago/Dev/workspace/Cadre Carton e-commerce/backend/models/orderModel.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/thiago/Dev/workspace/Cadre Carton e-commerce\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.19.6:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _mongoose = _interopRequireDefault(require(\"mongoose\"));\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\nconst orderSchema = new _mongoose.default.Schema({\n  orderItems: [{\n    name: {\n      type: String,\n      required: true\n    },\n    image: {\n      type: String,\n      required: true\n    },\n    price: {\n      type: Number,\n      required: true\n    },\n    qty: {\n      type: Number,\n      required: true\n    },\n    product: {\n      type: _mongoose.default.Schema.Types.ObjectId,\n      ref: 'Product',\n      required: true\n    }\n  }],\n  user: {\n    type: _mongoose.default.Schema.Types.ObjectId,\n    ref: 'User',\n    required: true\n  },\n  shipping: {\n    address: String,\n    city: String,\n    postalCode: String,\n    country: String\n  },\n  payment: {\n    paymentMethod: String,\n    paymentResult: {\n      orderID: String,\n      payerID: String,\n      paymentID: String\n    }\n  },\n  itemsPrice: Number,\n  taxPrice: Number,\n  shippingPrice: Number,\n  totalPrice: Number,\n  isPaid: {\n    type: Boolean,\n    required: true,\n    default: false\n  },\n  paidAt: Date,\n  isDelivered: {\n    type: Boolean,\n    required: true,\n    default: false\n  },\n  deliveredAt: Date\n}, {\n  timestamps: true\n});\nconst Order = _mongoose.default.model('Order', orderSchema);\nvar _default = Order;\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJvcmRlclNjaGVtYSIsIm1vbmdvb3NlIiwiU2NoZW1hIiwib3JkZXJJdGVtcyIsIm5hbWUiLCJ0eXBlIiwiU3RyaW5nIiwicmVxdWlyZWQiLCJpbWFnZSIsInByaWNlIiwiTnVtYmVyIiwicXR5IiwicHJvZHVjdCIsIlR5cGVzIiwiT2JqZWN0SWQiLCJyZWYiLCJ1c2VyIiwic2hpcHBpbmciLCJhZGRyZXNzIiwiY2l0eSIsInBvc3RhbENvZGUiLCJjb3VudHJ5IiwicGF5bWVudCIsInBheW1lbnRNZXRob2QiLCJwYXltZW50UmVzdWx0Iiwib3JkZXJJRCIsInBheWVySUQiLCJwYXltZW50SUQiLCJpdGVtc1ByaWNlIiwidGF4UHJpY2UiLCJzaGlwcGluZ1ByaWNlIiwidG90YWxQcmljZSIsImlzUGFpZCIsIkJvb2xlYW4iLCJkZWZhdWx0IiwicGFpZEF0IiwiRGF0ZSIsImlzRGVsaXZlcmVkIiwiZGVsaXZlcmVkQXQiLCJ0aW1lc3RhbXBzIiwiT3JkZXIiLCJtb2RlbCJdLCJzb3VyY2VSb290IjoiL1VzZXJzL3RoaWFnby9EZXYvd29ya3NwYWNlL0NhZHJlIENhcnRvbiBlLWNvbW1lcmNlL2JhY2tlbmQvbW9kZWxzLyIsInNvdXJjZXMiOlsib3JkZXJNb2RlbC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgbW9uZ29vc2UgZnJvbSAnbW9uZ29vc2UnO1xuXG5jb25zdCBvcmRlclNjaGVtYSA9IG5ldyBtb25nb29zZS5TY2hlbWEoXG4gIHtcbiAgICBvcmRlckl0ZW1zOiBbXG4gICAgICB7XG4gICAgICAgIG5hbWU6IHsgdHlwZTogU3RyaW5nLCByZXF1aXJlZDogdHJ1ZSB9LFxuICAgICAgICBpbWFnZTogeyB0eXBlOiBTdHJpbmcsIHJlcXVpcmVkOiB0cnVlIH0sXG4gICAgICAgIHByaWNlOiB7IHR5cGU6IE51bWJlciwgcmVxdWlyZWQ6IHRydWUgfSxcbiAgICAgICAgcXR5OiB7IHR5cGU6IE51bWJlciwgcmVxdWlyZWQ6IHRydWUgfSxcbiAgICAgICAgcHJvZHVjdDoge1xuICAgICAgICAgIHR5cGU6IG1vbmdvb3NlLlNjaGVtYS5UeXBlcy5PYmplY3RJZCxcbiAgICAgICAgICByZWY6ICdQcm9kdWN0JyxcbiAgICAgICAgICByZXF1aXJlZDogdHJ1ZSxcbiAgICAgICAgfSxcbiAgICAgIH0sXG4gICAgXSxcbiAgICB1c2VyOiB7IHR5cGU6IG1vbmdvb3NlLlNjaGVtYS5UeXBlcy5PYmplY3RJZCwgcmVmOiAnVXNlcicsIHJlcXVpcmVkOiB0cnVlIH0sXG4gICAgc2hpcHBpbmc6IHtcbiAgICAgIGFkZHJlc3M6IFN0cmluZyxcbiAgICAgIGNpdHk6IFN0cmluZyxcbiAgICAgIHBvc3RhbENvZGU6IFN0cmluZyxcbiAgICAgIGNvdW50cnk6IFN0cmluZyxcbiAgICB9LFxuICAgIHBheW1lbnQ6IHtcbiAgICAgIHBheW1lbnRNZXRob2Q6IFN0cmluZyxcbiAgICAgIHBheW1lbnRSZXN1bHQ6IHtcbiAgICAgICAgb3JkZXJJRDogU3RyaW5nLFxuICAgICAgICBwYXllcklEOiBTdHJpbmcsXG4gICAgICAgIHBheW1lbnRJRDogU3RyaW5nLFxuICAgICAgfSxcbiAgICB9LFxuICAgIGl0ZW1zUHJpY2U6IE51bWJlcixcbiAgICB0YXhQcmljZTogTnVtYmVyLFxuICAgIHNoaXBwaW5nUHJpY2U6IE51bWJlcixcbiAgICB0b3RhbFByaWNlOiBOdW1iZXIsXG4gICAgaXNQYWlkOiB7IHR5cGU6IEJvb2xlYW4sIHJlcXVpcmVkOiB0cnVlLCBkZWZhdWx0OiBmYWxzZSB9LFxuICAgIHBhaWRBdDogRGF0ZSxcbiAgICBpc0RlbGl2ZXJlZDogeyB0eXBlOiBCb29sZWFuLCByZXF1aXJlZDogdHJ1ZSwgZGVmYXVsdDogZmFsc2UgfSxcbiAgICBkZWxpdmVyZWRBdDogRGF0ZSxcbiAgfSxcbiAge1xuICAgIHRpbWVzdGFtcHM6IHRydWUsXG4gIH1cbik7XG5jb25zdCBPcmRlciA9IG1vbmdvb3NlLm1vZGVsKCdPcmRlcicsIG9yZGVyU2NoZW1hKTtcbmV4cG9ydCBkZWZhdWx0IE9yZGVyO1xuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7QUFBQTtBQUFnQztBQUVoQyxNQUFNQSxXQUFXLEdBQUcsSUFBSUMsaUJBQVEsQ0FBQ0MsTUFBTSxDQUNyQztFQUNFQyxVQUFVLEVBQUUsQ0FDVjtJQUNFQyxJQUFJLEVBQUU7TUFBRUMsSUFBSSxFQUFFQyxNQUFNO01BQUVDLFFBQVEsRUFBRTtJQUFLLENBQUM7SUFDdENDLEtBQUssRUFBRTtNQUFFSCxJQUFJLEVBQUVDLE1BQU07TUFBRUMsUUFBUSxFQUFFO0lBQUssQ0FBQztJQUN2Q0UsS0FBSyxFQUFFO01BQUVKLElBQUksRUFBRUssTUFBTTtNQUFFSCxRQUFRLEVBQUU7SUFBSyxDQUFDO0lBQ3ZDSSxHQUFHLEVBQUU7TUFBRU4sSUFBSSxFQUFFSyxNQUFNO01BQUVILFFBQVEsRUFBRTtJQUFLLENBQUM7SUFDckNLLE9BQU8sRUFBRTtNQUNQUCxJQUFJLEVBQUVKLGlCQUFRLENBQUNDLE1BQU0sQ0FBQ1csS0FBSyxDQUFDQyxRQUFRO01BQ3BDQyxHQUFHLEVBQUUsU0FBUztNQUNkUixRQUFRLEVBQUU7SUFDWjtFQUNGLENBQUMsQ0FDRjtFQUNEUyxJQUFJLEVBQUU7SUFBRVgsSUFBSSxFQUFFSixpQkFBUSxDQUFDQyxNQUFNLENBQUNXLEtBQUssQ0FBQ0MsUUFBUTtJQUFFQyxHQUFHLEVBQUUsTUFBTTtJQUFFUixRQUFRLEVBQUU7RUFBSyxDQUFDO0VBQzNFVSxRQUFRLEVBQUU7SUFDUkMsT0FBTyxFQUFFWixNQUFNO0lBQ2ZhLElBQUksRUFBRWIsTUFBTTtJQUNaYyxVQUFVLEVBQUVkLE1BQU07SUFDbEJlLE9BQU8sRUFBRWY7RUFDWCxDQUFDO0VBQ0RnQixPQUFPLEVBQUU7SUFDUEMsYUFBYSxFQUFFakIsTUFBTTtJQUNyQmtCLGFBQWEsRUFBRTtNQUNiQyxPQUFPLEVBQUVuQixNQUFNO01BQ2ZvQixPQUFPLEVBQUVwQixNQUFNO01BQ2ZxQixTQUFTLEVBQUVyQjtJQUNiO0VBQ0YsQ0FBQztFQUNEc0IsVUFBVSxFQUFFbEIsTUFBTTtFQUNsQm1CLFFBQVEsRUFBRW5CLE1BQU07RUFDaEJvQixhQUFhLEVBQUVwQixNQUFNO0VBQ3JCcUIsVUFBVSxFQUFFckIsTUFBTTtFQUNsQnNCLE1BQU0sRUFBRTtJQUFFM0IsSUFBSSxFQUFFNEIsT0FBTztJQUFFMUIsUUFBUSxFQUFFLElBQUk7SUFBRTJCLE9BQU8sRUFBRTtFQUFNLENBQUM7RUFDekRDLE1BQU0sRUFBRUMsSUFBSTtFQUNaQyxXQUFXLEVBQUU7SUFBRWhDLElBQUksRUFBRTRCLE9BQU87SUFBRTFCLFFBQVEsRUFBRSxJQUFJO0lBQUUyQixPQUFPLEVBQUU7RUFBTSxDQUFDO0VBQzlESSxXQUFXLEVBQUVGO0FBQ2YsQ0FBQyxFQUNEO0VBQ0VHLFVBQVUsRUFBRTtBQUNkLENBQUMsQ0FDRjtBQUNELE1BQU1DLEtBQUssR0FBR3ZDLGlCQUFRLENBQUN3QyxLQUFLLENBQUMsT0FBTyxFQUFFekMsV0FBVyxDQUFDO0FBQUMsZUFDcEN3QyxLQUFLO0FBQUEifQ==","map":{"version":3,"names":["orderSchema","mongoose","Schema","orderItems","name","type","String","required","image","price","Number","qty","product","Types","ObjectId","ref","user","shipping","address","city","postalCode","country","payment","paymentMethod","paymentResult","orderID","payerID","paymentID","itemsPrice","taxPrice","shippingPrice","totalPrice","isPaid","Boolean","default","paidAt","Date","isDelivered","deliveredAt","timestamps","Order","model"],"sourceRoot":"/Users/thiago/Dev/workspace/Cadre Carton e-commerce/backend/models/","sources":["orderModel.js"],"sourcesContent":["import mongoose from 'mongoose';\n\nconst orderSchema = new mongoose.Schema(\n  {\n    orderItems: [\n      {\n        name: { type: String, required: true },\n        image: { type: String, required: true },\n        price: { type: Number, required: true },\n        qty: { type: Number, required: true },\n        product: {\n          type: mongoose.Schema.Types.ObjectId,\n          ref: 'Product',\n          required: true,\n        },\n      },\n    ],\n    user: { type: mongoose.Schema.Types.ObjectId, ref: 'User', required: true },\n    shipping: {\n      address: String,\n      city: String,\n      postalCode: String,\n      country: String,\n    },\n    payment: {\n      paymentMethod: String,\n      paymentResult: {\n        orderID: String,\n        payerID: String,\n        paymentID: String,\n      },\n    },\n    itemsPrice: Number,\n    taxPrice: Number,\n    shippingPrice: Number,\n    totalPrice: Number,\n    isPaid: { type: Boolean, required: true, default: false },\n    paidAt: Date,\n    isDelivered: { type: Boolean, required: true, default: false },\n    deliveredAt: Date,\n  },\n  {\n    timestamps: true,\n  }\n);\nconst Order = mongoose.model('Order', orderSchema);\nexport default Order;\n"],"mappings":";;;;;;AAAA;AAAgC;AAEhC,MAAMA,WAAW,GAAG,IAAIC,iBAAQ,CAACC,MAAM,CACrC;EACEC,UAAU,EAAE,CACV;IACEC,IAAI,EAAE;MAAEC,IAAI,EAAEC,MAAM;MAAEC,QAAQ,EAAE;IAAK,CAAC;IACtCC,KAAK,EAAE;MAAEH,IAAI,EAAEC,MAAM;MAAEC,QAAQ,EAAE;IAAK,CAAC;IACvCE,KAAK,EAAE;MAAEJ,IAAI,EAAEK,MAAM;MAAEH,QAAQ,EAAE;IAAK,CAAC;IACvCI,GAAG,EAAE;MAAEN,IAAI,EAAEK,MAAM;MAAEH,QAAQ,EAAE;IAAK,CAAC;IACrCK,OAAO,EAAE;MACPP,IAAI,EAAEJ,iBAAQ,CAACC,MAAM,CAACW,KAAK,CAACC,QAAQ;MACpCC,GAAG,EAAE,SAAS;MACdR,QAAQ,EAAE;IACZ;EACF,CAAC,CACF;EACDS,IAAI,EAAE;IAAEX,IAAI,EAAEJ,iBAAQ,CAACC,MAAM,CAACW,KAAK,CAACC,QAAQ;IAAEC,GAAG,EAAE,MAAM;IAAER,QAAQ,EAAE;EAAK,CAAC;EAC3EU,QAAQ,EAAE;IACRC,OAAO,EAAEZ,MAAM;IACfa,IAAI,EAAEb,MAAM;IACZc,UAAU,EAAEd,MAAM;IAClBe,OAAO,EAAEf;EACX,CAAC;EACDgB,OAAO,EAAE;IACPC,aAAa,EAAEjB,MAAM;IACrBkB,aAAa,EAAE;MACbC,OAAO,EAAEnB,MAAM;MACfoB,OAAO,EAAEpB,MAAM;MACfqB,SAAS,EAAErB;IACb;EACF,CAAC;EACDsB,UAAU,EAAElB,MAAM;EAClBmB,QAAQ,EAAEnB,MAAM;EAChBoB,aAAa,EAAEpB,MAAM;EACrBqB,UAAU,EAAErB,MAAM;EAClBsB,MAAM,EAAE;IAAE3B,IAAI,EAAE4B,OAAO;IAAE1B,QAAQ,EAAE,IAAI;IAAE2B,OAAO,EAAE;EAAM,CAAC;EACzDC,MAAM,EAAEC,IAAI;EACZC,WAAW,EAAE;IAAEhC,IAAI,EAAE4B,OAAO;IAAE1B,QAAQ,EAAE,IAAI;IAAE2B,OAAO,EAAE;EAAM,CAAC;EAC9DI,WAAW,EAAEF;AACf,CAAC,EACD;EACEG,UAAU,EAAE;AACd,CAAC,CACF;AACD,MAAMC,KAAK,GAAGvC,iBAAQ,CAACwC,KAAK,CAAC,OAAO,EAAEzC,WAAW,CAAC;AAAC,eACpCwC,KAAK;AAAA"}},"mtime":1667544855960},"{\"assumptions\":{},\"sourceRoot\":\"/Users/thiago/Dev/workspace/Cadre Carton e-commerce/backend/models/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/thiago/Dev/workspace/Cadre Carton e-commerce\",\"filename\":\"/Users/thiago/Dev/workspace/Cadre Carton e-commerce/backend/models/productModel.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/thiago/Dev/workspace/Cadre Carton e-commerce\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.19.6:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _mongoose = _interopRequireDefault(require(\"mongoose\"));\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\nconst reviewSchema = new _mongoose.default.Schema({\n  user: {\n    type: _mongoose.default.Schema.Types.ObjectId,\n    ref: 'User',\n    required: true\n  },\n  name: {\n    type: String,\n    required: true\n  },\n  rating: {\n    type: Number,\n    required: true,\n    default: 0,\n    min: 0,\n    max: 5\n  },\n  comment: {\n    type: String,\n    required: true\n  }\n}, {\n  timestamps: true\n});\nconst productSchema = new _mongoose.default.Schema({\n  name: {\n    type: String,\n    required: true\n  },\n  description: {\n    type: String,\n    required: true\n  },\n  category: {\n    type: String,\n    required: true\n  },\n  brand: {\n    type: String,\n    required: true\n  },\n  image: {\n    type: String,\n    required: true\n  },\n  price: {\n    type: Number,\n    default: 0.0,\n    required: true\n  },\n  countInStock: {\n    type: Number,\n    default: 0,\n    required: true\n  },\n  rating: {\n    type: Number,\n    default: 0.0,\n    required: true\n  },\n  numReviews: {\n    type: Number,\n    default: 0,\n    required: true\n  },\n  reviews: [reviewSchema]\n}, {\n  timestamps: true\n});\nconst Product = _mongoose.default.model('Product', productSchema);\nvar _default = Product;\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJyZXZpZXdTY2hlbWEiLCJtb25nb29zZSIsIlNjaGVtYSIsInVzZXIiLCJ0eXBlIiwiVHlwZXMiLCJPYmplY3RJZCIsInJlZiIsInJlcXVpcmVkIiwibmFtZSIsIlN0cmluZyIsInJhdGluZyIsIk51bWJlciIsImRlZmF1bHQiLCJtaW4iLCJtYXgiLCJjb21tZW50IiwidGltZXN0YW1wcyIsInByb2R1Y3RTY2hlbWEiLCJkZXNjcmlwdGlvbiIsImNhdGVnb3J5IiwiYnJhbmQiLCJpbWFnZSIsInByaWNlIiwiY291bnRJblN0b2NrIiwibnVtUmV2aWV3cyIsInJldmlld3MiLCJQcm9kdWN0IiwibW9kZWwiXSwic291cmNlUm9vdCI6Ii9Vc2Vycy90aGlhZ28vRGV2L3dvcmtzcGFjZS9DYWRyZSBDYXJ0b24gZS1jb21tZXJjZS9iYWNrZW5kL21vZGVscy8iLCJzb3VyY2VzIjpbInByb2R1Y3RNb2RlbC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgbW9uZ29vc2UgZnJvbSAnbW9uZ29vc2UnO1xuXG5jb25zdCByZXZpZXdTY2hlbWEgPSBuZXcgbW9uZ29vc2UuU2NoZW1hKFxuICB7XG4gICAgdXNlcjogeyB0eXBlOiBtb25nb29zZS5TY2hlbWEuVHlwZXMuT2JqZWN0SWQsIHJlZjogJ1VzZXInLCByZXF1aXJlZDogdHJ1ZSB9LFxuICAgIG5hbWU6IHsgdHlwZTogU3RyaW5nLCByZXF1aXJlZDogdHJ1ZSB9LFxuICAgIHJhdGluZzoge1xuICAgICAgdHlwZTogTnVtYmVyLFxuICAgICAgcmVxdWlyZWQ6IHRydWUsXG4gICAgICBkZWZhdWx0OiAwLFxuICAgICAgbWluOiAwLFxuICAgICAgbWF4OiA1LFxuICAgIH0sXG4gICAgY29tbWVudDogeyB0eXBlOiBTdHJpbmcsIHJlcXVpcmVkOiB0cnVlIH0sXG4gIH0sXG4gIHsgdGltZXN0YW1wczogdHJ1ZSB9XG4pO1xuXG5jb25zdCBwcm9kdWN0U2NoZW1hID0gbmV3IG1vbmdvb3NlLlNjaGVtYShcbiAge1xuICAgIG5hbWU6IHsgdHlwZTogU3RyaW5nLCByZXF1aXJlZDogdHJ1ZSB9LFxuICAgIGRlc2NyaXB0aW9uOiB7IHR5cGU6IFN0cmluZywgcmVxdWlyZWQ6IHRydWUgfSxcbiAgICBjYXRlZ29yeTogeyB0eXBlOiBTdHJpbmcsIHJlcXVpcmVkOiB0cnVlIH0sXG4gICAgYnJhbmQ6IHsgdHlwZTogU3RyaW5nLCByZXF1aXJlZDogdHJ1ZSB9LFxuICAgIGltYWdlOiB7IHR5cGU6IFN0cmluZywgcmVxdWlyZWQ6IHRydWUgfSxcbiAgICBwcmljZTogeyB0eXBlOiBOdW1iZXIsIGRlZmF1bHQ6IDAuMCwgcmVxdWlyZWQ6IHRydWUgfSxcbiAgICBjb3VudEluU3RvY2s6IHsgdHlwZTogTnVtYmVyLCBkZWZhdWx0OiAwLCByZXF1aXJlZDogdHJ1ZSB9LFxuICAgIHJhdGluZzogeyB0eXBlOiBOdW1iZXIsIGRlZmF1bHQ6IDAuMCwgcmVxdWlyZWQ6IHRydWUgfSxcbiAgICBudW1SZXZpZXdzOiB7IHR5cGU6IE51bWJlciwgZGVmYXVsdDogMCwgcmVxdWlyZWQ6IHRydWUgfSxcbiAgICByZXZpZXdzOiBbcmV2aWV3U2NoZW1hXSxcbiAgfSxcbiAgeyB0aW1lc3RhbXBzOiB0cnVlIH1cbik7XG5jb25zdCBQcm9kdWN0ID0gbW9uZ29vc2UubW9kZWwoJ1Byb2R1Y3QnLCBwcm9kdWN0U2NoZW1hKTtcbmV4cG9ydCBkZWZhdWx0IFByb2R1Y3Q7XG4iXSwibWFwcGluZ3MiOiI7Ozs7OztBQUFBO0FBQWdDO0FBRWhDLE1BQU1BLFlBQVksR0FBRyxJQUFJQyxpQkFBUSxDQUFDQyxNQUFNLENBQ3RDO0VBQ0VDLElBQUksRUFBRTtJQUFFQyxJQUFJLEVBQUVILGlCQUFRLENBQUNDLE1BQU0sQ0FBQ0csS0FBSyxDQUFDQyxRQUFRO0lBQUVDLEdBQUcsRUFBRSxNQUFNO0lBQUVDLFFBQVEsRUFBRTtFQUFLLENBQUM7RUFDM0VDLElBQUksRUFBRTtJQUFFTCxJQUFJLEVBQUVNLE1BQU07SUFBRUYsUUFBUSxFQUFFO0VBQUssQ0FBQztFQUN0Q0csTUFBTSxFQUFFO0lBQ05QLElBQUksRUFBRVEsTUFBTTtJQUNaSixRQUFRLEVBQUUsSUFBSTtJQUNkSyxPQUFPLEVBQUUsQ0FBQztJQUNWQyxHQUFHLEVBQUUsQ0FBQztJQUNOQyxHQUFHLEVBQUU7RUFDUCxDQUFDO0VBQ0RDLE9BQU8sRUFBRTtJQUFFWixJQUFJLEVBQUVNLE1BQU07SUFBRUYsUUFBUSxFQUFFO0VBQUs7QUFDMUMsQ0FBQyxFQUNEO0VBQUVTLFVBQVUsRUFBRTtBQUFLLENBQUMsQ0FDckI7QUFFRCxNQUFNQyxhQUFhLEdBQUcsSUFBSWpCLGlCQUFRLENBQUNDLE1BQU0sQ0FDdkM7RUFDRU8sSUFBSSxFQUFFO0lBQUVMLElBQUksRUFBRU0sTUFBTTtJQUFFRixRQUFRLEVBQUU7RUFBSyxDQUFDO0VBQ3RDVyxXQUFXLEVBQUU7SUFBRWYsSUFBSSxFQUFFTSxNQUFNO0lBQUVGLFFBQVEsRUFBRTtFQUFLLENBQUM7RUFDN0NZLFFBQVEsRUFBRTtJQUFFaEIsSUFBSSxFQUFFTSxNQUFNO0lBQUVGLFFBQVEsRUFBRTtFQUFLLENBQUM7RUFDMUNhLEtBQUssRUFBRTtJQUFFakIsSUFBSSxFQUFFTSxNQUFNO0lBQUVGLFFBQVEsRUFBRTtFQUFLLENBQUM7RUFDdkNjLEtBQUssRUFBRTtJQUFFbEIsSUFBSSxFQUFFTSxNQUFNO0lBQUVGLFFBQVEsRUFBRTtFQUFLLENBQUM7RUFDdkNlLEtBQUssRUFBRTtJQUFFbkIsSUFBSSxFQUFFUSxNQUFNO0lBQUVDLE9BQU8sRUFBRSxHQUFHO0lBQUVMLFFBQVEsRUFBRTtFQUFLLENBQUM7RUFDckRnQixZQUFZLEVBQUU7SUFBRXBCLElBQUksRUFBRVEsTUFBTTtJQUFFQyxPQUFPLEVBQUUsQ0FBQztJQUFFTCxRQUFRLEVBQUU7RUFBSyxDQUFDO0VBQzFERyxNQUFNLEVBQUU7SUFBRVAsSUFBSSxFQUFFUSxNQUFNO0lBQUVDLE9BQU8sRUFBRSxHQUFHO0lBQUVMLFFBQVEsRUFBRTtFQUFLLENBQUM7RUFDdERpQixVQUFVLEVBQUU7SUFBRXJCLElBQUksRUFBRVEsTUFBTTtJQUFFQyxPQUFPLEVBQUUsQ0FBQztJQUFFTCxRQUFRLEVBQUU7RUFBSyxDQUFDO0VBQ3hEa0IsT0FBTyxFQUFFLENBQUMxQixZQUFZO0FBQ3hCLENBQUMsRUFDRDtFQUFFaUIsVUFBVSxFQUFFO0FBQUssQ0FBQyxDQUNyQjtBQUNELE1BQU1VLE9BQU8sR0FBRzFCLGlCQUFRLENBQUMyQixLQUFLLENBQUMsU0FBUyxFQUFFVixhQUFhLENBQUM7QUFBQyxlQUMxQ1MsT0FBTztBQUFBIn0=","map":{"version":3,"names":["reviewSchema","mongoose","Schema","user","type","Types","ObjectId","ref","required","name","String","rating","Number","default","min","max","comment","timestamps","productSchema","description","category","brand","image","price","countInStock","numReviews","reviews","Product","model"],"sourceRoot":"/Users/thiago/Dev/workspace/Cadre Carton e-commerce/backend/models/","sources":["productModel.js"],"sourcesContent":["import mongoose from 'mongoose';\n\nconst reviewSchema = new mongoose.Schema(\n  {\n    user: { type: mongoose.Schema.Types.ObjectId, ref: 'User', required: true },\n    name: { type: String, required: true },\n    rating: {\n      type: Number,\n      required: true,\n      default: 0,\n      min: 0,\n      max: 5,\n    },\n    comment: { type: String, required: true },\n  },\n  { timestamps: true }\n);\n\nconst productSchema = new mongoose.Schema(\n  {\n    name: { type: String, required: true },\n    description: { type: String, required: true },\n    category: { type: String, required: true },\n    brand: { type: String, required: true },\n    image: { type: String, required: true },\n    price: { type: Number, default: 0.0, required: true },\n    countInStock: { type: Number, default: 0, required: true },\n    rating: { type: Number, default: 0.0, required: true },\n    numReviews: { type: Number, default: 0, required: true },\n    reviews: [reviewSchema],\n  },\n  { timestamps: true }\n);\nconst Product = mongoose.model('Product', productSchema);\nexport default Product;\n"],"mappings":";;;;;;AAAA;AAAgC;AAEhC,MAAMA,YAAY,GAAG,IAAIC,iBAAQ,CAACC,MAAM,CACtC;EACEC,IAAI,EAAE;IAAEC,IAAI,EAAEH,iBAAQ,CAACC,MAAM,CAACG,KAAK,CAACC,QAAQ;IAAEC,GAAG,EAAE,MAAM;IAAEC,QAAQ,EAAE;EAAK,CAAC;EAC3EC,IAAI,EAAE;IAAEL,IAAI,EAAEM,MAAM;IAAEF,QAAQ,EAAE;EAAK,CAAC;EACtCG,MAAM,EAAE;IACNP,IAAI,EAAEQ,MAAM;IACZJ,QAAQ,EAAE,IAAI;IACdK,OAAO,EAAE,CAAC;IACVC,GAAG,EAAE,CAAC;IACNC,GAAG,EAAE;EACP,CAAC;EACDC,OAAO,EAAE;IAAEZ,IAAI,EAAEM,MAAM;IAAEF,QAAQ,EAAE;EAAK;AAC1C,CAAC,EACD;EAAES,UAAU,EAAE;AAAK,CAAC,CACrB;AAED,MAAMC,aAAa,GAAG,IAAIjB,iBAAQ,CAACC,MAAM,CACvC;EACEO,IAAI,EAAE;IAAEL,IAAI,EAAEM,MAAM;IAAEF,QAAQ,EAAE;EAAK,CAAC;EACtCW,WAAW,EAAE;IAAEf,IAAI,EAAEM,MAAM;IAAEF,QAAQ,EAAE;EAAK,CAAC;EAC7CY,QAAQ,EAAE;IAAEhB,IAAI,EAAEM,MAAM;IAAEF,QAAQ,EAAE;EAAK,CAAC;EAC1Ca,KAAK,EAAE;IAAEjB,IAAI,EAAEM,MAAM;IAAEF,QAAQ,EAAE;EAAK,CAAC;EACvCc,KAAK,EAAE;IAAElB,IAAI,EAAEM,MAAM;IAAEF,QAAQ,EAAE;EAAK,CAAC;EACvCe,KAAK,EAAE;IAAEnB,IAAI,EAAEQ,MAAM;IAAEC,OAAO,EAAE,GAAG;IAAEL,QAAQ,EAAE;EAAK,CAAC;EACrDgB,YAAY,EAAE;IAAEpB,IAAI,EAAEQ,MAAM;IAAEC,OAAO,EAAE,CAAC;IAAEL,QAAQ,EAAE;EAAK,CAAC;EAC1DG,MAAM,EAAE;IAAEP,IAAI,EAAEQ,MAAM;IAAEC,OAAO,EAAE,GAAG;IAAEL,QAAQ,EAAE;EAAK,CAAC;EACtDiB,UAAU,EAAE;IAAErB,IAAI,EAAEQ,MAAM;IAAEC,OAAO,EAAE,CAAC;IAAEL,QAAQ,EAAE;EAAK,CAAC;EACxDkB,OAAO,EAAE,CAAC1B,YAAY;AACxB,CAAC,EACD;EAAEiB,UAAU,EAAE;AAAK,CAAC,CACrB;AACD,MAAMU,OAAO,GAAG1B,iBAAQ,CAAC2B,KAAK,CAAC,SAAS,EAAEV,aAAa,CAAC;AAAC,eAC1CS,OAAO;AAAA"}},"mtime":1667545018945},"{\"assumptions\":{},\"sourceRoot\":\"/Users/thiago/Dev/workspace/Cadre Carton e-commerce/backend/routers/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/thiago/Dev/workspace/Cadre Carton e-commerce\",\"filename\":\"/Users/thiago/Dev/workspace/Cadre Carton e-commerce/backend/routers/orderRouter.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/thiago/Dev/workspace/Cadre Carton e-commerce\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.19.6:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _express = _interopRequireDefault(require(\"express\"));\nvar _expressAsyncHandler = _interopRequireDefault(require(\"express-async-handler\"));\nvar _utils = require(\"../utils\");\nvar _orderModel = _interopRequireDefault(require(\"../models/orderModel\"));\nvar _userModel = _interopRequireDefault(require(\"../models/userModel\"));\nvar _productModel = _interopRequireDefault(require(\"../models/productModel\"));\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\nconst orderRouter = _express.default.Router();\norderRouter.get('/summary', _utils.isAuth, _utils.isAdmin, (0, _expressAsyncHandler.default)(async (req, res) => {\n  const orders = await _orderModel.default.aggregate([{\n    $group: {\n      _id: null,\n      numOrders: {\n        $sum: 1\n      },\n      totalSales: {\n        $sum: '$totalPrice'\n      }\n    }\n  }]);\n  const users = await _userModel.default.aggregate([{\n    $group: {\n      _id: null,\n      numUsers: {\n        $sum: 1\n      }\n    }\n  }]);\n  const dailyOrders = await _orderModel.default.aggregate([{\n    $group: {\n      _id: {\n        $dateToString: {\n          format: '%Y-%m-%d',\n          date: '$createdAt'\n        }\n      },\n      orders: {\n        $sum: 1\n      },\n      sales: {\n        $sum: '$totalPrice'\n      }\n    }\n  }]);\n  const productCategories = await _productModel.default.aggregate([{\n    $group: {\n      _id: '$category',\n      count: {\n        $sum: 1\n      }\n    }\n  }]);\n  res.send({\n    users,\n    orders: orders.length === 0 ? [{\n      numOrders: 0,\n      totalSales: 0\n    }] : orders,\n    dailyOrders,\n    productCategories\n  });\n}));\norderRouter.get('/', _utils.isAuth, _utils.isAdmin, (0, _expressAsyncHandler.default)(async (req, res) => {\n  const orders = await _orderModel.default.find({}).populate('user');\n  res.send(orders);\n}));\norderRouter.get('/mine', _utils.isAuth, (0, _expressAsyncHandler.default)(async (req, res) => {\n  const orders = await _orderModel.default.find({\n    user: req.user._id\n  });\n  res.send(orders);\n}));\norderRouter.get('/:id', _utils.isAuth, (0, _expressAsyncHandler.default)(async (req, res) => {\n  const order = await _orderModel.default.findById(req.params.id);\n  if (order) {\n    res.send(order);\n  } else {\n    res.status(404).send({\n      message: 'Commande introuvable.'\n    });\n  }\n}));\norderRouter.post('/', _utils.isAuth, (0, _expressAsyncHandler.default)(async (req, res) => {\n  const order = new _orderModel.default({\n    orderItems: req.body.orderItems,\n    user: req.user._id,\n    shipping: req.body.shipping,\n    payment: req.body.payment,\n    itemsPrice: req.body.itemsPrice,\n    taxPrice: req.body.taxPrice,\n    shippingPrice: req.body.shippingPrice,\n    totalPrice: req.body.totalPrice\n  });\n  const createdOrder = await order.save();\n  res.status(201).send({\n    message: 'Nouvelle commande créée',\n    order: createdOrder\n  });\n}));\norderRouter.delete('/:id', _utils.isAuth, _utils.isAdmin, (0, _expressAsyncHandler.default)(async (req, res) => {\n  const order = await _orderModel.default.findById(req.params.id);\n  if (order) {\n    const deletedOrder = await order.remove();\n    res.send({\n      message: 'Order Deleted',\n      product: deletedOrder\n    });\n  } else {\n    res.status(404).send({\n      message: 'Order Not Found'\n    });\n  }\n}));\norderRouter.put('/:id/pay', _utils.isAuth, (0, _expressAsyncHandler.default)(async (req, res) => {\n  const order = await _orderModel.default.findById(req.params.id);\n  if (order) {\n    order.isPaid = true;\n    order.paidAt = Date.now();\n    order.payment.paymentResult = {\n      payerID: req.body.payerID,\n      paymentID: req.body.paymentID,\n      orderID: req.body.orderID\n    };\n    const updatedOrder = await order.save();\n    res.send({\n      message: 'Order Paid',\n      order: updatedOrder\n    });\n  } else {\n    res.status(404).send({\n      message: 'Order Not Found.'\n    });\n  }\n}));\norderRouter.put('/:id/deliver', _utils.isAuth, (0, _expressAsyncHandler.default)(async (req, res) => {\n  const order = await _orderModel.default.findById(req.params.id);\n  if (order) {\n    order.isDelivered = true;\n    order.deliveredAt = Date.now();\n    const updatedOrder = await order.save();\n    res.send({\n      message: 'Order Delivered',\n      order: updatedOrder\n    });\n  } else {\n    res.status(404).send({\n      message: 'Order Not Found.'\n    });\n  }\n}));\nvar _default = orderRouter;\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJvcmRlclJvdXRlciIsImV4cHJlc3MiLCJSb3V0ZXIiLCJnZXQiLCJpc0F1dGgiLCJpc0FkbWluIiwiZXhwcmVzc0FzeW5jSGFuZGxlciIsInJlcSIsInJlcyIsIm9yZGVycyIsIk9yZGVyIiwiYWdncmVnYXRlIiwiJGdyb3VwIiwiX2lkIiwibnVtT3JkZXJzIiwiJHN1bSIsInRvdGFsU2FsZXMiLCJ1c2VycyIsIlVzZXIiLCJudW1Vc2VycyIsImRhaWx5T3JkZXJzIiwiJGRhdGVUb1N0cmluZyIsImZvcm1hdCIsImRhdGUiLCJzYWxlcyIsInByb2R1Y3RDYXRlZ29yaWVzIiwiUHJvZHVjdCIsImNvdW50Iiwic2VuZCIsImxlbmd0aCIsImZpbmQiLCJwb3B1bGF0ZSIsInVzZXIiLCJvcmRlciIsImZpbmRCeUlkIiwicGFyYW1zIiwiaWQiLCJzdGF0dXMiLCJtZXNzYWdlIiwicG9zdCIsIm9yZGVySXRlbXMiLCJib2R5Iiwic2hpcHBpbmciLCJwYXltZW50IiwiaXRlbXNQcmljZSIsInRheFByaWNlIiwic2hpcHBpbmdQcmljZSIsInRvdGFsUHJpY2UiLCJjcmVhdGVkT3JkZXIiLCJzYXZlIiwiZGVsZXRlIiwiZGVsZXRlZE9yZGVyIiwicmVtb3ZlIiwicHJvZHVjdCIsInB1dCIsImlzUGFpZCIsInBhaWRBdCIsIkRhdGUiLCJub3ciLCJwYXltZW50UmVzdWx0IiwicGF5ZXJJRCIsInBheW1lbnRJRCIsIm9yZGVySUQiLCJ1cGRhdGVkT3JkZXIiLCJpc0RlbGl2ZXJlZCIsImRlbGl2ZXJlZEF0Il0sInNvdXJjZVJvb3QiOiIvVXNlcnMvdGhpYWdvL0Rldi93b3Jrc3BhY2UvQ2FkcmUgQ2FydG9uIGUtY29tbWVyY2UvYmFja2VuZC9yb3V0ZXJzLyIsInNvdXJjZXMiOlsib3JkZXJSb3V0ZXIuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGV4cHJlc3MgZnJvbSAnZXhwcmVzcyc7XG5pbXBvcnQgZXhwcmVzc0FzeW5jSGFuZGxlciBmcm9tICdleHByZXNzLWFzeW5jLWhhbmRsZXInO1xuaW1wb3J0IHsgaXNBdXRoLCBpc0FkbWluIH0gZnJvbSAnLi4vdXRpbHMnO1xuaW1wb3J0IE9yZGVyIGZyb20gJy4uL21vZGVscy9vcmRlck1vZGVsJztcbmltcG9ydCBVc2VyIGZyb20gJy4uL21vZGVscy91c2VyTW9kZWwnO1xuaW1wb3J0IFByb2R1Y3QgZnJvbSAnLi4vbW9kZWxzL3Byb2R1Y3RNb2RlbCc7XG5cblxuY29uc3Qgb3JkZXJSb3V0ZXIgPSBleHByZXNzLlJvdXRlcigpO1xuXG5vcmRlclJvdXRlci5nZXQoXG4gICcvc3VtbWFyeScsXG4gIGlzQXV0aCxcbiAgaXNBZG1pbixcbiAgZXhwcmVzc0FzeW5jSGFuZGxlcihhc3luYyAocmVxLCByZXMpID0+IHtcbiAgICBjb25zdCBvcmRlcnMgPSBhd2FpdCBPcmRlci5hZ2dyZWdhdGUoW1xuICAgICAge1xuICAgICAgICAkZ3JvdXA6IHtcbiAgICAgICAgICBfaWQ6IG51bGwsXG4gICAgICAgICAgbnVtT3JkZXJzOiB7ICRzdW06IDEgfSxcbiAgICAgICAgICB0b3RhbFNhbGVzOiB7ICRzdW06ICckdG90YWxQcmljZScgfSxcbiAgICAgICAgfSxcbiAgICAgIH0sXG4gICAgXSk7XG4gICAgY29uc3QgdXNlcnMgPSBhd2FpdCBVc2VyLmFnZ3JlZ2F0ZShbXG4gICAgICB7XG4gICAgICAgICRncm91cDoge1xuICAgICAgICAgIF9pZDogbnVsbCxcbiAgICAgICAgICBudW1Vc2VyczogeyAkc3VtOiAxIH0sXG4gICAgICAgIH0sXG4gICAgICB9LFxuICAgIF0pO1xuICAgIGNvbnN0IGRhaWx5T3JkZXJzID0gYXdhaXQgT3JkZXIuYWdncmVnYXRlKFtcbiAgICAgIHtcbiAgICAgICAgJGdyb3VwOiB7XG4gICAgICAgICAgX2lkOiB7ICRkYXRlVG9TdHJpbmc6IHsgZm9ybWF0OiAnJVktJW0tJWQnLCBkYXRlOiAnJGNyZWF0ZWRBdCcgfSB9LFxuICAgICAgICAgIG9yZGVyczogeyAkc3VtOiAxIH0sXG4gICAgICAgICAgc2FsZXM6IHsgJHN1bTogJyR0b3RhbFByaWNlJyB9LFxuICAgICAgICB9LFxuICAgICAgfSxcbiAgICBdKTtcbiAgICBjb25zdCBwcm9kdWN0Q2F0ZWdvcmllcyA9IGF3YWl0IFByb2R1Y3QuYWdncmVnYXRlKFtcbiAgICAgIHtcbiAgICAgICAgJGdyb3VwOiB7XG4gICAgICAgICAgX2lkOiAnJGNhdGVnb3J5JyxcbiAgICAgICAgICBjb3VudDogeyAkc3VtOiAxIH0sXG4gICAgICAgIH0sXG4gICAgICB9LFxuICAgIF0pO1xuICAgIHJlcy5zZW5kKHtcbiAgICAgIHVzZXJzLFxuICAgICAgb3JkZXJzOiBvcmRlcnMubGVuZ3RoID09PSAwID8gW3sgbnVtT3JkZXJzOiAwLCB0b3RhbFNhbGVzOiAwIH1dIDogb3JkZXJzLFxuICAgICAgZGFpbHlPcmRlcnMsXG4gICAgICBwcm9kdWN0Q2F0ZWdvcmllcyxcbiAgICB9KTtcbiAgfSlcbik7XG5cbm9yZGVyUm91dGVyLmdldChcbiAgJy8nLFxuICBpc0F1dGgsXG4gIGlzQWRtaW4sXG4gIGV4cHJlc3NBc3luY0hhbmRsZXIoYXN5bmMgKHJlcSwgcmVzKSA9PiB7XG4gICAgY29uc3Qgb3JkZXJzID0gYXdhaXQgT3JkZXIuZmluZCh7fSkucG9wdWxhdGUoJ3VzZXInKTtcbiAgICByZXMuc2VuZChvcmRlcnMpO1xuICB9KVxuKTtcblxub3JkZXJSb3V0ZXIuZ2V0KFxuICAnL21pbmUnLFxuICBpc0F1dGgsXG4gIGV4cHJlc3NBc3luY0hhbmRsZXIoYXN5bmMgKHJlcSwgcmVzKSA9PiB7XG4gICAgY29uc3Qgb3JkZXJzID0gYXdhaXQgT3JkZXIuZmluZCh7IHVzZXI6IHJlcS51c2VyLl9pZCB9KTtcbiAgICByZXMuc2VuZChvcmRlcnMpO1xuICB9KVxuKVxuXG5vcmRlclJvdXRlci5nZXQoXG4gICcvOmlkJyxcbiAgaXNBdXRoLFxuICBleHByZXNzQXN5bmNIYW5kbGVyKGFzeW5jIChyZXEsIHJlcykgPT4ge1xuICAgIGNvbnN0IG9yZGVyID0gYXdhaXQgT3JkZXIuZmluZEJ5SWQocmVxLnBhcmFtcy5pZCk7XG4gICAgaWYgKG9yZGVyKSB7XG4gICAgICByZXMuc2VuZChvcmRlcik7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJlcy5zdGF0dXMoNDA0KS5zZW5kKHsgbWVzc2FnZTogJ0NvbW1hbmRlIGludHJvdXZhYmxlLicgfSk7XG4gICAgfVxuICB9KVxuKTtcblxub3JkZXJSb3V0ZXIucG9zdChcbiAgJy8nLFxuICBpc0F1dGgsXG4gIGV4cHJlc3NBc3luY0hhbmRsZXIoYXN5bmMgKHJlcSwgcmVzKSA9PiB7XG4gICAgY29uc3Qgb3JkZXIgPSBuZXcgT3JkZXIoe1xuICAgICAgb3JkZXJJdGVtczogcmVxLmJvZHkub3JkZXJJdGVtcyxcbiAgICAgIHVzZXI6IHJlcS51c2VyLl9pZCxcbiAgICAgIHNoaXBwaW5nOiByZXEuYm9keS5zaGlwcGluZyxcbiAgICAgIHBheW1lbnQ6IHJlcS5ib2R5LnBheW1lbnQsXG4gICAgICBpdGVtc1ByaWNlOiByZXEuYm9keS5pdGVtc1ByaWNlLFxuICAgICAgdGF4UHJpY2U6IHJlcS5ib2R5LnRheFByaWNlLFxuICAgICAgc2hpcHBpbmdQcmljZTogcmVxLmJvZHkuc2hpcHBpbmdQcmljZSxcbiAgICAgIHRvdGFsUHJpY2U6IHJlcS5ib2R5LnRvdGFsUHJpY2UsXG4gICAgfSk7XG4gICAgY29uc3QgY3JlYXRlZE9yZGVyID0gYXdhaXQgb3JkZXIuc2F2ZSgpO1xuICAgIHJlcy5zdGF0dXMoMjAxKS5zZW5kKHsgbWVzc2FnZTogJ05vdXZlbGxlIGNvbW1hbmRlIGNyw6nDqWUnLCBvcmRlcjogY3JlYXRlZE9yZGVyIH0pO1xuICB9KVxuKTtcblxub3JkZXJSb3V0ZXIuZGVsZXRlKFxuICAnLzppZCcsXG4gIGlzQXV0aCxcbiAgaXNBZG1pbixcbiAgZXhwcmVzc0FzeW5jSGFuZGxlcihhc3luYyAocmVxLCByZXMpID0+IHtcbiAgICBjb25zdCBvcmRlciA9IGF3YWl0IE9yZGVyLmZpbmRCeUlkKHJlcS5wYXJhbXMuaWQpO1xuICAgIGlmIChvcmRlcikge1xuICAgICAgY29uc3QgZGVsZXRlZE9yZGVyID0gYXdhaXQgb3JkZXIucmVtb3ZlKCk7XG4gICAgICByZXMuc2VuZCh7IG1lc3NhZ2U6ICdPcmRlciBEZWxldGVkJywgcHJvZHVjdDogZGVsZXRlZE9yZGVyIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXMuc3RhdHVzKDQwNCkuc2VuZCh7IG1lc3NhZ2U6ICdPcmRlciBOb3QgRm91bmQnIH0pO1xuICAgIH1cbiAgfSlcbik7XG5cbm9yZGVyUm91dGVyLnB1dChcbiAgJy86aWQvcGF5JyxcbiAgaXNBdXRoLFxuICBleHByZXNzQXN5bmNIYW5kbGVyKGFzeW5jIChyZXEsIHJlcykgPT4ge1xuICAgIGNvbnN0IG9yZGVyID0gYXdhaXQgT3JkZXIuZmluZEJ5SWQocmVxLnBhcmFtcy5pZCk7XG4gICAgaWYgKG9yZGVyKSB7XG4gICAgICBvcmRlci5pc1BhaWQgPSB0cnVlO1xuICAgICAgb3JkZXIucGFpZEF0ID0gRGF0ZS5ub3coKTtcbiAgICAgIG9yZGVyLnBheW1lbnQucGF5bWVudFJlc3VsdCA9IHtcbiAgICAgICAgcGF5ZXJJRDogcmVxLmJvZHkucGF5ZXJJRCxcbiAgICAgICAgcGF5bWVudElEOiByZXEuYm9keS5wYXltZW50SUQsXG4gICAgICAgIG9yZGVySUQ6IHJlcS5ib2R5Lm9yZGVySUQsXG4gICAgICB9O1xuICAgICAgY29uc3QgdXBkYXRlZE9yZGVyID0gYXdhaXQgb3JkZXIuc2F2ZSgpO1xuICAgICAgcmVzLnNlbmQoeyBtZXNzYWdlOiAnT3JkZXIgUGFpZCcsIG9yZGVyOiB1cGRhdGVkT3JkZXIgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJlcy5zdGF0dXMoNDA0KS5zZW5kKHsgbWVzc2FnZTogJ09yZGVyIE5vdCBGb3VuZC4nIH0pO1xuICAgIH1cbiAgfSlcbik7XG5cbm9yZGVyUm91dGVyLnB1dChcbiAgJy86aWQvZGVsaXZlcicsXG4gIGlzQXV0aCxcbiAgZXhwcmVzc0FzeW5jSGFuZGxlcihhc3luYyAocmVxLCByZXMpID0+IHtcbiAgICBjb25zdCBvcmRlciA9IGF3YWl0IE9yZGVyLmZpbmRCeUlkKHJlcS5wYXJhbXMuaWQpO1xuICAgIGlmIChvcmRlcikge1xuICAgICAgb3JkZXIuaXNEZWxpdmVyZWQgPSB0cnVlO1xuICAgICAgb3JkZXIuZGVsaXZlcmVkQXQgPSBEYXRlLm5vdygpO1xuICAgICAgY29uc3QgdXBkYXRlZE9yZGVyID0gYXdhaXQgb3JkZXIuc2F2ZSgpO1xuICAgICAgcmVzLnNlbmQoeyBtZXNzYWdlOiAnT3JkZXIgRGVsaXZlcmVkJywgb3JkZXI6IHVwZGF0ZWRPcmRlciB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmVzLnN0YXR1cyg0MDQpLnNlbmQoeyBtZXNzYWdlOiAnT3JkZXIgTm90IEZvdW5kLicgfSk7XG4gICAgfVxuICB9KVxuKTtcblxuZXhwb3J0IGRlZmF1bHQgb3JkZXJSb3V0ZXI7XG4iXSwibWFwcGluZ3MiOiI7Ozs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUE2QztBQUc3QyxNQUFNQSxXQUFXLEdBQUdDLGdCQUFPLENBQUNDLE1BQU0sRUFBRTtBQUVwQ0YsV0FBVyxDQUFDRyxHQUFHLENBQ2IsVUFBVSxFQUNWQyxhQUFNLEVBQ05DLGNBQU8sRUFDUCxJQUFBQyw0QkFBbUIsRUFBQyxPQUFPQyxHQUFHLEVBQUVDLEdBQUcsS0FBSztFQUN0QyxNQUFNQyxNQUFNLEdBQUcsTUFBTUMsbUJBQUssQ0FBQ0MsU0FBUyxDQUFDLENBQ25DO0lBQ0VDLE1BQU0sRUFBRTtNQUNOQyxHQUFHLEVBQUUsSUFBSTtNQUNUQyxTQUFTLEVBQUU7UUFBRUMsSUFBSSxFQUFFO01BQUUsQ0FBQztNQUN0QkMsVUFBVSxFQUFFO1FBQUVELElBQUksRUFBRTtNQUFjO0lBQ3BDO0VBQ0YsQ0FBQyxDQUNGLENBQUM7RUFDRixNQUFNRSxLQUFLLEdBQUcsTUFBTUMsa0JBQUksQ0FBQ1AsU0FBUyxDQUFDLENBQ2pDO0lBQ0VDLE1BQU0sRUFBRTtNQUNOQyxHQUFHLEVBQUUs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","map":{"version":3,"names":["orderRouter","express","Router","get","isAuth","isAdmin","expressAsyncHandler","req","res","orders","Order","aggregate","$group","_id","numOrders","$sum","totalSales","users","User","numUsers","dailyOrders","$dateToString","format","date","sales","productCategories","Product","count","send","length","find","populate","user","order","findById","params","id","status","message","post","orderItems","body","shipping","payment","itemsPrice","taxPrice","shippingPrice","totalPrice","createdOrder","save","delete","deletedOrder","remove","product","put","isPaid","paidAt","Date","now","paymentResult","payerID","paymentID","orderID","updatedOrder","isDelivered","deliveredAt"],"sourceRoot":"/Users/thiago/Dev/workspace/Cadre Carton e-commerce/backend/routers/","sources":["orderRouter.js"],"sourcesContent":["import express from 'express';\nimport expressAsyncHandler from 'express-async-handler';\nimport { isAuth, isAdmin } from '../utils';\nimport Order from '../models/orderModel';\nimport User from '../models/userModel';\nimport Product from '../models/productModel';\n\n\nconst orderRouter = express.Router();\n\norderRouter.get(\n  '/summary',\n  isAuth,\n  isAdmin,\n  expressAsyncHandler(async (req, res) => {\n    const orders = await Order.aggregate([\n      {\n        $group: {\n          _id: null,\n          numOrders: { $sum: 1 },\n          totalSales: { $sum: '$totalPrice' },\n        },\n      },\n    ]);\n    const users = await User.aggregate([\n      {\n        $group: {\n          _id: null,\n          numUsers: { $sum: 1 },\n        },\n      },\n    ]);\n    const dailyOrders = await Order.aggregate([\n      {\n        $group: {\n          _id: { $dateToString: { format: '%Y-%m-%d', date: '$createdAt' } },\n          orders: { $sum: 1 },\n          sales: { $sum: '$totalPrice' },\n        },\n      },\n    ]);\n    const productCategories = await Product.aggregate([\n      {\n        $group: {\n          _id: '$category',\n          count: { $sum: 1 },\n        },\n      },\n    ]);\n    res.send({\n      users,\n      orders: orders.length === 0 ? [{ numOrders: 0, totalSales: 0 }] : orders,\n      dailyOrders,\n      productCategories,\n    });\n  })\n);\n\norderRouter.get(\n  '/',\n  isAuth,\n  isAdmin,\n  expressAsyncHandler(async (req, res) => {\n    const orders = await Order.find({}).populate('user');\n    res.send(orders);\n  })\n);\n\norderRouter.get(\n  '/mine',\n  isAuth,\n  expressAsyncHandler(async (req, res) => {\n    const orders = await Order.find({ user: req.user._id });\n    res.send(orders);\n  })\n)\n\norderRouter.get(\n  '/:id',\n  isAuth,\n  expressAsyncHandler(async (req, res) => {\n    const order = await Order.findById(req.params.id);\n    if (order) {\n      res.send(order);\n    } else {\n      res.status(404).send({ message: 'Commande introuvable.' });\n    }\n  })\n);\n\norderRouter.post(\n  '/',\n  isAuth,\n  expressAsyncHandler(async (req, res) => {\n    const order = new Order({\n      orderItems: req.body.orderItems,\n      user: req.user._id,\n      shipping: req.body.shipping,\n      payment: req.body.payment,\n      itemsPrice: req.body.itemsPrice,\n      taxPrice: req.body.taxPrice,\n      shippingPrice: req.body.shippingPrice,\n      totalPrice: req.body.totalPrice,\n    });\n    const createdOrder = await order.save();\n    res.status(201).send({ message: 'Nouvelle commande créée', order: createdOrder });\n  })\n);\n\norderRouter.delete(\n  '/:id',\n  isAuth,\n  isAdmin,\n  expressAsyncHandler(async (req, res) => {\n    const order = await Order.findById(req.params.id);\n    if (order) {\n      const deletedOrder = await order.remove();\n      res.send({ message: 'Order Deleted', product: deletedOrder });\n    } else {\n      res.status(404).send({ message: 'Order Not Found' });\n    }\n  })\n);\n\norderRouter.put(\n  '/:id/pay',\n  isAuth,\n  expressAsyncHandler(async (req, res) => {\n    const order = await Order.findById(req.params.id);\n    if (order) {\n      order.isPaid = true;\n      order.paidAt = Date.now();\n      order.payment.paymentResult = {\n        payerID: req.body.payerID,\n        paymentID: req.body.paymentID,\n        orderID: req.body.orderID,\n      };\n      const updatedOrder = await order.save();\n      res.send({ message: 'Order Paid', order: updatedOrder });\n    } else {\n      res.status(404).send({ message: 'Order Not Found.' });\n    }\n  })\n);\n\norderRouter.put(\n  '/:id/deliver',\n  isAuth,\n  expressAsyncHandler(async (req, res) => {\n    const order = await Order.findById(req.params.id);\n    if (order) {\n      order.isDelivered = true;\n      order.deliveredAt = Date.now();\n      const updatedOrder = await order.save();\n      res.send({ message: 'Order Delivered', order: updatedOrder });\n    } else {\n      res.status(404).send({ message: 'Order Not Found.' });\n    }\n  })\n);\n\nexport default orderRouter;\n"],"mappings":"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"}},"mtime":1667805727007},"{\"assumptions\":{},\"sourceRoot\":\"/Users/thiago/Dev/workspace/Cadre Carton e-commerce/backend/models/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/thiago/Dev/workspace/Cadre Carton e-commerce\",\"filename\":\"/Users/thiago/Dev/workspace/Cadre Carton e-commerce/backend/models/orderModel.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/thiago/Dev/workspace/Cadre Carton e-commerce\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.19.6:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _mongoose = _interopRequireDefault(require(\"mongoose\"));\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\nconst orderSchema = new _mongoose.default.Schema({\n  orderItems: [{\n    name: {\n      type: String,\n      required: true\n    },\n    image: {\n      type: String,\n      required: true\n    },\n    price: {\n      type: Number,\n      required: true\n    },\n    qty: {\n      type: Number,\n      required: true\n    },\n    product: {\n      type: _mongoose.default.Schema.Types.ObjectId,\n      ref: 'Product',\n      required: true\n    }\n  }],\n  user: {\n    type: _mongoose.default.Schema.Types.ObjectId,\n    ref: 'User',\n    required: true\n  },\n  shipping: {\n    address: String,\n    city: String,\n    postalCode: String,\n    country: String\n  },\n  payment: {\n    paymentMethod: String,\n    paymentResult: {\n      orderID: String,\n      payerID: String,\n      paymentID: String\n    }\n  },\n  itemsPrice: Number,\n  taxPrice: Number,\n  shippingPrice: Number,\n  totalPrice: Number,\n  isPaid: {\n    type: Boolean,\n    required: true,\n    default: false\n  },\n  paidAt: Date,\n  isDelivered: {\n    type: Boolean,\n    required: true,\n    default: false\n  },\n  deliveredAt: Date\n}, {\n  timestamps: true\n});\nconst Order = _mongoose.default.model('Order', orderSchema);\nvar _default = Order;\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJvcmRlclNjaGVtYSIsIm1vbmdvb3NlIiwiU2NoZW1hIiwib3JkZXJJdGVtcyIsIm5hbWUiLCJ0eXBlIiwiU3RyaW5nIiwicmVxdWlyZWQiLCJpbWFnZSIsInByaWNlIiwiTnVtYmVyIiwicXR5IiwicHJvZHVjdCIsIlR5cGVzIiwiT2JqZWN0SWQiLCJyZWYiLCJ1c2VyIiwic2hpcHBpbmciLCJhZGRyZXNzIiwiY2l0eSIsInBvc3RhbENvZGUiLCJjb3VudHJ5IiwicGF5bWVudCIsInBheW1lbnRNZXRob2QiLCJwYXltZW50UmVzdWx0Iiwib3JkZXJJRCIsInBheWVySUQiLCJwYXltZW50SUQiLCJpdGVtc1ByaWNlIiwidGF4UHJpY2UiLCJzaGlwcGluZ1ByaWNlIiwidG90YWxQcmljZSIsImlzUGFpZCIsIkJvb2xlYW4iLCJkZWZhdWx0IiwicGFpZEF0IiwiRGF0ZSIsImlzRGVsaXZlcmVkIiwiZGVsaXZlcmVkQXQiLCJ0aW1lc3RhbXBzIiwiT3JkZXIiLCJtb2RlbCJdLCJzb3VyY2VSb290IjoiL1VzZXJzL3RoaWFnby9EZXYvd29ya3NwYWNlL0NhZHJlIENhcnRvbiBlLWNvbW1lcmNlL2JhY2tlbmQvbW9kZWxzLyIsInNvdXJjZXMiOlsib3JkZXJNb2RlbC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgbW9uZ29vc2UgZnJvbSAnbW9uZ29vc2UnO1xuXG5jb25zdCBvcmRlclNjaGVtYSA9IG5ldyBtb25nb29zZS5TY2hlbWEoXG4gIHtcbiAgICBvcmRlckl0ZW1zOiBbXG4gICAgICB7XG4gICAgICAgIG5hbWU6IHsgdHlwZTogU3RyaW5nLCByZXF1aXJlZDogdHJ1ZSB9LFxuICAgICAgICBpbWFnZTogeyB0eXBlOiBTdHJpbmcsIHJlcXVpcmVkOiB0cnVlIH0sXG4gICAgICAgIHByaWNlOiB7IHR5cGU6IE51bWJlciwgcmVxdWlyZWQ6IHRydWUgfSxcbiAgICAgICAgcXR5OiB7IHR5cGU6IE51bWJlciwgcmVxdWlyZWQ6IHRydWUgfSxcbiAgICAgICAgcHJvZHVjdDoge1xuICAgICAgICAgIHR5cGU6IG1vbmdvb3NlLlNjaGVtYS5UeXBlcy5PYmplY3RJZCxcbiAgICAgICAgICByZWY6ICdQcm9kdWN0JyxcbiAgICAgICAgICByZXF1aXJlZDogdHJ1ZSxcbiAgICAgICAgfSxcbiAgICAgIH0sXG4gICAgXSxcbiAgICB1c2VyOiB7IHR5cGU6IG1vbmdvb3NlLlNjaGVtYS5UeXBlcy5PYmplY3RJZCwgcmVmOiAnVXNlcicsIHJlcXVpcmVkOiB0cnVlIH0sXG4gICAgc2hpcHBpbmc6IHtcbiAgICAgIGFkZHJlc3M6IFN0cmluZyxcbiAgICAgIGNpdHk6IFN0cmluZyxcbiAgICAgIHBvc3RhbENvZGU6IFN0cmluZyxcbiAgICAgIGNvdW50cnk6IFN0cmluZyxcbiAgICB9LFxuICAgIHBheW1lbnQ6IHtcbiAgICAgIHBheW1lbnRNZXRob2Q6IFN0cmluZyxcbiAgICAgIHBheW1lbnRSZXN1bHQ6IHtcbiAgICAgICAgb3JkZXJJRDogU3RyaW5nLFxuICAgICAgICBwYXllcklEOiBTdHJpbmcsXG4gICAgICAgIHBheW1lbnRJRDogU3RyaW5nLFxuICAgICAgfSxcbiAgICB9LFxuICAgIGl0ZW1zUHJpY2U6IE51bWJlcixcbiAgICB0YXhQcmljZTogTnVtYmVyLFxuICAgIHNoaXBwaW5nUHJpY2U6IE51bWJlcixcbiAgICB0b3RhbFByaWNlOiBOdW1iZXIsXG4gICAgaXNQYWlkOiB7IHR5cGU6IEJvb2xlYW4sIHJlcXVpcmVkOiB0cnVlLCBkZWZhdWx0OiBmYWxzZSB9LFxuICAgIHBhaWRBdDogRGF0ZSxcbiAgICBpc0RlbGl2ZXJlZDogeyB0eXBlOiBCb29sZWFuLCByZXF1aXJlZDogdHJ1ZSwgZGVmYXVsdDogZmFsc2UgfSxcbiAgICBkZWxpdmVyZWRBdDogRGF0ZSxcbiAgfSxcbiAge1xuICAgIHRpbWVzdGFtcHM6IHRydWUsXG4gIH1cbik7XG5jb25zdCBPcmRlciA9IG1vbmdvb3NlLm1vZGVsKCdPcmRlcicsIG9yZGVyU2NoZW1hKTtcbmV4cG9ydCBkZWZhdWx0IE9yZGVyO1xuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7QUFBQTtBQUFnQztBQUVoQyxNQUFNQSxXQUFXLEdBQUcsSUFBSUMsaUJBQVEsQ0FBQ0MsTUFBTSxDQUNyQztFQUNFQyxVQUFVLEVBQUUsQ0FDVjtJQUNFQyxJQUFJLEVBQUU7TUFBRUMsSUFBSSxFQUFFQyxNQUFNO01BQUVDLFFBQVEsRUFBRTtJQUFLLENBQUM7SUFDdENDLEtBQUssRUFBRTtNQUFFSCxJQUFJLEVBQUVDLE1BQU07TUFBRUMsUUFBUSxFQUFFO0lBQUssQ0FBQztJQUN2Q0UsS0FBSyxFQUFFO01BQUVKLElBQUksRUFBRUssTUFBTTtNQUFFSCxRQUFRLEVBQUU7SUFBSyxDQUFDO0lBQ3ZDSSxHQUFHLEVBQUU7TUFBRU4sSUFBSSxFQUFFSyxNQUFNO01BQUVILFFBQVEsRUFBRTtJQUFLLENBQUM7SUFDckNLLE9BQU8sRUFBRTtNQUNQUCxJQUFJLEVBQUVKLGlCQUFRLENBQUNDLE1BQU0sQ0FBQ1csS0FBSyxDQUFDQyxRQUFRO01BQ3BDQyxHQUFHLEVBQUUsU0FBUztNQUNkUixRQUFRLEVBQUU7SUFDWjtFQUNGLENBQUMsQ0FDRjtFQUNEUyxJQUFJLEVBQUU7SUFBRVgsSUFBSSxFQUFFSixpQkFBUSxDQUFDQyxNQUFNLENBQUNXLEtBQUssQ0FBQ0MsUUFBUTtJQUFFQyxHQUFHLEVBQUUsTUFBTTtJQUFFUixRQUFRLEVBQUU7RUFBSyxDQUFDO0VBQzNFVSxRQUFRLEVBQUU7SUFDUkMsT0FBTyxFQUFFWixNQUFNO0lBQ2ZhLElBQUksRUFBRWIsTUFBTTtJQUNaYyxVQUFVLEVBQUVkLE1BQU07SUFDbEJlLE9BQU8sRUFBRWY7RUFDWCxDQUFDO0VBQ0RnQixPQUFPLEVBQUU7SUFDUEMsYUFBYSxFQUFFakIsTUFBTTtJQUNyQmtCLGFBQWEsRUFBRTtNQUNiQyxPQUFPLEVBQUVuQixNQUFNO01BQ2ZvQixPQUFPLEVBQUVwQixNQUFNO01BQ2ZxQixTQUFTLEVBQUVyQjtJQUNiO0VBQ0YsQ0FBQztFQUNEc0IsVUFBVSxFQUFFbEIsTUFBTTtFQUNsQm1CLFFBQVEsRUFBRW5CLE1BQU07RUFDaEJvQixhQUFhLEVBQUVwQixNQUFNO0VBQ3JCcUIsVUFBVSxFQUFFckIsTUFBTTtFQUNsQnNCLE1BQU0sRUFBRTtJQUFFM0IsSUFBSSxFQUFFNEIsT0FBTztJQUFFMUIsUUFBUSxFQUFFLElBQUk7SUFBRTJCLE9BQU8sRUFBRTtFQUFNLENBQUM7RUFDekRDLE1BQU0sRUFBRUMsSUFBSTtFQUNaQyxXQUFXLEVBQUU7SUFBRWhDLElBQUksRUFBRTRCLE9BQU87SUFBRTFCLFFBQVEsRUFBRSxJQUFJO0lBQUUyQixPQUFPLEVBQUU7RUFBTSxDQUFDO0VBQzlESSxXQUFXLEVBQUVGO0FBQ2YsQ0FBQyxFQUNEO0VBQ0VHLFVBQVUsRUFBRTtBQUNkLENBQUMsQ0FDRjtBQUNELE1BQU1DLEtBQUssR0FBR3ZDLGlCQUFRLENBQUN3QyxLQUFLLENBQUMsT0FBTyxFQUFFekMsV0FBVyxDQUFDO0FBQUMsZUFDcEN3QyxLQUFLO0FBQUEifQ==","map":{"version":3,"names":["orderSchema","mongoose","Schema","orderItems","name","type","String","required","image","price","Number","qty","product","Types","ObjectId","ref","user","shipping","address","city","postalCode","country","payment","paymentMethod","paymentResult","orderID","payerID","paymentID","itemsPrice","taxPrice","shippingPrice","totalPrice","isPaid","Boolean","default","paidAt","Date","isDelivered","deliveredAt","timestamps","Order","model"],"sourceRoot":"/Users/thiago/Dev/workspace/Cadre Carton e-commerce/backend/models/","sources":["orderModel.js"],"sourcesContent":["import mongoose from 'mongoose';\n\nconst orderSchema = new mongoose.Schema(\n  {\n    orderItems: [\n      {\n        name: { type: String, required: true },\n        image: { type: String, required: true },\n        price: { type: Number, required: true },\n        qty: { type: Number, required: true },\n        product: {\n          type: mongoose.Schema.Types.ObjectId,\n          ref: 'Product',\n          required: true,\n        },\n      },\n    ],\n    user: { type: mongoose.Schema.Types.ObjectId, ref: 'User', required: true },\n    shipping: {\n      address: String,\n      city: String,\n      postalCode: String,\n      country: String,\n    },\n    payment: {\n      paymentMethod: String,\n      paymentResult: {\n        orderID: String,\n        payerID: String,\n        paymentID: String,\n      },\n    },\n    itemsPrice: Number,\n    taxPrice: Number,\n    shippingPrice: Number,\n    totalPrice: Number,\n    isPaid: { type: Boolean, required: true, default: false },\n    paidAt: Date,\n    isDelivered: { type: Boolean, required: true, default: false },\n    deliveredAt: Date,\n  },\n  {\n    timestamps: true,\n  }\n);\nconst Order = mongoose.model('Order', orderSchema);\nexport default Order;\n"],"mappings":";;;;;;AAAA;AAAgC;AAEhC,MAAMA,WAAW,GAAG,IAAIC,iBAAQ,CAACC,MAAM,CACrC;EACEC,UAAU,EAAE,CACV;IACEC,IAAI,EAAE;MAAEC,IAAI,EAAEC,MAAM;MAAEC,QAAQ,EAAE;IAAK,CAAC;IACtCC,KAAK,EAAE;MAAEH,IAAI,EAAEC,MAAM;MAAEC,QAAQ,EAAE;IAAK,CAAC;IACvCE,KAAK,EAAE;MAAEJ,IAAI,EAAEK,MAAM;MAAEH,QAAQ,EAAE;IAAK,CAAC;IACvCI,GAAG,EAAE;MAAEN,IAAI,EAAEK,MAAM;MAAEH,QAAQ,EAAE;IAAK,CAAC;IACrCK,OAAO,EAAE;MACPP,IAAI,EAAEJ,iBAAQ,CAACC,MAAM,CAACW,KAAK,CAACC,QAAQ;MACpCC,GAAG,EAAE,SAAS;MACdR,QAAQ,EAAE;IACZ;EACF,CAAC,CACF;EACDS,IAAI,EAAE;IAAEX,IAAI,EAAEJ,iBAAQ,CAACC,MAAM,CAACW,KAAK,CAACC,QAAQ;IAAEC,GAAG,EAAE,MAAM;IAAER,QAAQ,EAAE;EAAK,CAAC;EAC3EU,QAAQ,EAAE;IACRC,OAAO,EAAEZ,MAAM;IACfa,IAAI,EAAEb,MAAM;IACZc,UAAU,EAAEd,MAAM;IAClBe,OAAO,EAAEf;EACX,CAAC;EACDgB,OAAO,EAAE;IACPC,aAAa,EAAEjB,MAAM;IACrBkB,aAAa,EAAE;MACbC,OAAO,EAAEnB,MAAM;MACfoB,OAAO,EAAEpB,MAAM;MACfqB,SAAS,EAAErB;IACb;EACF,CAAC;EACDsB,UAAU,EAAElB,MAAM;EAClBmB,QAAQ,EAAEnB,MAAM;EAChBoB,aAAa,EAAEpB,MAAM;EACrBqB,UAAU,EAAErB,MAAM;EAClBsB,MAAM,EAAE;IAAE3B,IAAI,EAAE4B,OAAO;IAAE1B,QAAQ,EAAE,IAAI;IAAE2B,OAAO,EAAE;EAAM,CAAC;EACzDC,MAAM,EAAEC,IAAI;EACZC,WAAW,EAAE;IAAEhC,IAAI,EAAE4B,OAAO;IAAE1B,QAAQ,EAAE,IAAI;IAAE2B,OAAO,EAAE;EAAM,CAAC;EAC9DI,WAAW,EAAEF;AACf,CAAC,EACD;EACEG,UAAU,EAAE;AACd,CAAC,CACF;AACD,MAAMC,KAAK,GAAGvC,iBAAQ,CAACwC,KAAK,CAAC,OAAO,EAAEzC,WAAW,CAAC;AAAC,eACpCwC,KAAK;AAAA"}},"mtime":1667544855960},"{\"assumptions\":{},\"sourceRoot\":\"/Users/thiago/Dev/workspace/Cadre Carton e-commerce/backend/models/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/thiago/Dev/workspace/Cadre Carton e-commerce\",\"filename\":\"/Users/thiago/Dev/workspace/Cadre Carton e-commerce/backend/models/productModel.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/thiago/Dev/workspace/Cadre Carton e-commerce\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.19.6:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _mongoose = _interopRequireDefault(require(\"mongoose\"));\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\nconst reviewSchema = new _mongoose.default.Schema({\n  user: {\n    type: _mongoose.default.Schema.Types.ObjectId,\n    ref: 'User',\n    required: true\n  },\n  name: {\n    type: String,\n    required: true\n  },\n  rating: {\n    type: Number,\n    required: true,\n    default: 0,\n    min: 0,\n    max: 5\n  },\n  comment: {\n    type: String,\n    required: true\n  }\n}, {\n  timestamps: true\n});\nconst productSchema = new _mongoose.default.Schema({\n  name: {\n    type: String,\n    required: true\n  },\n  description: {\n    type: String,\n    required: true\n  },\n  category: {\n    type: String,\n    required: true\n  },\n  brand: {\n    type: String,\n    required: true\n  },\n  image: {\n    type: String,\n    required: true\n  },\n  price: {\n    type: Number,\n    default: 0.0,\n    required: true\n  },\n  countInStock: {\n    type: Number,\n    default: 0,\n    required: true\n  },\n  rating: {\n    type: Number,\n    default: 0.0,\n    required: true\n  },\n  numReviews: {\n    type: Number,\n    default: 0,\n    required: true\n  },\n  reviews: [reviewSchema]\n}, {\n  timestamps: true\n});\nconst Product = _mongoose.default.model('Product', productSchema);\nvar _default = Product;\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJyZXZpZXdTY2hlbWEiLCJtb25nb29zZSIsIlNjaGVtYSIsInVzZXIiLCJ0eXBlIiwiVHlwZXMiLCJPYmplY3RJZCIsInJlZiIsInJlcXVpcmVkIiwibmFtZSIsIlN0cmluZyIsInJhdGluZyIsIk51bWJlciIsImRlZmF1bHQiLCJtaW4iLCJtYXgiLCJjb21tZW50IiwidGltZXN0YW1wcyIsInByb2R1Y3RTY2hlbWEiLCJkZXNjcmlwdGlvbiIsImNhdGVnb3J5IiwiYnJhbmQiLCJpbWFnZSIsInByaWNlIiwiY291bnRJblN0b2NrIiwibnVtUmV2aWV3cyIsInJldmlld3MiLCJQcm9kdWN0IiwibW9kZWwiXSwic291cmNlUm9vdCI6Ii9Vc2Vycy90aGlhZ28vRGV2L3dvcmtzcGFjZS9DYWRyZSBDYXJ0b24gZS1jb21tZXJjZS9iYWNrZW5kL21vZGVscy8iLCJzb3VyY2VzIjpbInByb2R1Y3RNb2RlbC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgbW9uZ29vc2UgZnJvbSAnbW9uZ29vc2UnO1xuXG5jb25zdCByZXZpZXdTY2hlbWEgPSBuZXcgbW9uZ29vc2UuU2NoZW1hKFxuICB7XG4gICAgdXNlcjogeyB0eXBlOiBtb25nb29zZS5TY2hlbWEuVHlwZXMuT2JqZWN0SWQsIHJlZjogJ1VzZXInLCByZXF1aXJlZDogdHJ1ZSB9LFxuICAgIG5hbWU6IHsgdHlwZTogU3RyaW5nLCByZXF1aXJlZDogdHJ1ZSB9LFxuICAgIHJhdGluZzoge1xuICAgICAgdHlwZTogTnVtYmVyLFxuICAgICAgcmVxdWlyZWQ6IHRydWUsXG4gICAgICBkZWZhdWx0OiAwLFxuICAgICAgbWluOiAwLFxuICAgICAgbWF4OiA1LFxuICAgIH0sXG4gICAgY29tbWVudDogeyB0eXBlOiBTdHJpbmcsIHJlcXVpcmVkOiB0cnVlIH0sXG4gIH0sXG4gIHsgdGltZXN0YW1wczogdHJ1ZSB9XG4pO1xuXG5jb25zdCBwcm9kdWN0U2NoZW1hID0gbmV3IG1vbmdvb3NlLlNjaGVtYShcbiAge1xuICAgIG5hbWU6IHsgdHlwZTogU3RyaW5nLCByZXF1aXJlZDogdHJ1ZSB9LFxuICAgIGRlc2NyaXB0aW9uOiB7IHR5cGU6IFN0cmluZywgcmVxdWlyZWQ6IHRydWUgfSxcbiAgICBjYXRlZ29yeTogeyB0eXBlOiBTdHJpbmcsIHJlcXVpcmVkOiB0cnVlIH0sXG4gICAgYnJhbmQ6IHsgdHlwZTogU3RyaW5nLCByZXF1aXJlZDogdHJ1ZSB9LFxuICAgIGltYWdlOiB7IHR5cGU6IFN0cmluZywgcmVxdWlyZWQ6IHRydWUgfSxcbiAgICBwcmljZTogeyB0eXBlOiBOdW1iZXIsIGRlZmF1bHQ6IDAuMCwgcmVxdWlyZWQ6IHRydWUgfSxcbiAgICBjb3VudEluU3RvY2s6IHsgdHlwZTogTnVtYmVyLCBkZWZhdWx0OiAwLCByZXF1aXJlZDogdHJ1ZSB9LFxuICAgIHJhdGluZzogeyB0eXBlOiBOdW1iZXIsIGRlZmF1bHQ6IDAuMCwgcmVxdWlyZWQ6IHRydWUgfSxcbiAgICBudW1SZXZpZXdzOiB7IHR5cGU6IE51bWJlciwgZGVmYXVsdDogMCwgcmVxdWlyZWQ6IHRydWUgfSxcbiAgICByZXZpZXdzOiBbcmV2aWV3U2NoZW1hXSxcbiAgfSxcbiAgeyB0aW1lc3RhbXBzOiB0cnVlIH1cbik7XG5jb25zdCBQcm9kdWN0ID0gbW9uZ29vc2UubW9kZWwoJ1Byb2R1Y3QnLCBwcm9kdWN0U2NoZW1hKTtcbmV4cG9ydCBkZWZhdWx0IFByb2R1Y3Q7XG4iXSwibWFwcGluZ3MiOiI7Ozs7OztBQUFBO0FBQWdDO0FBRWhDLE1BQU1BLFlBQVksR0FBRyxJQUFJQyxpQkFBUSxDQUFDQyxNQUFNLENBQ3RDO0VBQ0VDLElBQUksRUFBRTtJQUFFQyxJQUFJLEVBQUVILGlCQUFRLENBQUNDLE1BQU0sQ0FBQ0csS0FBSyxDQUFDQyxRQUFRO0lBQUVDLEdBQUcsRUFBRSxNQUFNO0lBQUVDLFFBQVEsRUFBRTtFQUFLLENBQUM7RUFDM0VDLElBQUksRUFBRTtJQUFFTCxJQUFJLEVBQUVNLE1BQU07SUFBRUYsUUFBUSxFQUFFO0VBQUssQ0FBQztFQUN0Q0csTUFBTSxFQUFFO0lBQ05QLElBQUksRUFBRVEsTUFBTTtJQUNaSixRQUFRLEVBQUUsSUFBSTtJQUNkSyxPQUFPLEVBQUUsQ0FBQztJQUNWQyxHQUFHLEVBQUUsQ0FBQztJQUNOQyxHQUFHLEVBQUU7RUFDUCxDQUFDO0VBQ0RDLE9BQU8sRUFBRTtJQUFFWixJQUFJLEVBQUVNLE1BQU07SUFBRUYsUUFBUSxFQUFFO0VBQUs7QUFDMUMsQ0FBQyxFQUNEO0VBQUVTLFVBQVUsRUFBRTtBQUFLLENBQUMsQ0FDckI7QUFFRCxNQUFNQyxhQUFhLEdBQUcsSUFBSWpCLGlCQUFRLENBQUNDLE1BQU0sQ0FDdkM7RUFDRU8sSUFBSSxFQUFFO0lBQUVMLElBQUksRUFBRU0sTUFBTTtJQUFFRixRQUFRLEVBQUU7RUFBSyxDQUFDO0VBQ3RDVyxXQUFXLEVBQUU7SUFBRWYsSUFBSSxFQUFFTSxNQUFNO0lBQUVGLFFBQVEsRUFBRTtFQUFLLENBQUM7RUFDN0NZLFFBQVEsRUFBRTtJQUFFaEIsSUFBSSxFQUFFTSxNQUFNO0lBQUVGLFFBQVEsRUFBRTtFQUFLLENBQUM7RUFDMUNhLEtBQUssRUFBRTtJQUFFakIsSUFBSSxFQUFFTSxNQUFNO0lBQUVGLFFBQVEsRUFBRTtFQUFLLENBQUM7RUFDdkNjLEtBQUssRUFBRTtJQUFFbEIsSUFBSSxFQUFFTSxNQUFNO0lBQUVGLFFBQVEsRUFBRTtFQUFLLENBQUM7RUFDdkNlLEtBQUssRUFBRTtJQUFFbkIsSUFBSSxFQUFFUSxNQUFNO0lBQUVDLE9BQU8sRUFBRSxHQUFHO0lBQUVMLFFBQVEsRUFBRTtFQUFLLENBQUM7RUFDckRnQixZQUFZLEVBQUU7SUFBRXBCLElBQUksRUFBRVEsTUFBTTtJQUFFQyxPQUFPLEVBQUUsQ0FBQztJQUFFTCxRQUFRLEVBQUU7RUFBSyxDQUFDO0VBQzFERyxNQUFNLEVBQUU7SUFBRVAsSUFBSSxFQUFFUSxNQUFNO0lBQUVDLE9BQU8sRUFBRSxHQUFHO0lBQUVMLFFBQVEsRUFBRTtFQUFLLENBQUM7RUFDdERpQixVQUFVLEVBQUU7SUFBRXJCLElBQUksRUFBRVEsTUFBTTtJQUFFQyxPQUFPLEVBQUUsQ0FBQztJQUFFTCxRQUFRLEVBQUU7RUFBSyxDQUFDO0VBQ3hEa0IsT0FBTyxFQUFFLENBQUMxQixZQUFZO0FBQ3hCLENBQUMsRUFDRDtFQUFFaUIsVUFBVSxFQUFFO0FBQUssQ0FBQyxDQUNyQjtBQUNELE1BQU1VLE9BQU8sR0FBRzFCLGlCQUFRLENBQUMyQixLQUFLLENBQUMsU0FBUyxFQUFFVixhQUFhLENBQUM7QUFBQyxlQUMxQ1MsT0FBTztBQUFBIn0=","map":{"version":3,"names":["reviewSchema","mongoose","Schema","user","type","Types","ObjectId","ref","required","name","String","rating","Number","default","min","max","comment","timestamps","productSchema","description","category","brand","image","price","countInStock","numReviews","reviews","Product","model"],"sourceRoot":"/Users/thiago/Dev/workspace/Cadre Carton e-commerce/backend/models/","sources":["productModel.js"],"sourcesContent":["import mongoose from 'mongoose';\n\nconst reviewSchema = new mongoose.Schema(\n  {\n    user: { type: mongoose.Schema.Types.ObjectId, ref: 'User', required: true },\n    name: { type: String, required: true },\n    rating: {\n      type: Number,\n      required: true,\n      default: 0,\n      min: 0,\n      max: 5,\n    },\n    comment: { type: String, required: true },\n  },\n  { timestamps: true }\n);\n\nconst productSchema = new mongoose.Schema(\n  {\n    name: { type: String, required: true },\n    description: { type: String, required: true },\n    category: { type: String, required: true },\n    brand: { type: String, required: true },\n    image: { type: String, required: true },\n    price: { type: Number, default: 0.0, required: true },\n    countInStock: { type: Number, default: 0, required: true },\n    rating: { type: Number, default: 0.0, required: true },\n    numReviews: { type: Number, default: 0, required: true },\n    reviews: [reviewSchema],\n  },\n  { timestamps: true }\n);\nconst Product = mongoose.model('Product', productSchema);\nexport default Product;\n"],"mappings":";;;;;;AAAA;AAAgC;AAEhC,MAAMA,YAAY,GAAG,IAAIC,iBAAQ,CAACC,MAAM,CACtC;EACEC,IAAI,EAAE;IAAEC,IAAI,EAAEH,iBAAQ,CAACC,MAAM,CAACG,KAAK,CAACC,QAAQ;IAAEC,GAAG,EAAE,MAAM;IAAEC,QAAQ,EAAE;EAAK,CAAC;EAC3EC,IAAI,EAAE;IAAEL,IAAI,EAAEM,MAAM;IAAEF,QAAQ,EAAE;EAAK,CAAC;EACtCG,MAAM,EAAE;IACNP,IAAI,EAAEQ,MAAM;IACZJ,QAAQ,EAAE,IAAI;IACdK,OAAO,EAAE,CAAC;IACVC,GAAG,EAAE,CAAC;IACNC,GAAG,EAAE;EACP,CAAC;EACDC,OAAO,EAAE;IAAEZ,IAAI,EAAEM,MAAM;IAAEF,QAAQ,EAAE;EAAK;AAC1C,CAAC,EACD;EAAES,UAAU,EAAE;AAAK,CAAC,CACrB;AAED,MAAMC,aAAa,GAAG,IAAIjB,iBAAQ,CAACC,MAAM,CACvC;EACEO,IAAI,EAAE;IAAEL,IAAI,EAAEM,MAAM;IAAEF,QAAQ,EAAE;EAAK,CAAC;EACtCW,WAAW,EAAE;IAAEf,IAAI,EAAEM,MAAM;IAAEF,QAAQ,EAAE;EAAK,CAAC;EAC7CY,QAAQ,EAAE;IAAEhB,IAAI,EAAEM,MAAM;IAAEF,QAAQ,EAAE;EAAK,CAAC;EAC1Ca,KAAK,EAAE;IAAEjB,IAAI,EAAEM,MAAM;IAAEF,QAAQ,EAAE;EAAK,CAAC;EACvCc,KAAK,EAAE;IAAElB,IAAI,EAAEM,MAAM;IAAEF,QAAQ,EAAE;EAAK,CAAC;EACvCe,KAAK,EAAE;IAAEnB,IAAI,EAAEQ,MAAM;IAAEC,OAAO,EAAE,GAAG;IAAEL,QAAQ,EAAE;EAAK,CAAC;EACrDgB,YAAY,EAAE;IAAEpB,IAAI,EAAEQ,MAAM;IAAEC,OAAO,EAAE,CAAC;IAAEL,QAAQ,EAAE;EAAK,CAAC;EAC1DG,MAAM,EAAE;IAAEP,IAAI,EAAEQ,MAAM;IAAEC,OAAO,EAAE,GAAG;IAAEL,QAAQ,EAAE;EAAK,CAAC;EACtDiB,UAAU,EAAE;IAAErB,IAAI,EAAEQ,MAAM;IAAEC,OAAO,EAAE,CAAC;IAAEL,QAAQ,EAAE;EAAK,CAAC;EACxDkB,OAAO,EAAE,CAAC1B,YAAY;AACxB,CAAC,EACD;EAAEiB,UAAU,EAAE;AAAK,CAAC,CACrB;AACD,MAAMU,OAAO,GAAG1B,iBAAQ,CAAC2B,KAAK,CAAC,SAAS,EAAEV,aAAa,CAAC;AAAC,eAC1CS,OAAO;AAAA"}},"mtime":1667545018945},"{\"assumptions\":{},\"sourceRoot\":\"/Users/thiago/Dev/workspace/Cadre Carton e-commerce/backend/routers/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/thiago/Dev/workspace/Cadre Carton e-commerce\",\"filename\":\"/Users/thiago/Dev/workspace/Cadre Carton e-commerce/backend/routers/uploadRouter.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/thiago/Dev/workspace/Cadre Carton e-commerce\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.19.6:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _express = _interopRequireDefault(require(\"express\"));\nvar _multer = _interopRequireDefault(require(\"multer\"));\nvar _utils = require(\"../utils\");\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\nconst storage = _multer.default.diskStorage({\n  destination(req, file, cb) {\n    cb(null, 'uploads/');\n  },\n  filename(req, file, cb) {\n    cb(null, `${Date.now()}.jpg`);\n  }\n});\nconst upload = (0, _multer.default)({\n  storage\n});\nconst uploadRouter = _express.default.Router();\nuploadRouter.post('/', _utils.isAuth, _utils.isAdmin, upload.single('image'), (req, res) => {\n  res.status(201).send({\n    image: `/${req.file.path}`\n  });\n});\nvar _default = uploadRouter;\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJzdG9yYWdlIiwibXVsdGVyIiwiZGlza1N0b3JhZ2UiLCJkZXN0aW5hdGlvbiIsInJlcSIsImZpbGUiLCJjYiIsImZpbGVuYW1lIiwiRGF0ZSIsIm5vdyIsInVwbG9hZCIsInVwbG9hZFJvdXRlciIsImV4cHJlc3MiLCJSb3V0ZXIiLCJwb3N0IiwiaXNBdXRoIiwiaXNBZG1pbiIsInNpbmdsZSIsInJlcyIsInN0YXR1cyIsInNlbmQiLCJpbWFnZSIsInBhdGgiXSwic291cmNlUm9vdCI6Ii9Vc2Vycy90aGlhZ28vRGV2L3dvcmtzcGFjZS9DYWRyZSBDYXJ0b24gZS1jb21tZXJjZS9iYWNrZW5kL3JvdXRlcnMvIiwic291cmNlcyI6WyJ1cGxvYWRSb3V0ZXIuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGV4cHJlc3MgZnJvbSAnZXhwcmVzcyc7XG5pbXBvcnQgbXVsdGVyIGZyb20gJ211bHRlcic7XG5pbXBvcnQgeyBpc0F1dGgsIGlzQWRtaW4gfSBmcm9tICcuLi91dGlscyc7XG5cbmNvbnN0IHN0b3JhZ2UgPSBtdWx0ZXIuZGlza1N0b3JhZ2Uoe1xuICBkZXN0aW5hdGlvbihyZXEsIGZpbGUsIGNiKSB7XG4gICAgY2IobnVsbCwgJ3VwbG9hZHMvJyk7XG4gIH0sXG4gIGZpbGVuYW1lKHJlcSwgZmlsZSwgY2IpIHtcbiAgICBjYihudWxsLCBgJHtEYXRlLm5vdygpfS5qcGdgKTtcbiAgfSxcbn0pO1xuXG5jb25zdCB1cGxvYWQgPSBtdWx0ZXIoeyBzdG9yYWdlIH0pO1xuY29uc3QgdXBsb2FkUm91dGVyID0gZXhwcmVzcy5Sb3V0ZXIoKTtcblxudXBsb2FkUm91dGVyLnBvc3QoJy8nLCBpc0F1dGgsIGlzQWRtaW4sIHVwbG9hZC5zaW5nbGUoJ2ltYWdlJyksIChyZXEsIHJlcykgPT4ge1xuICByZXMuc3RhdHVzKDIwMSkuc2VuZCh7IGltYWdlOiBgLyR7cmVxLmZpbGUucGF0aH1gIH0pO1xufSk7XG5leHBvcnQgZGVmYXVsdCB1cGxvYWRSb3V0ZXI7XG4iXSwibWFwcGluZ3MiOiI7Ozs7OztBQUFBO0FBQ0E7QUFDQTtBQUEyQztBQUUzQyxNQUFNQSxPQUFPLEdBQUdDLGVBQU0sQ0FBQ0MsV0FBVyxDQUFDO0VBQ2pDQyxXQUFXLENBQUNDLEdBQUcsRUFBRUMsSUFBSSxFQUFFQyxFQUFFLEVBQUU7SUFDekJBLEVBQUUsQ0FBQyxJQUFJLEVBQUUsVUFBVSxDQUFDO0VBQ3RCLENBQUM7RUFDREMsUUFBUSxDQUFDSCxHQUFHLEVBQUVDLElBQUksRUFBRUMsRUFBRSxFQUFFO0lBQ3RCQSxFQUFFLENBQUMsSUFBSSxFQUFHLEdBQUVFLElBQUksQ0FBQ0MsR0FBRyxFQUFHLE1BQUssQ0FBQztFQUMvQjtBQUNGLENBQUMsQ0FBQztBQUVGLE1BQU1DLE1BQU0sR0FBRyxJQUFBVCxlQUFNLEVBQUM7RUFBRUQ7QUFBUSxDQUFDLENBQUM7QUFDbEMsTUFBTVcsWUFBWSxHQUFHQyxnQkFBTyxDQUFDQyxNQUFNLEVBQUU7QUFFckNGLFlBQVksQ0FBQ0csSUFBSSxDQUFDLEdBQUcsRUFBRUMsYUFBTSxFQUFFQyxjQUFPLEVBQUVOLE1BQU0sQ0FBQ08sTUFBTSxDQUFDLE9BQU8sQ0FBQyxFQUFFLENBQUNiLEdBQUcsRUFBRWMsR0FBRyxLQUFLO0VBQzVFQSxHQUFHLENBQUNDLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQ0MsSUFBSSxDQUFDO0lBQUVDLEtBQUssRUFBRyxJQUFHakIsR0FBRyxDQUFDQyxJQUFJLENBQUNpQixJQUFLO0VBQUUsQ0FBQyxDQUFDO0FBQ3RELENBQUMsQ0FBQztBQUFDLGVBQ1lYLFlBQVk7QUFBQSJ9","map":{"version":3,"names":["storage","multer","diskStorage","destination","req","file","cb","filename","Date","now","upload","uploadRouter","express","Router","post","isAuth","isAdmin","single","res","status","send","image","path"],"sourceRoot":"/Users/thiago/Dev/workspace/Cadre Carton e-commerce/backend/routers/","sources":["uploadRouter.js"],"sourcesContent":["import express from 'express';\nimport multer from 'multer';\nimport { isAuth, isAdmin } from '../utils';\n\nconst storage = multer.diskStorage({\n  destination(req, file, cb) {\n    cb(null, 'uploads/');\n  },\n  filename(req, file, cb) {\n    cb(null, `${Date.now()}.jpg`);\n  },\n});\n\nconst upload = multer({ storage });\nconst uploadRouter = express.Router();\n\nuploadRouter.post('/', isAuth, isAdmin, upload.single('image'), (req, res) => {\n  res.status(201).send({ image: `/${req.file.path}` });\n});\nexport default uploadRouter;\n"],"mappings":";;;;;;AAAA;AACA;AACA;AAA2C;AAE3C,MAAMA,OAAO,GAAGC,eAAM,CAACC,WAAW,CAAC;EACjCC,WAAW,CAACC,GAAG,EAAEC,IAAI,EAAEC,EAAE,EAAE;IACzBA,EAAE,CAAC,IAAI,EAAE,UAAU,CAAC;EACtB,CAAC;EACDC,QAAQ,CAACH,GAAG,EAAEC,IAAI,EAAEC,EAAE,EAAE;IACtBA,EAAE,CAAC,IAAI,EAAG,GAAEE,IAAI,CAACC,GAAG,EAAG,MAAK,CAAC;EAC/B;AACF,CAAC,CAAC;AAEF,MAAMC,MAAM,GAAG,IAAAT,eAAM,EAAC;EAAED;AAAQ,CAAC,CAAC;AAClC,MAAMW,YAAY,GAAGC,gBAAO,CAACC,MAAM,EAAE;AAErCF,YAAY,CAACG,IAAI,CAAC,GAAG,EAAEC,aAAM,EAAEC,cAAO,EAAEN,MAAM,CAACO,MAAM,CAAC,OAAO,CAAC,EAAE,CAACb,GAAG,EAAEc,GAAG,KAAK;EAC5EA,GAAG,CAACC,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;IAAEC,KAAK,EAAG,IAAGjB,GAAG,CAACC,IAAI,CAACiB,IAAK;EAAE,CAAC,CAAC;AACtD,CAAC,CAAC;AAAC,eACYX,YAAY;AAAA"}},"mtime":1667717407673},"{\"assumptions\":{},\"sourceRoot\":\"/Users/thiago/Dev/workspace/Cadre Carton e-commerce/backend/routers/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/thiago/Dev/workspace/Cadre Carton e-commerce\",\"filename\":\"/Users/thiago/Dev/workspace/Cadre Carton e-commerce/backend/routers/productRouter.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/thiago/Dev/workspace/Cadre Carton e-commerce\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.19.6:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _express = _interopRequireDefault(require(\"express\"));\nvar _expressAsyncHandler = _interopRequireDefault(require(\"express-async-handler\"));\nvar _utils = require(\"../utils\");\nvar _productModel = _interopRequireDefault(require(\"../models/productModel\"));\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\nconst productRouter = _express.default.Router();\nproductRouter.get('/', (0, _expressAsyncHandler.default)(async (req, res) => {\n  const searchKeyword = req.query.searchKeyword ? {\n    name: {\n      $regex: req.query.searchKeyword,\n      $options: 'i'\n    }\n  } : {};\n  const products = await _productModel.default.find({\n    ...searchKeyword\n  });\n  res.send(products);\n}));\nproductRouter.get('/:id', (0, _expressAsyncHandler.default)(async (req, res) => {\n  const product = await _productModel.default.findById(req.params.id);\n  res.send(product);\n}));\nproductRouter.post('/', _utils.isAuth, _utils.isAdmin, (0, _expressAsyncHandler.default)(async (req, res) => {\n  const product = new _productModel.default({\n    name: 'nom du produit',\n    description: 'description',\n    category: 'catégorie',\n    brand: 'marque',\n    image: '/images/product-1.jpg'\n  });\n  const createdProduct = await product.save();\n  if (createdProduct) {\n    res.status(201).send({\n      message: 'Produit créé',\n      product: createdProduct\n    });\n  } else {\n    res.status(500).send({\n      message: 'Erreur lors de la création du produit'\n    });\n  }\n}));\nproductRouter.put('/:id', _utils.isAuth, _utils.isAdmin, (0, _expressAsyncHandler.default)(async (req, res) => {\n  const productId = req.params.id;\n  const product = await _productModel.default.findById(productId);\n  if (product) {\n    product.name = req.body.name;\n    product.price = req.body.price;\n    product.image = req.body.image;\n    product.brand = req.body.brand;\n    product.category = req.body.category;\n    product.countInStock = req.body.countInStock;\n    product.description = req.body.description;\n    const updatedProduct = await product.save();\n    if (updatedProduct) {\n      res.send({\n        message: 'Produit mis à jour',\n        product: updatedProduct\n      });\n    } else {\n      res.status(500).send({\n        message: 'Erreur lors de la mise à jour du produit'\n      });\n    }\n  } else {\n    res.status(404).send({\n      message: 'Produit non trouvé'\n    });\n  }\n}));\nproductRouter.delete('/:id', _utils.isAuth, _utils.isAdmin, (0, _expressAsyncHandler.default)(async (req, res) => {\n  const product = await _productModel.default.findById(req.params.id);\n  if (product) {\n    const deletedProduct = await product.remove();\n    res.send({\n      message: 'Produit supprimé',\n      product: deletedProduct\n    });\n  } else {\n    res.status(404).send({\n      message: 'Produit non trouvé'\n    });\n  }\n}));\nproductRouter.post('/:id/reviews', _utils.isAuth, (0, _expressAsyncHandler.default)(async (req, res) => {\n  const product = await _productModel.default.findById(req.params.id);\n  if (product) {\n    const review = {\n      rating: req.body.rating,\n      comment: req.body.comment,\n      user: req.user._id,\n      name: req.user.name\n    };\n    product.reviews.push(review);\n    product.rating = product.reviews.reduce((a, c) => c.rating + a, 0) / product.reviews.length;\n    product.numReviews = product.reviews.length;\n    const updatedProduct = await product.save();\n    res.status(201).send({\n      message: 'Commentaire créé.',\n      data: updatedProduct.reviews[updatedProduct.reviews.length - 1]\n    });\n  } else {\n    throw Error('Product does not exist.');\n  }\n}));\nvar _default = productRouter;\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJwcm9kdWN0Um91dGVyIiwiZXhwcmVzcyIsIlJvdXRlciIsImdldCIsImV4cHJlc3NBc3luY0hhbmRsZXIiLCJyZXEiLCJyZXMiLCJzZWFyY2hLZXl3b3JkIiwicXVlcnkiLCJuYW1lIiwiJHJlZ2V4IiwiJG9wdGlvbnMiLCJwcm9kdWN0cyIsIlByb2R1Y3QiLCJmaW5kIiwic2VuZCIsInByb2R1Y3QiLCJmaW5kQnlJZCIsInBhcmFtcyIsImlkIiwicG9zdCIsImlzQXV0aCIsImlzQWRtaW4iLCJkZXNjcmlwdGlvbiIsImNhdGVnb3J5IiwiYnJhbmQiLCJpbWFnZSIsImNyZWF0ZWRQcm9kdWN0Iiwic2F2ZSIsInN0YXR1cyIsIm1lc3NhZ2UiLCJwdXQiLCJwcm9kdWN0SWQiLCJib2R5IiwicHJpY2UiLCJjb3VudEluU3RvY2siLCJ1cGRhdGVkUHJvZHVjdCIsImRlbGV0ZSIsImRlbGV0ZWRQcm9kdWN0IiwicmVtb3ZlIiwicmV2aWV3IiwicmF0aW5nIiwiY29tbWVudCIsInVzZXIiLCJfaWQiLCJyZXZpZXdzIiwicHVzaCIsInJlZHVjZSIsImEiLCJjIiwibGVuZ3RoIiwibnVtUmV2aWV3cyIsImRhdGEiLCJFcnJvciJdLCJzb3VyY2VSb290IjoiL1VzZXJzL3RoaWFnby9EZXYvd29ya3NwYWNlL0NhZHJlIENhcnRvbiBlLWNvbW1lcmNlL2JhY2tlbmQvcm91dGVycy8iLCJzb3VyY2VzIjpbInByb2R1Y3RSb3V0ZXIuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGV4cHJlc3MgZnJvbSAnZXhwcmVzcyc7XG5pbXBvcnQgZXhwcmVzc0FzeW5jSGFuZGxlciBmcm9tICdleHByZXNzLWFzeW5jLWhhbmRsZXInO1xuaW1wb3J0IHsgaXNBdXRoLCBpc0FkbWluIH0gZnJvbSAnLi4vdXRpbHMnO1xuaW1wb3J0IFByb2R1Y3QgZnJvbSAnLi4vbW9kZWxzL3Byb2R1Y3RNb2RlbCc7XG5cbmNvbnN0IHByb2R1Y3RSb3V0ZXIgPSBleHByZXNzLlJvdXRlcigpO1xucHJvZHVjdFJvdXRlci5nZXQoXG4gICcvJyxcbiAgZXhwcmVzc0FzeW5jSGFuZGxlcihhc3luYyAocmVxLCByZXMpID0+IHtcbiAgICBjb25zdCBzZWFyY2hLZXl3b3JkID0gcmVxLnF1ZXJ5LnNlYXJjaEtleXdvcmRcbiAgICAgID8ge1xuICAgICAgICAgIG5hbWU6IHtcbiAgICAgICAgICAgICRyZWdleDogcmVxLnF1ZXJ5LnNlYXJjaEtleXdvcmQsXG4gICAgICAgICAgICAkb3B0aW9uczogJ2knLFxuICAgICAgICAgIH0sXG4gICAgICAgIH1cbiAgICAgIDoge307XG4gICAgY29uc3QgcHJvZHVjdHMgPSBhd2FpdCBQcm9kdWN0LmZpbmQoeyAuLi5zZWFyY2hLZXl3b3JkIH0pO1xuICAgIHJlcy5zZW5kKHByb2R1Y3RzKTtcbiAgfSlcbik7XG5wcm9kdWN0Um91dGVyLmdldChcbiAgJy86aWQnLFxuICBleHByZXNzQXN5bmNIYW5kbGVyKGFzeW5jIChyZXEsIHJlcykgPT4ge1xuICAgIGNvbnN0IHByb2R1Y3QgPSBhd2FpdCBQcm9kdWN0LmZpbmRCeUlkKHJlcS5wYXJhbXMuaWQpO1xuICAgIHJlcy5zZW5kKHByb2R1Y3QpO1xuICB9KVxuKTtcbnByb2R1Y3RSb3V0ZXIucG9zdChcbiAgJy8nLFxuICBpc0F1dGgsXG4gIGlzQWRtaW4sXG4gIGV4cHJlc3NBc3luY0hhbmRsZXIoYXN5bmMgKHJlcSwgcmVzKSA9PiB7XG4gICAgY29uc3QgcHJvZHVjdCA9IG5ldyBQcm9kdWN0KHtcbiAgICAgIG5hbWU6ICdub20gZHUgcHJvZHVpdCcsXG4gICAgICBkZXNjcmlwdGlvbjogJ2Rlc2NyaXB0aW9uJyxcbiAgICAgIGNhdGVnb3J5OiAnY2F0w6lnb3JpZScsXG4gICAgICBicmFuZDogJ21hcnF1ZScsXG4gICAgICBpbWFnZTogJy9pbWFnZXMvcHJvZHVjdC0xLmpwZycsXG4gICAgfSk7XG4gICAgY29uc3QgY3JlYXRlZFByb2R1Y3QgPSBhd2FpdCBwcm9kdWN0LnNhdmUoKTtcbiAgICBpZiAoY3JlYXRlZFByb2R1Y3QpIHtcbiAgICAgIHJlc1xuICAgICAgICAuc3RhdHVzKDIwMSlcbiAgICAgICAgLnNlbmQoeyBtZXNzYWdlOiAnUHJvZHVpdCBjcsOpw6knLCBwcm9kdWN0OiBjcmVhdGVkUHJvZHVjdCB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmVzLnN0YXR1cyg1MDApLnNlbmQoeyBtZXNzYWdlOiAnRXJyZXVyIGxvcnMgZGUgbGEgY3LDqWF0aW9uIGR1IHByb2R1aXQnIH0pO1xuICAgIH1cbiAgfSlcbik7XG5wcm9kdWN0Um91dGVyLnB1dChcbiAgJy86aWQnLFxuICBpc0F1dGgsXG4gIGlzQWRtaW4sXG4gIGV4cHJlc3NBc3luY0hhbmRsZXIoYXN5bmMgKHJlcSwgcmVzKSA9PiB7XG4gICAgY29uc3QgcHJvZHVjdElkID0gcmVxLnBhcmFtcy5pZDtcbiAgICBjb25zdCBwcm9kdWN0ID0gYXdhaXQgUHJvZHVjdC5maW5kQnlJZChwcm9kdWN0SWQpO1xuICAgIGlmIChwcm9kdWN0KSB7XG4gICAgICBwcm9kdWN0Lm5hbWUgPSByZXEuYm9keS5uYW1lO1xuICAgICAgcHJvZHVjdC5wcmljZSA9IHJlcS5ib2R5LnByaWNlO1xuICAgICAgcHJvZHVjdC5pbWFnZSA9IHJlcS5ib2R5LmltYWdlO1xuICAgICAgcHJvZHVjdC5icmFuZCA9IHJlcS5ib2R5LmJyYW5kO1xuICAgICAgcHJvZHVjdC5jYXRlZ29yeSA9IHJlcS5ib2R5LmNhdGVnb3J5O1xuICAgICAgcHJvZHVjdC5jb3VudEluU3RvY2sgPSByZXEuYm9keS5jb3VudEluU3RvY2s7XG4gICAgICBwcm9kdWN0LmRlc2NyaXB0aW9uID0gcmVxLmJvZHkuZGVzY3JpcHRpb247XG4gICAgICBjb25zdCB1cGRhdGVkUHJvZHVjdCA9IGF3YWl0IHByb2R1Y3Quc2F2ZSgpO1xuICAgICAgaWYgKHVwZGF0ZWRQcm9kdWN0KSB7XG4gICAgICAgIHJlcy5zZW5kKHsgbWVzc2FnZTogJ1Byb2R1aXQgbWlzIMOgIGpvdXInLCBwcm9kdWN0OiB1cGRhdGVkUHJvZHVjdCB9KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJlcy5zdGF0dXMoNTAwKS5zZW5kKHsgbWVzc2FnZTogJ0VycmV1ciBsb3JzIGRlIGxhIG1pc2Ugw6Agam91ciBkdSBwcm9kdWl0JyB9KTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgcmVzLnN0YXR1cyg0MDQpLnNlbmQoeyBtZXNzYWdlOiAnUHJvZHVpdCBub24gdHJvdXbDqScgfSk7XG4gICAgfVxuICB9KVxuKTtcbnByb2R1Y3RSb3V0ZXIuZGVsZXRlKFxuICAnLzppZCcsXG4gIGlzQXV0aCxcbiAgaXNBZG1pbixcbiAgZXhwcmVzc0FzeW5jSGFuZGxlcihhc3luYyAocmVxLCByZXMpID0+IHtcbiAgICBjb25zdCBwcm9kdWN0ID0gYXdhaXQgUHJvZHVjdC5maW5kQnlJZChyZXEucGFyYW1zLmlkKTtcbiAgICBpZiAocHJvZHVjdCkge1xuICAgICAgY29uc3QgZGVsZXRlZFByb2R1Y3QgPSBhd2FpdCBwcm9kdWN0LnJlbW92ZSgpO1xuICAgICAgcmVzLnNlbmQoeyBtZXNzYWdlOiAnUHJvZHVpdCBzdXBwcmltw6knLCBwcm9kdWN0OiBkZWxldGVkUHJvZHVjdCB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmVzLnN0YXR1cyg0MDQpLnNlbmQoeyBtZXNzYWdlOiAnUHJvZHVpdCBub24gdHJvdXbDqScgfSk7XG4gICAgfVxuICB9KVxuKTtcbnByb2R1Y3RSb3V0ZXIucG9zdChcbiAgJy86aWQvcmV2aWV3cycsXG4gIGlzQXV0aCxcbiAgZXhwcmVzc0FzeW5jSGFuZGxlcihhc3luYyAocmVxLCByZXMpID0+IHtcbiAgICBjb25zdCBwcm9kdWN0ID0gYXdhaXQgUHJvZHVjdC5maW5kQnlJZChyZXEucGFyYW1zLmlkKTtcbiAgICBpZiAocHJvZHVjdCkge1xuICAgICAgY29uc3QgcmV2aWV3ID0ge1xuICAgICAgICByYXRpbmc6IHJlcS5ib2R5LnJhdGluZyxcbiAgICAgICAgY29tbWVudDogcmVxLmJvZHkuY29tbWVudCxcbiAgICAgICAgdXNlcjogcmVxLnVzZXIuX2lkLFxuICAgICAgICBuYW1lOiByZXEudXNlci5uYW1lLFxuICAgICAgfTtcbiAgICAgIHByb2R1Y3QucmV2aWV3cy5wdXNoKHJldmlldyk7XG4gICAgICBwcm9kdWN0LnJhdGluZyA9XG4gICAgICAgIHByb2R1Y3QucmV2aWV3cy5yZWR1Y2UoKGEsIGMpID0+IGMucmF0aW5nICsgYSwgMCkgL1xuICAgICAgICBwcm9kdWN0LnJldmlld3MubGVuZ3RoO1xuICAgICAgcHJvZHVjdC5udW1SZXZpZXdzID0gcHJvZHVjdC5yZXZpZXdzLmxlbmd0aDtcbiAgICAgIGNvbnN0IHVwZGF0ZWRQcm9kdWN0ID0gYXdhaXQgcHJvZHVjdC5zYXZlKCk7XG4gICAgICByZXMuc3RhdHVzKDIwMSkuc2VuZCh7XG4gICAgICAgIG1lc3NhZ2U6ICdDb21tZW50YWlyZSBjcsOpw6kuJyxcbiAgICAgICAgZGF0YTogdXBkYXRlZFByb2R1Y3QucmV2aWV3c1t1cGRhdGVkUHJvZHVjdC5yZXZpZXdzLmxlbmd0aCAtIDFdLFxuICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRocm93IEVycm9yKCdQcm9kdWN0IGRvZXMgbm90IGV4aXN0LicpO1xuICAgIH1cbiAgfSlcbik7XG5cbmV4cG9ydCBkZWZhdWx0IHByb2R1Y3RSb3V0ZXI7XG4iXSwibWFwcGluZ3MiOiI7Ozs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQTZDO0FBRTdDLE1BQU1BLGFBQWEsR0FBR0MsZ0JBQU8sQ0FBQ0MsTUFBTSxFQUFFO0FBQ3RDRixhQUFhLENBQUNHLEdBQUcsQ0FDZixHQUFHLEVBQ0gsSUFBQUMsNEJBQW1CLEVBQUMsT0FBT0MsR0FBRyxFQUFFQyxHQUFHLEtBQUs7RUFDdEMsTUFBTUMsYUFBYSxHQUFHRixHQUFHLENBQUNHLEtBQUssQ0FBQ0QsYUFBYSxHQUN6QztJQUNFRSxJQUFJLEVBQUU7TUFDSkMsTUFBTSxFQUFFTCxHQUFHLENBQUNHLEtBQUssQ0FBQ0QsYUFBYTtNQUMvQkksUUFBUSxFQUFF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","map":{"version":3,"names":["productRouter","express","Router","get","expressAsyncHandler","req","res","searchKeyword","query","name","$regex","$options","products","Product","find","send","product","findById","params","id","post","isAuth","isAdmin","description","category","brand","image","createdProduct","save","status","message","put","productId","body","price","countInStock","updatedProduct","delete","deletedProduct","remove","review","rating","comment","user","_id","reviews","push","reduce","a","c","length","numReviews","data","Error"],"sourceRoot":"/Users/thiago/Dev/workspace/Cadre Carton e-commerce/backend/routers/","sources":["productRouter.js"],"sourcesContent":["import express from 'express';\nimport expressAsyncHandler from 'express-async-handler';\nimport { isAuth, isAdmin } from '../utils';\nimport Product from '../models/productModel';\n\nconst productRouter = express.Router();\nproductRouter.get(\n  '/',\n  expressAsyncHandler(async (req, res) => {\n    const searchKeyword = req.query.searchKeyword\n      ? {\n          name: {\n            $regex: req.query.searchKeyword,\n            $options: 'i',\n          },\n        }\n      : {};\n    const products = await Product.find({ ...searchKeyword });\n    res.send(products);\n  })\n);\nproductRouter.get(\n  '/:id',\n  expressAsyncHandler(async (req, res) => {\n    const product = await Product.findById(req.params.id);\n    res.send(product);\n  })\n);\nproductRouter.post(\n  '/',\n  isAuth,\n  isAdmin,\n  expressAsyncHandler(async (req, res) => {\n    const product = new Product({\n      name: 'nom du produit',\n      description: 'description',\n      category: 'catégorie',\n      brand: 'marque',\n      image: '/images/product-1.jpg',\n    });\n    const createdProduct = await product.save();\n    if (createdProduct) {\n      res\n        .status(201)\n        .send({ message: 'Produit créé', product: createdProduct });\n    } else {\n      res.status(500).send({ message: 'Erreur lors de la création du produit' });\n    }\n  })\n);\nproductRouter.put(\n  '/:id',\n  isAuth,\n  isAdmin,\n  expressAsyncHandler(async (req, res) => {\n    const productId = req.params.id;\n    const product = await Product.findById(productId);\n    if (product) {\n      product.name = req.body.name;\n      product.price = req.body.price;\n      product.image = req.body.image;\n      product.brand = req.body.brand;\n      product.category = req.body.category;\n      product.countInStock = req.body.countInStock;\n      product.description = req.body.description;\n      const updatedProduct = await product.save();\n      if (updatedProduct) {\n        res.send({ message: 'Produit mis à jour', product: updatedProduct });\n      } else {\n        res.status(500).send({ message: 'Erreur lors de la mise à jour du produit' });\n      }\n    } else {\n      res.status(404).send({ message: 'Produit non trouvé' });\n    }\n  })\n);\nproductRouter.delete(\n  '/:id',\n  isAuth,\n  isAdmin,\n  expressAsyncHandler(async (req, res) => {\n    const product = await Product.findById(req.params.id);\n    if (product) {\n      const deletedProduct = await product.remove();\n      res.send({ message: 'Produit supprimé', product: deletedProduct });\n    } else {\n      res.status(404).send({ message: 'Produit non trouvé' });\n    }\n  })\n);\nproductRouter.post(\n  '/:id/reviews',\n  isAuth,\n  expressAsyncHandler(async (req, res) => {\n    const product = await Product.findById(req.params.id);\n    if (product) {\n      const review = {\n        rating: req.body.rating,\n        comment: req.body.comment,\n        user: req.user._id,\n        name: req.user.name,\n      };\n      product.reviews.push(review);\n      product.rating =\n        product.reviews.reduce((a, c) => c.rating + a, 0) /\n        product.reviews.length;\n      product.numReviews = product.reviews.length;\n      const updatedProduct = await product.save();\n      res.status(201).send({\n        message: 'Commentaire créé.',\n        data: updatedProduct.reviews[updatedProduct.reviews.length - 1],\n      });\n    } else {\n      throw Error('Product does not exist.');\n    }\n  })\n);\n\nexport default productRouter;\n"],"mappings":"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"}},"mtime":1669718145308},"{\"assumptions\":{},\"sourceRoot\":\"/Users/thiago/Dev/workspace/Cadre Carton e-commerce/backend/routers/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/thiago/Dev/workspace/Cadre Carton e-commerce\",\"filename\":\"/Users/thiago/Dev/workspace/Cadre Carton e-commerce/backend/routers/uploadRouter.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/thiago/Dev/workspace/Cadre Carton e-commerce\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.19.6:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _express = _interopRequireDefault(require(\"express\"));\nvar _multer = _interopRequireDefault(require(\"multer\"));\nvar _utils = require(\"../utils\");\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\nconst storage = _multer.default.diskStorage({\n  destination(req, file, cb) {\n    cb(null, 'uploads/');\n  },\n  filename(req, file, cb) {\n    cb(null, `${Date.now()}.jpg`);\n  }\n});\nconst upload = (0, _multer.default)({\n  storage\n});\nconst uploadRouter = _express.default.Router();\nuploadRouter.post('/', _utils.isAuth, _utils.isAdmin, upload.single('image'), (req, res) => {\n  res.status(201).send({\n    image: `/${req.file.path}`\n  });\n});\nvar _default = uploadRouter;\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJzdG9yYWdlIiwibXVsdGVyIiwiZGlza1N0b3JhZ2UiLCJkZXN0aW5hdGlvbiIsInJlcSIsImZpbGUiLCJjYiIsImZpbGVuYW1lIiwiRGF0ZSIsIm5vdyIsInVwbG9hZCIsInVwbG9hZFJvdXRlciIsImV4cHJlc3MiLCJSb3V0ZXIiLCJwb3N0IiwiaXNBdXRoIiwiaXNBZG1pbiIsInNpbmdsZSIsInJlcyIsInN0YXR1cyIsInNlbmQiLCJpbWFnZSIsInBhdGgiXSwic291cmNlUm9vdCI6Ii9Vc2Vycy90aGlhZ28vRGV2L3dvcmtzcGFjZS9DYWRyZSBDYXJ0b24gZS1jb21tZXJjZS9iYWNrZW5kL3JvdXRlcnMvIiwic291cmNlcyI6WyJ1cGxvYWRSb3V0ZXIuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGV4cHJlc3MgZnJvbSAnZXhwcmVzcyc7XG5pbXBvcnQgbXVsdGVyIGZyb20gJ211bHRlcic7XG5pbXBvcnQgeyBpc0F1dGgsIGlzQWRtaW4gfSBmcm9tICcuLi91dGlscyc7XG5cbmNvbnN0IHN0b3JhZ2UgPSBtdWx0ZXIuZGlza1N0b3JhZ2Uoe1xuICBkZXN0aW5hdGlvbihyZXEsIGZpbGUsIGNiKSB7XG4gICAgY2IobnVsbCwgJ3VwbG9hZHMvJyk7XG4gIH0sXG4gIGZpbGVuYW1lKHJlcSwgZmlsZSwgY2IpIHtcbiAgICBjYihudWxsLCBgJHtEYXRlLm5vdygpfS5qcGdgKTtcbiAgfSxcbn0pO1xuXG5jb25zdCB1cGxvYWQgPSBtdWx0ZXIoeyBzdG9yYWdlIH0pO1xuY29uc3QgdXBsb2FkUm91dGVyID0gZXhwcmVzcy5Sb3V0ZXIoKTtcblxudXBsb2FkUm91dGVyLnBvc3QoJy8nLCBpc0F1dGgsIGlzQWRtaW4sIHVwbG9hZC5zaW5nbGUoJ2ltYWdlJyksIChyZXEsIHJlcykgPT4ge1xuICByZXMuc3RhdHVzKDIwMSkuc2VuZCh7IGltYWdlOiBgLyR7cmVxLmZpbGUucGF0aH1gIH0pO1xufSk7XG5leHBvcnQgZGVmYXVsdCB1cGxvYWRSb3V0ZXI7XG4iXSwibWFwcGluZ3MiOiI7Ozs7OztBQUFBO0FBQ0E7QUFDQTtBQUEyQztBQUUzQyxNQUFNQSxPQUFPLEdBQUdDLGVBQU0sQ0FBQ0MsV0FBVyxDQUFDO0VBQ2pDQyxXQUFXLENBQUNDLEdBQUcsRUFBRUMsSUFBSSxFQUFFQyxFQUFFLEVBQUU7SUFDekJBLEVBQUUsQ0FBQyxJQUFJLEVBQUUsVUFBVSxDQUFDO0VBQ3RCLENBQUM7RUFDREMsUUFBUSxDQUFDSCxHQUFHLEVBQUVDLElBQUksRUFBRUMsRUFBRSxFQUFFO0lBQ3RCQSxFQUFFLENBQUMsSUFBSSxFQUFHLEdBQUVFLElBQUksQ0FBQ0MsR0FBRyxFQUFHLE1BQUssQ0FBQztFQUMvQjtBQUNGLENBQUMsQ0FBQztBQUVGLE1BQU1DLE1BQU0sR0FBRyxJQUFBVCxlQUFNLEVBQUM7RUFBRUQ7QUFBUSxDQUFDLENBQUM7QUFDbEMsTUFBTVcsWUFBWSxHQUFHQyxnQkFBTyxDQUFDQyxNQUFNLEVBQUU7QUFFckNGLFlBQVksQ0FBQ0csSUFBSSxDQUFDLEdBQUcsRUFBRUMsYUFBTSxFQUFFQyxjQUFPLEVBQUVOLE1BQU0sQ0FBQ08sTUFBTSxDQUFDLE9BQU8sQ0FBQyxFQUFFLENBQUNiLEdBQUcsRUFBRWMsR0FBRyxLQUFLO0VBQzVFQSxHQUFHLENBQUNDLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQ0MsSUFBSSxDQUFDO0lBQUVDLEtBQUssRUFBRyxJQUFHakIsR0FBRyxDQUFDQyxJQUFJLENBQUNpQixJQUFLO0VBQUUsQ0FBQyxDQUFDO0FBQ3RELENBQUMsQ0FBQztBQUFDLGVBQ1lYLFlBQVk7QUFBQSJ9","map":{"version":3,"names":["storage","multer","diskStorage","destination","req","file","cb","filename","Date","now","upload","uploadRouter","express","Router","post","isAuth","isAdmin","single","res","status","send","image","path"],"sourceRoot":"/Users/thiago/Dev/workspace/Cadre Carton e-commerce/backend/routers/","sources":["uploadRouter.js"],"sourcesContent":["import express from 'express';\nimport multer from 'multer';\nimport { isAuth, isAdmin } from '../utils';\n\nconst storage = multer.diskStorage({\n  destination(req, file, cb) {\n    cb(null, 'uploads/');\n  },\n  filename(req, file, cb) {\n    cb(null, `${Date.now()}.jpg`);\n  },\n});\n\nconst upload = multer({ storage });\nconst uploadRouter = express.Router();\n\nuploadRouter.post('/', isAuth, isAdmin, upload.single('image'), (req, res) => {\n  res.status(201).send({ image: `/${req.file.path}` });\n});\nexport default uploadRouter;\n"],"mappings":";;;;;;AAAA;AACA;AACA;AAA2C;AAE3C,MAAMA,OAAO,GAAGC,eAAM,CAACC,WAAW,CAAC;EACjCC,WAAW,CAACC,GAAG,EAAEC,IAAI,EAAEC,EAAE,EAAE;IACzBA,EAAE,CAAC,IAAI,EAAE,UAAU,CAAC;EACtB,CAAC;EACDC,QAAQ,CAACH,GAAG,EAAEC,IAAI,EAAEC,EAAE,EAAE;IACtBA,EAAE,CAAC,IAAI,EAAG,GAAEE,IAAI,CAACC,GAAG,EAAG,MAAK,CAAC;EAC/B;AACF,CAAC,CAAC;AAEF,MAAMC,MAAM,GAAG,IAAAT,eAAM,EAAC;EAAED;AAAQ,CAAC,CAAC;AAClC,MAAMW,YAAY,GAAGC,gBAAO,CAACC,MAAM,EAAE;AAErCF,YAAY,CAACG,IAAI,CAAC,GAAG,EAAEC,aAAM,EAAEC,cAAO,EAAEN,MAAM,CAACO,MAAM,CAAC,OAAO,CAAC,EAAE,CAACb,GAAG,EAAEc,GAAG,KAAK;EAC5EA,GAAG,CAACC,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;IAAEC,KAAK,EAAG,IAAGjB,GAAG,CAACC,IAAI,CAACiB,IAAK;EAAE,CAAC,CAAC;AACtD,CAAC,CAAC;AAAC,eACYX,YAAY;AAAA"}},"mtime":1667717407673},"{\"assumptions\":{},\"sourceRoot\":\"/Users/thiago/Dev/workspace/Cadre Carton e-commerce/backend/routers/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/thiago/Dev/workspace/Cadre Carton e-commerce\",\"filename\":\"/Users/thiago/Dev/workspace/Cadre Carton e-commerce/backend/routers/productRouter.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/thiago/Dev/workspace/Cadre Carton e-commerce\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.19.6:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _express = _interopRequireDefault(require(\"express\"));\nvar _expressAsyncHandler = _interopRequireDefault(require(\"express-async-handler\"));\nvar _utils = require(\"../utils\");\nvar _productModel = _interopRequireDefault(require(\"../models/productModel\"));\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\nconst productRouter = _express.default.Router();\nproductRouter.get('/', (0, _expressAsyncHandler.default)(async (req, res) => {\n  const searchKeyword = req.query.searchKeyword ? {\n    name: {\n      $regex: req.query.searchKeyword,\n      $options: 'i'\n    }\n  } : {};\n  const products = await _productModel.default.find({\n    ...searchKeyword\n  });\n  res.send(products);\n}));\nproductRouter.get('/:id', (0, _expressAsyncHandler.default)(async (req, res) => {\n  const product = await _productModel.default.findById(req.params.id);\n  res.send(product);\n}));\nproductRouter.post('/', _utils.isAuth, _utils.isAdmin, (0, _expressAsyncHandler.default)(async (req, res) => {\n  const product = new _productModel.default({\n    name: 'nom du produit',\n    description: 'description',\n    category: 'catégorie',\n    brand: 'marque',\n    image: '/images/product-1.jpg'\n  });\n  const createdProduct = await product.save();\n  if (createdProduct) {\n    res.status(201).send({\n      message: 'Produit créé',\n      product: createdProduct\n    });\n  } else {\n    res.status(500).send({\n      message: 'Erreur lors de la création du produit'\n    });\n  }\n}));\nproductRouter.put('/:id', _utils.isAuth, _utils.isAdmin, (0, _expressAsyncHandler.default)(async (req, res) => {\n  const productId = req.params.id;\n  const product = await _productModel.default.findById(productId);\n  if (product) {\n    product.name = req.body.name;\n    product.price = req.body.price;\n    product.image = req.body.image;\n    product.brand = req.body.brand;\n    product.category = req.body.category;\n    product.countInStock = req.body.countInStock;\n    product.description = req.body.description;\n    const updatedProduct = await product.save();\n    if (updatedProduct) {\n      res.send({\n        message: 'Produit mis à jour',\n        product: updatedProduct\n      });\n    } else {\n      res.status(500).send({\n        message: 'Erreur lors de la mise à jour du produit'\n      });\n    }\n  } else {\n    res.status(404).send({\n      message: 'Produit non trouvé'\n    });\n  }\n}));\nproductRouter.delete('/:id', _utils.isAuth, _utils.isAdmin, (0, _expressAsyncHandler.default)(async (req, res) => {\n  const product = await _productModel.default.findById(req.params.id);\n  if (product) {\n    const deletedProduct = await product.remove();\n    res.send({\n      message: 'Produit supprimé',\n      product: deletedProduct\n    });\n  } else {\n    res.status(404).send({\n      message: 'Produit non trouvé'\n    });\n  }\n}));\nproductRouter.post('/:id/reviews', _utils.isAuth, (0, _expressAsyncHandler.default)(async (req, res) => {\n  const product = await _productModel.default.findById(req.params.id);\n  if (product) {\n    const review = {\n      rating: req.body.rating,\n      comment: req.body.comment,\n      user: req.user._id,\n      name: req.user.name\n    };\n    product.reviews.push(review);\n    product.rating = product.reviews.reduce((a, c) => c.rating + a, 0) / product.reviews.length;\n    product.numReviews = product.reviews.length;\n    const updatedProduct = await product.save();\n    res.status(201).send({\n      message: 'Commentaire créé.',\n      data: updatedProduct.reviews[updatedProduct.reviews.length - 1]\n    });\n  } else {\n    throw Error('Product does not exist.');\n  }\n}));\nvar _default = productRouter;\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJwcm9kdWN0Um91dGVyIiwiZXhwcmVzcyIsIlJvdXRlciIsImdldCIsImV4cHJlc3NBc3luY0hhbmRsZXIiLCJyZXEiLCJyZXMiLCJzZWFyY2hLZXl3b3JkIiwicXVlcnkiLCJuYW1lIiwiJHJlZ2V4IiwiJG9wdGlvbnMiLCJwcm9kdWN0cyIsIlByb2R1Y3QiLCJmaW5kIiwic2VuZCIsInByb2R1Y3QiLCJmaW5kQnlJZCIsInBhcmFtcyIsImlkIiwicG9zdCIsImlzQXV0aCIsImlzQWRtaW4iLCJkZXNjcmlwdGlvbiIsImNhdGVnb3J5IiwiYnJhbmQiLCJpbWFnZSIsImNyZWF0ZWRQcm9kdWN0Iiwic2F2ZSIsInN0YXR1cyIsIm1lc3NhZ2UiLCJwdXQiLCJwcm9kdWN0SWQiLCJib2R5IiwicHJpY2UiLCJjb3VudEluU3RvY2siLCJ1cGRhdGVkUHJvZHVjdCIsImRlbGV0ZSIsImRlbGV0ZWRQcm9kdWN0IiwicmVtb3ZlIiwicmV2aWV3IiwicmF0aW5nIiwiY29tbWVudCIsInVzZXIiLCJfaWQiLCJyZXZpZXdzIiwicHVzaCIsInJlZHVjZSIsImEiLCJjIiwibGVuZ3RoIiwibnVtUmV2aWV3cyIsImRhdGEiLCJFcnJvciJdLCJzb3VyY2VSb290IjoiL1VzZXJzL3RoaWFnby9EZXYvd29ya3NwYWNlL0NhZHJlIENhcnRvbiBlLWNvbW1lcmNlL2JhY2tlbmQvcm91dGVycy8iLCJzb3VyY2VzIjpbInByb2R1Y3RSb3V0ZXIuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGV4cHJlc3MgZnJvbSAnZXhwcmVzcyc7XG5pbXBvcnQgZXhwcmVzc0FzeW5jSGFuZGxlciBmcm9tICdleHByZXNzLWFzeW5jLWhhbmRsZXInO1xuaW1wb3J0IHsgaXNBdXRoLCBpc0FkbWluIH0gZnJvbSAnLi4vdXRpbHMnO1xuaW1wb3J0IFByb2R1Y3QgZnJvbSAnLi4vbW9kZWxzL3Byb2R1Y3RNb2RlbCc7XG5cbmNvbnN0IHByb2R1Y3RSb3V0ZXIgPSBleHByZXNzLlJvdXRlcigpO1xucHJvZHVjdFJvdXRlci5nZXQoXG4gICcvJyxcbiAgZXhwcmVzc0FzeW5jSGFuZGxlcihhc3luYyAocmVxLCByZXMpID0+IHtcbiAgICBjb25zdCBzZWFyY2hLZXl3b3JkID0gcmVxLnF1ZXJ5LnNlYXJjaEtleXdvcmRcbiAgICAgID8ge1xuICAgICAgICAgIG5hbWU6IHtcbiAgICAgICAgICAgICRyZWdleDogcmVxLnF1ZXJ5LnNlYXJjaEtleXdvcmQsXG4gICAgICAgICAgICAkb3B0aW9uczogJ2knLFxuICAgICAgICAgIH0sXG4gICAgICAgIH1cbiAgICAgIDoge307XG4gICAgY29uc3QgcHJvZHVjdHMgPSBhd2FpdCBQcm9kdWN0LmZpbmQoeyAuLi5zZWFyY2hLZXl3b3JkIH0pO1xuICAgIHJlcy5zZW5kKHByb2R1Y3RzKTtcbiAgfSlcbik7XG5wcm9kdWN0Um91dGVyLmdldChcbiAgJy86aWQnLFxuICBleHByZXNzQXN5bmNIYW5kbGVyKGFzeW5jIChyZXEsIHJlcykgPT4ge1xuICAgIGNvbnN0IHByb2R1Y3QgPSBhd2FpdCBQcm9kdWN0LmZpbmRCeUlkKHJlcS5wYXJhbXMuaWQpO1xuICAgIHJlcy5zZW5kKHByb2R1Y3QpO1xuICB9KVxuKTtcbnByb2R1Y3RSb3V0ZXIucG9zdChcbiAgJy8nLFxuICBpc0F1dGgsXG4gIGlzQWRtaW4sXG4gIGV4cHJlc3NBc3luY0hhbmRsZXIoYXN5bmMgKHJlcSwgcmVzKSA9PiB7XG4gICAgY29uc3QgcHJvZHVjdCA9IG5ldyBQcm9kdWN0KHtcbiAgICAgIG5hbWU6ICdub20gZHUgcHJvZHVpdCcsXG4gICAgICBkZXNjcmlwdGlvbjogJ2Rlc2NyaXB0aW9uJyxcbiAgICAgIGNhdGVnb3J5OiAnY2F0w6lnb3JpZScsXG4gICAgICBicmFuZDogJ21hcnF1ZScsXG4gICAgICBpbWFnZTogJy9pbWFnZXMvcHJvZHVjdC0xLmpwZycsXG4gICAgfSk7XG4gICAgY29uc3QgY3JlYXRlZFByb2R1Y3QgPSBhd2FpdCBwcm9kdWN0LnNhdmUoKTtcbiAgICBpZiAoY3JlYXRlZFByb2R1Y3QpIHtcbiAgICAgIHJlc1xuICAgICAgICAuc3RhdHVzKDIwMSlcbiAgICAgICAgLnNlbmQoeyBtZXNzYWdlOiAnUHJvZHVpdCBjcsOpw6knLCBwcm9kdWN0OiBjcmVhdGVkUHJvZHVjdCB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmVzLnN0YXR1cyg1MDApLnNlbmQoeyBtZXNzYWdlOiAnRXJyZXVyIGxvcnMgZGUgbGEgY3LDqWF0aW9uIGR1IHByb2R1aXQnIH0pO1xuICAgIH1cbiAgfSlcbik7XG5wcm9kdWN0Um91dGVyLnB1dChcbiAgJy86aWQnLFxuICBpc0F1dGgsXG4gIGlzQWRtaW4sXG4gIGV4cHJlc3NBc3luY0hhbmRsZXIoYXN5bmMgKHJlcSwgcmVzKSA9PiB7XG4gICAgY29uc3QgcHJvZHVjdElkID0gcmVxLnBhcmFtcy5pZDtcbiAgICBjb25zdCBwcm9kdWN0ID0gYXdhaXQgUHJvZHVjdC5maW5kQnlJZChwcm9kdWN0SWQpO1xuICAgIGlmIChwcm9kdWN0KSB7XG4gICAgICBwcm9kdWN0Lm5hbWUgPSByZXEuYm9keS5uYW1lO1xuICAgICAgcHJvZHVjdC5wcmljZSA9IHJlcS5ib2R5LnByaWNlO1xuICAgICAgcHJvZHVjdC5pbWFnZSA9IHJlcS5ib2R5LmltYWdlO1xuICAgICAgcHJvZHVjdC5icmFuZCA9IHJlcS5ib2R5LmJyYW5kO1xuICAgICAgcHJvZHVjdC5jYXRlZ29yeSA9IHJlcS5ib2R5LmNhdGVnb3J5O1xuICAgICAgcHJvZHVjdC5jb3VudEluU3RvY2sgPSByZXEuYm9keS5jb3VudEluU3RvY2s7XG4gICAgICBwcm9kdWN0LmRlc2NyaXB0aW9uID0gcmVxLmJvZHkuZGVzY3JpcHRpb247XG4gICAgICBjb25zdCB1cGRhdGVkUHJvZHVjdCA9IGF3YWl0IHByb2R1Y3Quc2F2ZSgpO1xuICAgICAgaWYgKHVwZGF0ZWRQcm9kdWN0KSB7XG4gICAgICAgIHJlcy5zZW5kKHsgbWVzc2FnZTogJ1Byb2R1aXQgbWlzIMOgIGpvdXInLCBwcm9kdWN0OiB1cGRhdGVkUHJvZHVjdCB9KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJlcy5zdGF0dXMoNTAwKS5zZW5kKHsgbWVzc2FnZTogJ0VycmV1ciBsb3JzIGRlIGxhIG1pc2Ugw6Agam91ciBkdSBwcm9kdWl0JyB9KTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgcmVzLnN0YXR1cyg0MDQpLnNlbmQoeyBtZXNzYWdlOiAnUHJvZHVpdCBub24gdHJvdXbDqScgfSk7XG4gICAgfVxuICB9KVxuKTtcbnByb2R1Y3RSb3V0ZXIuZGVsZXRlKFxuICAnLzppZCcsXG4gIGlzQXV0aCxcbiAgaXNBZG1pbixcbiAgZXhwcmVzc0FzeW5jSGFuZGxlcihhc3luYyAocmVxLCByZXMpID0+IHtcbiAgICBjb25zdCBwcm9kdWN0ID0gYXdhaXQgUHJvZHVjdC5maW5kQnlJZChyZXEucGFyYW1zLmlkKTtcbiAgICBpZiAocHJvZHVjdCkge1xuICAgICAgY29uc3QgZGVsZXRlZFByb2R1Y3QgPSBhd2FpdCBwcm9kdWN0LnJlbW92ZSgpO1xuICAgICAgcmVzLnNlbmQoeyBtZXNzYWdlOiAnUHJvZHVpdCBzdXBwcmltw6knLCBwcm9kdWN0OiBkZWxldGVkUHJvZHVjdCB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmVzLnN0YXR1cyg0MDQpLnNlbmQoeyBtZXNzYWdlOiAnUHJvZHVpdCBub24gdHJvdXbDqScgfSk7XG4gICAgfVxuICB9KVxuKTtcbnByb2R1Y3RSb3V0ZXIucG9zdChcbiAgJy86aWQvcmV2aWV3cycsXG4gIGlzQXV0aCxcbiAgZXhwcmVzc0FzeW5jSGFuZGxlcihhc3luYyAocmVxLCByZXMpID0+IHtcbiAgICBjb25zdCBwcm9kdWN0ID0gYXdhaXQgUHJvZHVjdC5maW5kQnlJZChyZXEucGFyYW1zLmlkKTtcbiAgICBpZiAocHJvZHVjdCkge1xuICAgICAgY29uc3QgcmV2aWV3ID0ge1xuICAgICAgICByYXRpbmc6IHJlcS5ib2R5LnJhdGluZyxcbiAgICAgICAgY29tbWVudDogcmVxLmJvZHkuY29tbWVudCxcbiAgICAgICAgdXNlcjogcmVxLnVzZXIuX2lkLFxuICAgICAgICBuYW1lOiByZXEudXNlci5uYW1lLFxuICAgICAgfTtcbiAgICAgIHByb2R1Y3QucmV2aWV3cy5wdXNoKHJldmlldyk7XG4gICAgICBwcm9kdWN0LnJhdGluZyA9XG4gICAgICAgIHByb2R1Y3QucmV2aWV3cy5yZWR1Y2UoKGEsIGMpID0+IGMucmF0aW5nICsgYSwgMCkgL1xuICAgICAgICBwcm9kdWN0LnJldmlld3MubGVuZ3RoO1xuICAgICAgcHJvZHVjdC5udW1SZXZpZXdzID0gcHJvZHVjdC5yZXZpZXdzLmxlbmd0aDtcbiAgICAgIGNvbnN0IHVwZGF0ZWRQcm9kdWN0ID0gYXdhaXQgcHJvZHVjdC5zYXZlKCk7XG4gICAgICByZXMuc3RhdHVzKDIwMSkuc2VuZCh7XG4gICAgICAgIG1lc3NhZ2U6ICdDb21tZW50YWlyZSBjcsOpw6kuJyxcbiAgICAgICAgZGF0YTogdXBkYXRlZFByb2R1Y3QucmV2aWV3c1t1cGRhdGVkUHJvZHVjdC5yZXZpZXdzLmxlbmd0aCAtIDFdLFxuICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRocm93IEVycm9yKCdQcm9kdWN0IGRvZXMgbm90IGV4aXN0LicpO1xuICAgIH1cbiAgfSlcbik7XG5cbmV4cG9ydCBkZWZhdWx0IHByb2R1Y3RSb3V0ZXI7XG4iXSwibWFwcGluZ3MiOiI7Ozs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQTZDO0FBRTdDLE1BQU1BLGFBQWEsR0FBR0MsZ0JBQU8sQ0FBQ0MsTUFBTSxFQUFFO0FBQ3RDRixhQUFhLENBQUNHLEdBQUcsQ0FDZixHQUFHLEVBQ0gsSUFBQUMsNEJBQW1CLEVBQUMsT0FBT0MsR0FBRyxFQUFFQyxHQUFHLEtBQUs7RUFDdEMsTUFBTUMsYUFBYSxHQUFHRixHQUFHLENBQUNHLEtBQUssQ0FBQ0QsYUFBYSxHQUN6QztJQUNFRSxJQUFJLEVBQUU7TUFDSkMsTUFBTSxFQUFFTCxHQUFHLENBQUNHLEtBQUssQ0FBQ0QsYUFBYTtNQUMvQkksUUFBUSxFQUFF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","map":{"version":3,"names":["productRouter","express","Router","get","expressAsyncHandler","req","res","searchKeyword","query","name","$regex","$options","products","Product","find","send","product","findById","params","id","post","isAuth","isAdmin","description","category","brand","image","createdProduct","save","status","message","put","productId","body","price","countInStock","updatedProduct","delete","deletedProduct","remove","review","rating","comment","user","_id","reviews","push","reduce","a","c","length","numReviews","data","Error"],"sourceRoot":"/Users/thiago/Dev/workspace/Cadre Carton e-commerce/backend/routers/","sources":["productRouter.js"],"sourcesContent":["import express from 'express';\nimport expressAsyncHandler from 'express-async-handler';\nimport { isAuth, isAdmin } from '../utils';\nimport Product from '../models/productModel';\n\nconst productRouter = express.Router();\nproductRouter.get(\n  '/',\n  expressAsyncHandler(async (req, res) => {\n    const searchKeyword = req.query.searchKeyword\n      ? {\n          name: {\n            $regex: req.query.searchKeyword,\n            $options: 'i',\n          },\n        }\n      : {};\n    const products = await Product.find({ ...searchKeyword });\n    res.send(products);\n  })\n);\nproductRouter.get(\n  '/:id',\n  expressAsyncHandler(async (req, res) => {\n    const product = await Product.findById(req.params.id);\n    res.send(product);\n  })\n);\nproductRouter.post(\n  '/',\n  isAuth,\n  isAdmin,\n  expressAsyncHandler(async (req, res) => {\n    const product = new Product({\n      name: 'nom du produit',\n      description: 'description',\n      category: 'catégorie',\n      brand: 'marque',\n      image: '/images/product-1.jpg',\n    });\n    const createdProduct = await product.save();\n    if (createdProduct) {\n      res\n        .status(201)\n        .send({ message: 'Produit créé', product: createdProduct });\n    } else {\n      res.status(500).send({ message: 'Erreur lors de la création du produit' });\n    }\n  })\n);\nproductRouter.put(\n  '/:id',\n  isAuth,\n  isAdmin,\n  expressAsyncHandler(async (req, res) => {\n    const productId = req.params.id;\n    const product = await Product.findById(productId);\n    if (product) {\n      product.name = req.body.name;\n      product.price = req.body.price;\n      product.image = req.body.image;\n      product.brand = req.body.brand;\n      product.category = req.body.category;\n      product.countInStock = req.body.countInStock;\n      product.description = req.body.description;\n      const updatedProduct = await product.save();\n      if (updatedProduct) {\n        res.send({ message: 'Produit mis à jour', product: updatedProduct });\n      } else {\n        res.status(500).send({ message: 'Erreur lors de la mise à jour du produit' });\n      }\n    } else {\n      res.status(404).send({ message: 'Produit non trouvé' });\n    }\n  })\n);\nproductRouter.delete(\n  '/:id',\n  isAuth,\n  isAdmin,\n  expressAsyncHandler(async (req, res) => {\n    const product = await Product.findById(req.params.id);\n    if (product) {\n      const deletedProduct = await product.remove();\n      res.send({ message: 'Produit supprimé', product: deletedProduct });\n    } else {\n      res.status(404).send({ message: 'Produit non trouvé' });\n    }\n  })\n);\nproductRouter.post(\n  '/:id/reviews',\n  isAuth,\n  expressAsyncHandler(async (req, res) => {\n    const product = await Product.findById(req.params.id);\n    if (product) {\n      const review = {\n        rating: req.body.rating,\n        comment: req.body.comment,\n        user: req.user._id,\n        name: req.user.name,\n      };\n      product.reviews.push(review);\n      product.rating =\n        product.reviews.reduce((a, c) => c.rating + a, 0) /\n        product.reviews.length;\n      product.numReviews = product.reviews.length;\n      const updatedProduct = await product.save();\n      res.status(201).send({\n        message: 'Commentaire créé.',\n        data: updatedProduct.reviews[updatedProduct.reviews.length - 1],\n      });\n    } else {\n      throw Error('Product does not exist.');\n    }\n  })\n);\n\nexport default productRouter;\n"],"mappings":";;;;;;AAAA;AACA;AACA;AACA;AAA6C;AAE7C,MAAMA,aAAa,GAAGC,gBAAO,CAACC,MAAM,EAAE;AACtCF,aAAa,CAACG,GAAG,CACf,GAAG,EACH,IAAAC,4BAAmB,EAAC,OAAOC,GAAG,EAAEC,GAAG,KAAK;EACtC,MAAMC,aAAa,GAAGF,GAAG,CAACG,KAAK,CAACD,aAAa,GACzC;IACEE,IAAI,EAAE;MACJC,MAAM,EAAEL,GAAG,CAACG,KAAK,CAACD,aAAa;MAC/BI,QAAQ,EAAE;IACZ;EACF,CAAC,GACD,CAAC,CAAC;EACN,MAAMC,QAAQ,GAAG,MAAMC,qBAAO,CAACC,IAAI,CAAC;IAAE,GAAGP;EAAc,CAAC,CAAC;EACzDD,GAAG,CAACS,IAAI,CAACH,QAAQ,CAAC;AACpB,CAAC,CAAC,CACH;AACDZ,aAAa,CAACG,GAAG,CACf,MAAM,EACN,IAAAC,4BAAmB,EAAC,OAAOC,GAAG,EAAEC,GAAG,KAAK;EACtC,MAAMU,OAAO,GAAG,MAAMH,qBAAO,CAACI,QAAQ,CAACZ,GAAG,CAACa,MAAM,CAACC,EAAE,CAAC;EACrDb,GAAG,CAACS,IAAI,CAACC,OAAO,CAAC;AACnB,CAAC,CAAC,CACH;AACDhB,aAAa,CAACoB,IAAI,CAChB,GAAG,EACHC,aAAM,EACNC,cAAO,EACP,IAAAlB,4BAAmB,EAAC,OAAOC,GAAG,EAAEC,GAAG,KAAK;EACtC,MAAMU,OAAO,GAAG,IAAIH,qBAAO,CAAC;IAC1BJ,IAAI,EAAE,gBAAgB;IACtBc,WAAW,EAAE,aAAa;IAC1BC,QAAQ,EAAE,WAAW;IACrBC,KAAK,EAAE,QAAQ;IACfC,KAAK,EAAE;EACT,CAAC,CAAC;EACF,MAAMC,cAAc,GAAG,MAAMX,OAAO,CAACY,IAAI,EAAE;EAC3C,IAAID,cAAc,EAAE;IAClBrB,GAAG,CACAuB,MAAM,CAAC,GAAG,CAAC,CACXd,IAAI,CAAC;MAAEe,OAAO,EAAE,cAAc;MAAEd,OAAO,EAAEW;IAAe,CAAC,CAAC;EAC/D,CAAC,MAAM;IACLrB,GAAG,CAACuB,MAAM,CAAC,GAAG,CAAC,CAACd,IAAI,CAAC;MAAEe,OAAO,EAAE;IAAwC,CAAC,CAAC;EAC5E;AACF,CAAC,CAAC,CACH;AACD9B,aAAa,CAAC+B,GAAG,CACf,MAAM,EACNV,aAAM,EACNC,cAAO,EACP,IAAAlB,4BAAmB,EAAC,OAAOC,GAAG,EAAEC,GAAG,KAAK;EACtC,MAAM0B,SAAS,GAAG3B,GAAG,CAACa,MAAM,CAACC,EAAE;EAC/B,MAAMH,OAAO,GAAG,MAAMH,qBAAO,CAACI,QAAQ,CAACe,SAAS,CAAC;EACjD,IAAIhB,OAAO,EAAE;IACXA,OAAO,CAACP,IAAI,GAAGJ,GAAG,CAAC4B,IAAI,CAACxB,IAAI;IAC5BO,OAAO,CAACkB,KAAK,GAAG7B,GAAG,CAAC4B,IAAI,CAACC,KAAK;IAC9BlB,OAAO,CAACU,KAAK,GAAGrB,GAAG,CAAC4B,IAAI,CAACP,KAAK;IAC9BV,OAAO,CAACS,KAAK,GAAGpB,GAAG,CAAC4B,IAAI,CAACR,KAAK;IAC9BT,OAAO,CAACQ,QAAQ,GAAGnB,GAAG,CAAC4B,IAAI,CAACT,QAAQ;IACpCR,OAAO,CAACmB,YAAY,GAAG9B,GAAG,CAAC4B,IAAI,CAACE,YAAY;IAC5CnB,OAAO,CAACO,WAAW,GAAGlB,GAAG,CAAC4B,IAAI,CAACV,WAAW;IAC1C,MAAMa,cAAc,GAAG,MAAMpB,OAAO,CAACY,IAAI,EAAE;IAC3C,IAAIQ,cAAc,EAAE;MAClB9B,GAAG,CAACS,IAAI,CAAC;QAAEe,OAAO,EAAE,oBAAoB;QAAEd,OAAO,EAAEoB;MAAe,CAAC,CAAC;IACtE,CAAC,MAAM;MACL9B,GAAG,CAACuB,MAAM,CAAC,GAAG,CAAC,CAACd,IAAI,CAAC;QAAEe,OAAO,EAAE;MAA2C,CAAC,CAAC;IAC/E;EACF,CAAC,MAAM;IACLxB,GAAG,CAACuB,MAAM,CAAC,GAAG,CAAC,CAACd,IAAI,CAAC;MAAEe,OAAO,EAAE;IAAqB,CAAC,CAAC;EACzD;AACF,CAAC,CAAC,CACH;AACD9B,aAAa,CAACqC,MAAM,CAClB,MAAM,EACNhB,aAAM,EACNC,cAAO,EACP,IAAAlB,4BAAmB,EAAC,OAAOC,GAAG,EAAEC,GAAG,KAAK;EACtC,MAAMU,OAAO,GAAG,MAAMH,qBAAO,CAACI,QAAQ,CAACZ,GAAG,CAACa,MAAM,CAACC,EAAE,CAAC;EACrD,IAAIH,OAAO,EAAE;IACX,MAAMsB,cAAc,GAAG,MAAMtB,OAAO,CAACuB,MAAM,EAAE;IAC7CjC,GAAG,CAACS,IAAI,CAAC;MAAEe,OAAO,EAAE,kBAAkB;MAAEd,OAAO,EAAEsB;IAAe,CAAC,CAAC;EACpE,CAAC,MAAM;IACLhC,GAAG,CAACuB,MAAM,CAAC,GAAG,CAAC,CAACd,IAAI,CAAC;MAAEe,OAAO,EAAE;IAAqB,CAAC,CAAC;EACzD;AACF,CAAC,CAAC,CACH;AACD9B,aAAa,CAACoB,IAAI,CAChB,cAAc,EACdC,aAAM,EACN,IAAAjB,4BAAmB,EAAC,OAAOC,GAAG,EAAEC,GAAG,KAAK;EACtC,MAAMU,OAAO,GAAG,MAAMH,qBAAO,CAACI,QAAQ,CAACZ,GAAG,CAACa,MAAM,CAACC,EAAE,CAAC;EACrD,IAAIH,OAAO,EAAE;IACX,MAAMwB,MAAM,GAAG;MACbC,MAAM,EAAEpC,GAAG,CAAC4B,IAAI,CAACQ,MAAM;MACvBC,OAAO,EAAErC,GAAG,CAAC4B,IAAI,CAACS,OAAO;MACzBC,IAAI,EAAEtC,GAAG,CAACsC,IAAI,CAACC,GAAG;MAClBnC,IAAI,EAAEJ,GAAG,CAACsC,IAAI,CAAClC;IACjB,CAAC;IACDO,OAAO,CAAC6B,OAAO,CAACC,IAAI,CAACN,MAAM,CAAC;IAC5BxB,OAAO,CAACyB,MAAM,GACZzB,OAAO,CAAC6B,OAAO,CAACE,MAAM,CAAC,CAACC,CAAC,EAAEC,CAAC,KAAKA,CAAC,CAACR,MAAM,GAAGO,CAAC,EAAE,CAAC,CAAC,GACjDhC,OAAO,CAAC6B,OAAO,CAACK,MAAM;IACxBlC,OAAO,CAACmC,UAAU,GAAGnC,OAAO,CAAC6B,OAAO,CAACK,MAAM;IAC3C,MAAMd,cAAc,GAAG,MAAMpB,OAAO,CAACY,IAAI,EAAE;IAC3CtB,GAAG,CAACuB,MAAM,CAAC,GAAG,CAAC,CAACd,IAAI,CAAC;MACnBe,OAAO,EAAE,mBAAmB;MAC5BsB,IAAI,EAAEhB,cAAc,CAACS,OAAO,CAACT,cAAc,CAACS,OAAO,CAACK,MAAM,GAAG,CAAC;IAChE,CAAC,CAAC;EACJ,CAAC,MAAM;IACL,MAAMG,KAAK,CAAC,yBAAyB,CAAC;EACxC;AACF,CAAC,CAAC,CACH;AAAC,eAEarD,aAAa;AAAA"}},"mtime":1669718145308},"{\"assumptions\":{},\"sourceRoot\":\"/Users/thiago/Dev/workspace/prueba/Cadre Carton e-commerce/backend/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/thiago/Dev/workspace/prueba/Cadre Carton e-commerce\",\"filename\":\"/Users/thiago/Dev/workspace/prueba/Cadre Carton e-commerce/backend/server.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/thiago/Dev/workspace/prueba/Cadre Carton e-commerce\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.19.6:development":{"value":{"code":"\"use strict\";\n\nvar _express = _interopRequireDefault(require(\"express\"));\nvar _cors = _interopRequireDefault(require(\"cors\"));\nvar _mongoose = _interopRequireDefault(require(\"mongoose\"));\nvar _bodyParser = _interopRequireDefault(require(\"body-parser\"));\nvar _dotenv = _interopRequireWildcard(require(\"dotenv\"));\nvar _path = _interopRequireDefault(require(\"path\"));\nvar _userRouter = _interopRequireDefault(require(\"./routers/userRouter\"));\nvar _orderRouter = _interopRequireDefault(require(\"./routers/orderRouter\"));\nvar _productRouter = _interopRequireDefault(require(\"./routers/productRouter\"));\nvar _uploadRouter = _interopRequireDefault(require(\"./routers/uploadRouter\"));\nfunction _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== \"function\") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function (nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }\nfunction _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== \"object\" && typeof obj !== \"function\") { return { default: obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n/* eslint-disable no-unused-vars */\n\n_dotenv.default.config();\n_mongoose.default.connect(process.env.MONGODB_URI).then(() => {\n  console.log(\"Connected to db!\");\n}).catch(err => {\n  console.log(err.message);\n});\nconst app = (0, _express.default)();\napp.use((0, _cors.default)());\napp.use(_bodyParser.default.json());\napp.use(\"/api/uploads\", _uploadRouter.default);\napp.use(\"/api/users\", _userRouter.default);\napp.use(\"/api/products\", _productRouter.default);\napp.use(\"/api/orders\", _orderRouter.default);\n\n// Original code\n//  app.get(\"/api/paypal/clientId\", (req, res) => {\n//    res.send({ clientId: config.PAYPAL_CLIENT_ID });\n//  });\n\n// new code\n// app.get(\"/api/paypal/clientId\", (req, res) => {\n//  console.log(process.env.PAYPAL_CLIENT_ID);\n// });\n\napp.get(\"/api/paypal/clientId\", (req, res) => {\n  console.log(process.env.PAYPAL_CLIENT_ID);\n});\napp.use(\"/uploads\", _express.default.static(_path.default.join(__dirname, \"/../uploads\")));\napp.use(_express.default.static(_path.default.join(__dirname, \"/../frontend\")));\napp.get(\"*\", (req, res) => {\n  res.sendFile(_path.default.join(__dirname, \"/../frontend/index.html\"));\n});\napp.use((err, req, res, next) => {\n  const status = err.name && err.name === \"ValidationError\" ? 400 : 500;\n  res.status(status).send({\n    message: err.message\n  });\n});\napp.listen(5070, () => {\n  console.log(\"serve at http://localhost:5070\");\n});\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJkb3RlbnYiLCJjb25maWciLCJtb25nb29zZSIsImNvbm5lY3QiLCJwcm9jZXNzIiwiZW52IiwiTU9OR09EQl9VUkkiLCJ0aGVuIiwiY29uc29sZSIsImxvZyIsImNhdGNoIiwiZXJyIiwibWVzc2FnZSIsImFwcCIsImV4cHJlc3MiLCJ1c2UiLCJjb3JzIiwiYm9keVBhcnNlciIsImpzb24iLCJ1cGxvYWRSb3V0ZXIiLCJ1c2VyUm91dGVyIiwicHJvZHVjdFJvdXRlciIsIm9yZGVyUm91dGVyIiwiZ2V0IiwicmVxIiwicmVzIiwiUEFZUEFMX0NMSUVOVF9JRCIsInN0YXRpYyIsInBhdGgiLCJqb2luIiwiX19kaXJuYW1lIiwic2VuZEZpbGUiLCJuZXh0Iiwic3RhdHVzIiwibmFtZSIsInNlbmQiLCJsaXN0ZW4iXSwic291cmNlUm9vdCI6Ii9Vc2Vycy90aGlhZ28vRGV2L3dvcmtzcGFjZS9wcnVlYmEvQ2FkcmUgQ2FydG9uIGUtY29tbWVyY2UvYmFja2VuZC8iLCJzb3VyY2VzIjpbInNlcnZlci5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKiBlc2xpbnQtZGlzYWJsZSBuby11bnVzZWQtdmFycyAqL1xuaW1wb3J0IGV4cHJlc3MgZnJvbSBcImV4cHJlc3NcIjtcbmltcG9ydCBjb3JzIGZyb20gXCJjb3JzXCI7XG5pbXBvcnQgbW9uZ29vc2UgZnJvbSBcIm1vbmdvb3NlXCI7XG5pbXBvcnQgYm9keVBhcnNlciBmcm9tIFwiYm9keS1wYXJzZXJcIjtcbmltcG9ydCBkb3RlbnYsIHsgY29uZmlnIH0gZnJvbSBcImRvdGVudlwiO1xuaW1wb3J0IHBhdGggZnJvbSBcInBhdGhcIjtcbmltcG9ydCB1c2VyUm91dGVyIGZyb20gXCIuL3JvdXRlcnMvdXNlclJvdXRlclwiO1xuaW1wb3J0IG9yZGVyUm91dGVyIGZyb20gXCIuL3JvdXRlcnMvb3JkZXJSb3V0ZXJcIjtcbmltcG9ydCBwcm9kdWN0Um91dGVyIGZyb20gXCIuL3JvdXRlcnMvcHJvZHVjdFJvdXRlclwiO1xuaW1wb3J0IHVwbG9hZFJvdXRlciBmcm9tIFwiLi9yb3V0ZXJzL3VwbG9hZFJvdXRlclwiO1xuXG5kb3RlbnYuY29uZmlnKCk7XG5cbm1vbmdvb3NlXG4gIC5jb25uZWN0KHByb2Nlc3MuZW52Lk1PTkdPREJfVVJJKVxuICAudGhlbigoKSA9PiB7XG4gICAgY29uc29sZS5sb2coXCJDb25uZWN0ZWQgdG8gZGIhXCIpO1xuICB9KVxuICAuY2F0Y2goKGVycikgPT4ge1xuICAgIGNvbnNvbGUubG9nKGVyci5tZXNzYWdlKTtcbiAgfSk7XG5jb25zdCBhcHAgPSBleHByZXNzKCk7XG5cbmFwcC51c2UoY29ycygpKTtcbmFwcC51c2UoYm9keVBhcnNlci5qc29uKCkpO1xuYXBwLnVzZShcIi9hcGkvdXBsb2Fkc1wiLCB1cGxvYWRSb3V0ZXIpO1xuYXBwLnVzZShcIi9hcGkvdXNlcnNcIiwgdXNlclJvdXRlcik7XG5hcHAudXNlKFwiL2FwaS9wcm9kdWN0c1wiLCBwcm9kdWN0Um91dGVyKTtcbmFwcC51c2UoXCIvYXBpL29yZGVyc1wiLCBvcmRlclJvdXRlcik7XG5cbi8vIE9yaWdpbmFsIGNvZGVcbi8vICBhcHAuZ2V0KFwiL2FwaS9wYXlwYWwvY2xpZW50SWRcIiwgKHJlcSwgcmVzKSA9PiB7XG4vLyAgICByZXMuc2VuZCh7IGNsaWVudElkOiBjb25maWcuUEFZUEFMX0NMSUVOVF9JRCB9KTtcbi8vICB9KTtcblxuLy8gbmV3IGNvZGVcbi8vIGFwcC5nZXQoXCIvYXBpL3BheXBhbC9jbGllbnRJZFwiLCAocmVxLCByZXMpID0+IHtcbi8vICBjb25zb2xlLmxvZyhwcm9jZXNzLmVudi5QQVlQQUxfQ0xJRU5UX0lEKTtcbi8vIH0pO1xuXG5hcHAuZ2V0KFwiL2FwaS9wYXlwYWwvY2xpZW50SWRcIiwgKHJlcSwgcmVzKSA9PiB7XG4gIGNvbnNvbGUubG9nKHByb2Nlc3MuZW52LlBBWVBBTF9DTElFTlRfSUQpO1xufSk7XG5cbmFwcC51c2UoXCIvdXBsb2Fkc1wiLCBleHByZXNzLnN0YXRpYyhwYXRoLmpvaW4oX19kaXJuYW1lLCBcIi8uLi91cGxvYWRzXCIpKSk7XG5hcHAudXNlKGV4cHJlc3Muc3RhdGljKHBhdGguam9pbihfX2Rpcm5hbWUsIFwiLy4uL2Zyb250ZW5kXCIpKSk7XG5hcHAuZ2V0KFwiKlwiLCAocmVxLCByZXMpID0+IHtcbiAgcmVzLnNlbmRGaWxlKHBhdGguam9pbihfX2Rpcm5hbWUsIFwiLy4uL2Zyb250ZW5kL2luZGV4Lmh0bWxcIikpO1xufSk7XG5hcHAudXNlKChlcnIsIHJlcSwgcmVzLCBuZXh0KSA9PiB7XG4gIGNvbnN0IHN0YXR1cyA9IGVyci5uYW1lICYmIGVyci5uYW1lID09PSBcIlZhbGlkYXRpb25FcnJvclwiID8gNDAwIDogNTAwO1xuICByZXMuc3RhdHVzKHN0YXR1cykuc2VuZCh7IG1lc3NhZ2U6IGVyci5tZXNzYWdlIH0pO1xufSk7XG5hcHAubGlzdGVuKDUwNzAsICgpID0+IHtcbiAgY29uc29sZS5sb2coXCJzZXJ2ZSBhdCBodHRwOi8vbG9jYWxob3N0OjUwNzBcIik7XG59KTtcbiJdLCJtYXBwaW5ncyI6Ijs7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFrRDtBQUFBO0FBQUE7QUFWbEQ7O0FBWUFBLGVBQU0sQ0FBQ0MsTUFBTSxFQUFFO0FBRWZDLGlCQUFRLENBQ0xDLE9BQU8sQ0FBQ0MsT0FBTyxDQUFDQyxHQUFHLENBQUNDLFdBQVcsQ0FBQyxDQUNoQ0MsSUFBSSxDQUFDLE1BQU07RUFDVkMsT0FBTyxDQUFDQyxHQUFHLENBQUMsa0JBQWtCLENBQUM7QUFDakMsQ0FBQyxDQUFDLENBQ0RDLEtBQUssQ0FBRUMsR0FBRyxJQUFLO0VBQ2RILE9BQU8sQ0FBQ0MsR0FBRyxDQUFDRSxHQUFHLENBQUNDLE9BQU8sQ0FBQztBQUMxQixDQUFDLENBQUM7QUFDSixNQUFNQyxHQUFHLEdBQUcsSUFBQUMsZ0JBQU8sR0FBRTtBQUVyQkQsR0FBRyxDQUFDRSxHQUFHLENBQUMsSUFBQUMsYUFBSSxHQUFFLENBQUM7QUFDZkgsR0FBRyxDQUFDRSxHQUFHLENBQUNFLG1CQUFVLENBQUNDLElBQUksRUFBRSxDQUFDO0FBQzFCTCxHQUFHLENBQUNFLEdBQUcsQ0FBQyxjQUFjLEVBQUVJLHFCQUFZLENBQUM7QUFDckNOLEdBQUcsQ0FBQ0UsR0FBRyxDQUFDLFlBQVksRUFBRUssbUJBQVUsQ0FBQztBQUNqQ1AsR0FBRyxDQUFDRSxHQUFHLENBQUMsZUFBZSxFQUFFTSxzQkFBYSxDQUFDO0FBQ3ZDUixHQUFHLENBQUNFLEdBQUcsQ0FBQyxhQUFhLEVBQUVPLG9CQUFXLENBQUM7O0FBRW5DO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBVCxHQUFHLENBQUNVLEdBQUcsQ0FBQyxzQkFBc0IsRUFBRSxDQUFDQyxHQUFHLEVBQUVDLEdBQUcsS0FBSztFQUM1Q2pCLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDTCxPQUFPLENBQUNDLEdBQUcsQ0FBQ3FCLGdCQUFnQixDQUFDO0FBQzNDLENBQUMsQ0FBQztBQUVGYixHQUFHLENBQUNFLEdBQUcsQ0FBQyxVQUFVLEVBQUVELGdCQUFPLENBQUNhLE1BQU0sQ0FBQ0MsYUFBSSxDQUFDQyxJQUFJLENBQUNDLFNBQVMsRUFBRSxhQUFhLENBQUMsQ0FBQyxDQUFDO0FBQ3hFakIsR0FBRyxDQUFDRSxHQUFHLENBQUNELGdCQUFPLENBQUNhLE1BQU0sQ0FBQ0MsYUFBSSxDQUFDQyxJQUFJLENBQUNDLFNBQVMsRUFBRSxjQUFjLENBQUMsQ0FBQyxDQUFDO0FBQzdEakIsR0FBRyxDQUFDVSxHQUFHLENBQUMsR0FBRyxFQUFFLENBQUNDLEdBQUcsRUFBRUMsR0FBRyxLQUFLO0VBQ3pCQSxHQUFHLENBQUNNLFFBQVEsQ0FBQ0gsYUFBSSxDQUFDQyxJQUFJLENBQUNDLFNBQVMsRUFBRSx5QkFBeUIsQ0FBQyxDQUFDO0FBQy9ELENBQUMsQ0FBQztBQUNGakIsR0FBRyxDQUFDRSxHQUFHLENBQUMsQ0FBQ0osR0FBRyxFQUFFYSxHQUFHLEVBQUVDLEdBQUcsRUFBRU8sSUFBSSxLQUFLO0VBQy9CLE1BQU1DLE1BQU0sR0FBR3RCLEdBQUcsQ0FBQ3VCLElBQUksSUFBSXZCLEdBQUcsQ0FBQ3VCLElBQUksS0FBSyxpQkFBaUIsR0FBRyxHQUFHLEdBQUcsR0FBRztFQUNyRVQsR0FBRyxDQUFDUSxNQUFNLENBQUNBLE1BQU0sQ0FBQyxDQUFDRSxJQUFJLENBQUM7SUFBRXZCLE9BQU8sRUFBRUQsR0FBRyxDQUFDQztFQUFRLENBQUMsQ0FBQztBQUNuRCxDQUFDLENBQUM7QUFDRkMsR0FBRyxDQUFDdUIsTUFBTSxDQUFDLElBQUksRUFBRSxNQUFNO0VBQ3JCNUIsT0FBTyxDQUFDQyxHQUFHLENBQUMsZ0NBQWdDLENBQUM7QUFDL0MsQ0FBQyxDQUFDIn0=","map":{"version":3,"names":["dotenv","config","mongoose","connect","process","env","MONGODB_URI","then","console","log","catch","err","message","app","express","use","cors","bodyParser","json","uploadRouter","userRouter","productRouter","orderRouter","get","req","res","PAYPAL_CLIENT_ID","static","path","join","__dirname","sendFile","next","status","name","send","listen"],"sourceRoot":"/Users/thiago/Dev/workspace/prueba/Cadre Carton e-commerce/backend/","sources":["server.js"],"sourcesContent":["/* eslint-disable no-unused-vars */\nimport express from \"express\";\nimport cors from \"cors\";\nimport mongoose from \"mongoose\";\nimport bodyParser from \"body-parser\";\nimport dotenv, { config } from \"dotenv\";\nimport path from \"path\";\nimport userRouter from \"./routers/userRouter\";\nimport orderRouter from \"./routers/orderRouter\";\nimport productRouter from \"./routers/productRouter\";\nimport uploadRouter from \"./routers/uploadRouter\";\n\ndotenv.config();\n\nmongoose\n  .connect(process.env.MONGODB_URI)\n  .then(() => {\n    console.log(\"Connected to db!\");\n  })\n  .catch((err) => {\n    console.log(err.message);\n  });\nconst app = express();\n\napp.use(cors());\napp.use(bodyParser.json());\napp.use(\"/api/uploads\", uploadRouter);\napp.use(\"/api/users\", userRouter);\napp.use(\"/api/products\", productRouter);\napp.use(\"/api/orders\", orderRouter);\n\n// Original code\n//  app.get(\"/api/paypal/clientId\", (req, res) => {\n//    res.send({ clientId: config.PAYPAL_CLIENT_ID });\n//  });\n\n// new code\n// app.get(\"/api/paypal/clientId\", (req, res) => {\n//  console.log(process.env.PAYPAL_CLIENT_ID);\n// });\n\napp.get(\"/api/paypal/clientId\", (req, res) => {\n  console.log(process.env.PAYPAL_CLIENT_ID);\n});\n\napp.use(\"/uploads\", express.static(path.join(__dirname, \"/../uploads\")));\napp.use(express.static(path.join(__dirname, \"/../frontend\")));\napp.get(\"*\", (req, res) => {\n  res.sendFile(path.join(__dirname, \"/../frontend/index.html\"));\n});\napp.use((err, req, res, next) => {\n  const status = err.name && err.name === \"ValidationError\" ? 400 : 500;\n  res.status(status).send({ message: err.message });\n});\napp.listen(5070, () => {\n  console.log(\"serve at http://localhost:5070\");\n});\n"],"mappings":";;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAkD;AAAA;AAAA;AAVlD;;AAYAA,eAAM,CAACC,MAAM,EAAE;AAEfC,iBAAQ,CACLC,OAAO,CAACC,OAAO,CAACC,GAAG,CAACC,WAAW,CAAC,CAChCC,IAAI,CAAC,MAAM;EACVC,OAAO,CAACC,GAAG,CAAC,kBAAkB,CAAC;AACjC,CAAC,CAAC,CACDC,KAAK,CAAEC,GAAG,IAAK;EACdH,OAAO,CAACC,GAAG,CAACE,GAAG,CAACC,OAAO,CAAC;AAC1B,CAAC,CAAC;AACJ,MAAMC,GAAG,GAAG,IAAAC,gBAAO,GAAE;AAErBD,GAAG,CAACE,GAAG,CAAC,IAAAC,aAAI,GAAE,CAAC;AACfH,GAAG,CAACE,GAAG,CAACE,mBAAU,CAACC,IAAI,EAAE,CAAC;AAC1BL,GAAG,CAACE,GAAG,CAAC,cAAc,EAAEI,qBAAY,CAAC;AACrCN,GAAG,CAACE,GAAG,CAAC,YAAY,EAAEK,mBAAU,CAAC;AACjCP,GAAG,CAACE,GAAG,CAAC,eAAe,EAAEM,sBAAa,CAAC;AACvCR,GAAG,CAACE,GAAG,CAAC,aAAa,EAAEO,oBAAW,CAAC;;AAEnC;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEAT,GAAG,CAACU,GAAG,CAAC,sBAAsB,EAAE,CAACC,GAAG,EAAEC,GAAG,KAAK;EAC5CjB,OAAO,CAACC,GAAG,CAACL,OAAO,CAACC,GAAG,CAACqB,gBAAgB,CAAC;AAC3C,CAAC,CAAC;AAEFb,GAAG,CAACE,GAAG,CAAC,UAAU,EAAED,gBAAO,CAACa,MAAM,CAACC,aAAI,CAACC,IAAI,CAACC,SAAS,EAAE,aAAa,CAAC,CAAC,CAAC;AACxEjB,GAAG,CAACE,GAAG,CAACD,gBAAO,CAACa,MAAM,CAACC,aAAI,CAACC,IAAI,CAACC,SAAS,EAAE,cAAc,CAAC,CAAC,CAAC;AAC7DjB,GAAG,CAACU,GAAG,CAAC,GAAG,EAAE,CAACC,GAAG,EAAEC,GAAG,KAAK;EACzBA,GAAG,CAACM,QAAQ,CAACH,aAAI,CAACC,IAAI,CAACC,SAAS,EAAE,yBAAyB,CAAC,CAAC;AAC/D,CAAC,CAAC;AACFjB,GAAG,CAACE,GAAG,CAAC,CAACJ,GAAG,EAAEa,GAAG,EAAEC,GAAG,EAAEO,IAAI,KAAK;EAC/B,MAAMC,MAAM,GAAGtB,GAAG,CAACuB,IAAI,IAAIvB,GAAG,CAACuB,IAAI,KAAK,iBAAiB,GAAG,GAAG,GAAG,GAAG;EACrET,GAAG,CAACQ,MAAM,CAACA,MAAM,CAAC,CAACE,IAAI,CAAC;IAAEvB,OAAO,EAAED,GAAG,CAACC;EAAQ,CAAC,CAAC;AACnD,CAAC,CAAC;AACFC,GAAG,CAACuB,MAAM,CAAC,IAAI,EAAE,MAAM;EACrB5B,OAAO,CAACC,GAAG,CAAC,gCAAgC,CAAC;AAC/C,CAAC,CAAC"}},"mtime":1669886292677},"{\"assumptions\":{},\"sourceRoot\":\"/Users/thiago/Dev/workspace/prueba/Cadre Carton e-commerce/backend/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/thiago/Dev/workspace/prueba/Cadre Carton e-commerce\",\"filename\":\"/Users/thiago/Dev/workspace/prueba/Cadre Carton e-commerce/backend/config.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/thiago/Dev/workspace/prueba/Cadre Carton e-commerce\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.19.6:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _dotenv = _interopRequireDefault(require(\"dotenv\"));\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n_dotenv.default.config();\nvar _default = {\n  PORT: process.env.PORT || 5070,\n  MONGODB_URL: process.env.MONGODB_URL,\n  JWT_SECRET: process.env.JWT_SECRET,\n  PAYPAL_CLIENT_ID: process.env.PAYPAL_CLIENT_ID\n};\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJkb3RlbnYiLCJjb25maWciLCJQT1JUIiwicHJvY2VzcyIsImVudiIsIk1PTkdPREJfVVJMIiwiSldUX1NFQ1JFVCIsIlBBWVBBTF9DTElFTlRfSUQiXSwic291cmNlUm9vdCI6Ii9Vc2Vycy90aGlhZ28vRGV2L3dvcmtzcGFjZS9wcnVlYmEvQ2FkcmUgQ2FydG9uIGUtY29tbWVyY2UvYmFja2VuZC8iLCJzb3VyY2VzIjpbImNvbmZpZy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgZG90ZW52IGZyb20gJ2RvdGVudic7XG5cbmRvdGVudi5jb25maWcoKTtcblxuZXhwb3J0IGRlZmF1bHQge1xuICBQT1JUOiBwcm9jZXNzLmVudi5QT1JUIHx8IDUwNzAsXG4gIE1PTkdPREJfVVJMOiBwcm9jZXNzLmVudi5NT05HT0RCX1VSTCxcbiAgSldUX1NFQ1JFVDogcHJvY2Vzcy5lbnYuSldUX1NFQ1JFVCxcbiAgUEFZUEFMX0NMSUVOVF9JRDogcHJvY2Vzcy5lbnYuUEFZUEFMX0NMSUVOVF9JRCxcbn07XG4iXSwibWFwcGluZ3MiOiI7Ozs7OztBQUFBO0FBQTRCO0FBRTVCQSxlQUFNLENBQUNDLE1BQU0sRUFBRTtBQUFDLGVBRUQ7RUFDYkMsSUFBSSxFQUFFQyxPQUFPLENBQUNDLEdBQUcsQ0FBQ0YsSUFBSSxJQUFJLElBQUk7RUFDOUJHLFdBQVcsRUFBRUYsT0FBTyxDQUFDQyxHQUFHLENBQUNDLFdBQVc7RUFDcENDLFVBQVUsRUFBRUgsT0FBTyxDQUFDQyxHQUFHLENBQUNFLFVBQVU7RUFDbENDLGdCQUFnQixFQUFFSixPQUFPLENBQUNDLEdBQUcsQ0FBQ0c7QUFDaEMsQ0FBQztBQUFBIn0=","map":{"version":3,"names":["dotenv","config","PORT","process","env","MONGODB_URL","JWT_SECRET","PAYPAL_CLIENT_ID"],"sourceRoot":"/Users/thiago/Dev/workspace/prueba/Cadre Carton e-commerce/backend/","sources":["config.js"],"sourcesContent":["import dotenv from 'dotenv';\n\ndotenv.config();\n\nexport default {\n  PORT: process.env.PORT || 5070,\n  MONGODB_URL: process.env.MONGODB_URL,\n  JWT_SECRET: process.env.JWT_SECRET,\n  PAYPAL_CLIENT_ID: process.env.PAYPAL_CLIENT_ID,\n};\n"],"mappings":";;;;;;AAAA;AAA4B;AAE5BA,eAAM,CAACC,MAAM,EAAE;AAAC,eAED;EACbC,IAAI,EAAEC,OAAO,CAACC,GAAG,CAACF,IAAI,IAAI,IAAI;EAC9BG,WAAW,EAAEF,OAAO,CAACC,GAAG,CAACC,WAAW;EACpCC,UAAU,EAAEH,OAAO,CAACC,GAAG,CAACE,UAAU;EAClCC,gBAAgB,EAAEJ,OAAO,CAACC,GAAG,CAACG;AAChC,CAAC;AAAA"}},"mtime":1669886068927},"{\"assumptions\":{},\"sourceRoot\":\"/Users/thiago/Dev/workspace/prueba/Cadre Carton e-commerce/backend/routers/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/thiago/Dev/workspace/prueba/Cadre Carton e-commerce\",\"filename\":\"/Users/thiago/Dev/workspace/prueba/Cadre Carton e-commerce/backend/routers/userRouter.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/thiago/Dev/workspace/prueba/Cadre Carton e-commerce\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.19.6:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _express = _interopRequireDefault(require(\"express\"));\nvar _expressAsyncHandler = _interopRequireDefault(require(\"express-async-handler\"));\nvar _userModel = _interopRequireDefault(require(\"../models/userModel\"));\nvar _utils = require(\"../utils\");\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\nconst userRouter = _express.default.Router();\nuserRouter.get('/createadmin', (0, _expressAsyncHandler.default)(async (req, res) => {\n  try {\n    const user = new _userModel.default({\n      name: 'admin',\n      email: 'admin@example.com',\n      password: 'jsamazona',\n      isAdmin: true\n    });\n    const createdUser = await user.save();\n    res.send(createdUser);\n  } catch (err) {\n    res.status(500).send({\n      message: err.message\n    });\n  }\n}));\nuserRouter.post('/signin', (0, _expressAsyncHandler.default)(async (req, res) => {\n  const signinUser = await _userModel.default.findOne({\n    email: req.body.email,\n    password: req.body.password\n  });\n  if (!signinUser) {\n    res.status(401).send({\n      message: 'Invalid Email or Password'\n    });\n  } else {\n    res.send({\n      _id: signinUser._id,\n      name: signinUser.name,\n      email: signinUser.email,\n      isAdmin: signinUser.isAdmin,\n      token: (0, _utils.generateToken)(signinUser)\n    });\n  }\n}));\nuserRouter.post('/register', (0, _expressAsyncHandler.default)(async (req, res) => {\n  const user = new _userModel.default({\n    name: req.body.name,\n    email: req.body.email,\n    password: req.body.password\n  });\n  const createdUser = await user.save();\n  if (!createdUser) {\n    res.status(401).send({\n      message: 'Invalid User Data'\n    });\n  } else {\n    res.send({\n      _id: createdUser._id,\n      name: createdUser.name,\n      email: createdUser.email,\n      isAdmin: createdUser.isAdmin,\n      token: (0, _utils.generateToken)(createdUser)\n    });\n  }\n}));\nuserRouter.put('/:id', _utils.isAuth, (0, _expressAsyncHandler.default)(async (req, res) => {\n  const user = await _userModel.default.findById(req.params.id);\n  if (!user) {\n    res.status(404).send({\n      message: 'User Not Found'\n    });\n  } else {\n    user.name = req.body.name || user.name;\n    user.email = req.body.email || user.email;\n    user.password = req.body.password || user.password;\n    const updatedUser = await user.save();\n    res.send({\n      _id: updatedUser._id,\n      name: updatedUser.name,\n      email: updatedUser.email,\n      isAdmin: updatedUser.isAdmin,\n      token: (0, _utils.generateToken)(updatedUser)\n    });\n  }\n}));\nvar _default = userRouter;\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJ1c2VyUm91dGVyIiwiZXhwcmVzcyIsIlJvdXRlciIsImdldCIsImV4cHJlc3NBc3luY0hhbmRsZXIiLCJyZXEiLCJyZXMiLCJ1c2VyIiwiVXNlciIsIm5hbWUiLCJlbWFpbCIsInBhc3N3b3JkIiwiaXNBZG1pbiIsImNyZWF0ZWRVc2VyIiwic2F2ZSIsInNlbmQiLCJlcnIiLCJzdGF0dXMiLCJtZXNzYWdlIiwicG9zdCIsInNpZ25pblVzZXIiLCJmaW5kT25lIiwiYm9keSIsIl9pZCIsInRva2VuIiwiZ2VuZXJhdGVUb2tlbiIsInB1dCIsImlzQXV0aCIsImZpbmRCeUlkIiwicGFyYW1zIiwiaWQiLCJ1cGRhdGVkVXNlciJdLCJzb3VyY2VSb290IjoiL1VzZXJzL3RoaWFnby9EZXYvd29ya3NwYWNlL3BydWViYS9DYWRyZSBDYXJ0b24gZS1jb21tZXJjZS9iYWNrZW5kL3JvdXRlcnMvIiwic291cmNlcyI6WyJ1c2VyUm91dGVyLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBleHByZXNzIGZyb20gJ2V4cHJlc3MnO1xuaW1wb3J0IGV4cHJlc3NBc3luY0hhbmRsZXIgZnJvbSAnZXhwcmVzcy1hc3luYy1oYW5kbGVyJztcbmltcG9ydCBVc2VyIGZyb20gJy4uL21vZGVscy91c2VyTW9kZWwnO1xuaW1wb3J0IHsgZ2VuZXJhdGVUb2tlbiwgaXNBdXRoIH0gZnJvbSAnLi4vdXRpbHMnO1xuXG5jb25zdCB1c2VyUm91dGVyID0gZXhwcmVzcy5Sb3V0ZXIoKTtcblxudXNlclJvdXRlci5nZXQoXG4gICcvY3JlYXRlYWRtaW4nLFxuICBleHByZXNzQXN5bmNIYW5kbGVyKGFzeW5jIChyZXEsIHJlcykgPT4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCB1c2VyID0gbmV3IFVzZXIoe1xuICAgICAgICBuYW1lOiAnYWRtaW4nLFxuICAgICAgICBlbWFpbDogJ2FkbWluQGV4YW1wbGUuY29tJyxcbiAgICAgICAgcGFzc3dvcmQ6ICdqc2FtYXpvbmEnLFxuICAgICAgICBpc0FkbWluOiB0cnVlLFxuICAgICAgfSk7XG4gICAgICBjb25zdCBjcmVhdGVkVXNlciA9IGF3YWl0IHVzZXIuc2F2ZSgpO1xuICAgICAgcmVzLnNlbmQoY3JlYXRlZFVzZXIpO1xuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgcmVzLnN0YXR1cyg1MDApLnNlbmQoeyBtZXNzYWdlOiBlcnIubWVzc2FnZSB9KTtcbiAgICB9XG4gIH0pXG4pO1xudXNlclJvdXRlci5wb3N0KFxuICAnL3NpZ25pbicsXG4gIGV4cHJlc3NBc3luY0hhbmRsZXIoYXN5bmMgKHJlcSwgcmVzKSA9PiB7XG4gICAgY29uc3Qgc2lnbmluVXNlciA9IGF3YWl0IFVzZXIuZmluZE9uZSh7XG4gICAgICBlbWFpbDogcmVxLmJvZHkuZW1haWwsXG4gICAgICBwYXNzd29yZDogcmVxLmJvZHkucGFzc3dvcmQsXG4gICAgfSk7XG4gICAgaWYgKCFzaWduaW5Vc2VyKSB7XG4gICAgICByZXMuc3RhdHVzKDQwMSkuc2VuZCh7XG4gICAgICAgIG1lc3NhZ2U6ICdJbnZhbGlkIEVtYWlsIG9yIFBhc3N3b3JkJyxcbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXMuc2VuZCh7XG4gICAgICAgIF9pZDogc2lnbmluVXNlci5faWQsXG4gICAgICAgIG5hbWU6IHNpZ25pblVzZXIubmFtZSxcbiAgICAgICAgZW1haWw6IHNpZ25pblVzZXIuZW1haWwsXG4gICAgICAgIGlzQWRtaW46IHNpZ25pblVzZXIuaXNBZG1pbixcbiAgICAgICAgdG9rZW46IGdlbmVyYXRlVG9rZW4oc2lnbmluVXNlciksXG4gICAgICB9KTtcbiAgICB9XG4gIH0pXG4pO1xudXNlclJvdXRlci5wb3N0KFxuICAnL3JlZ2lzdGVyJyxcbiAgZXhwcmVzc0FzeW5jSGFuZGxlcihhc3luYyAocmVxLCByZXMpID0+IHtcbiAgICBjb25zdCB1c2VyID0gbmV3IFVzZXIoe1xuICAgICAgbmFtZTogcmVxLmJvZHkubmFtZSxcbiAgICAgIGVtYWlsOiByZXEuYm9keS5lbWFpbCxcbiAgICAgIHBhc3N3b3JkOiByZXEuYm9keS5wYXNzd29yZCxcbiAgICB9KTtcbiAgICBjb25zdCBjcmVhdGVkVXNlciA9IGF3YWl0IHVzZXIuc2F2ZSgpO1xuICAgIGlmICghY3JlYXRlZFVzZXIpIHtcbiAgICAgIHJlcy5zdGF0dXMoNDAxKS5zZW5kKHtcbiAgICAgICAgbWVzc2FnZTogJ0ludmFsaWQgVXNlciBEYXRhJyxcbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXMuc2VuZCh7XG4gICAgICAgIF9pZDogY3JlYXRlZFVzZXIuX2lkLFxuICAgICAgICBuYW1lOiBjcmVhdGVkVXNlci5uYW1lLFxuICAgICAgICBlbWFpbDogY3JlYXRlZFVzZXIuZW1haWwsXG4gICAgICAgIGlzQWRtaW46IGNyZWF0ZWRVc2VyLmlzQWRtaW4sXG4gICAgICAgIHRva2VuOiBnZW5lcmF0ZVRva2VuKGNyZWF0ZWRVc2VyKSxcbiAgICAgIH0pO1xuICAgIH1cbiAgfSlcbik7XG51c2VyUm91dGVyLnB1dChcbiAgJy86aWQnLFxuICBpc0F1dGgsXG4gIGV4cHJlc3NBc3luY0hhbmRsZXIoYXN5bmMgKHJlcSwgcmVzKSA9PiB7XG4gICAgY29uc3QgdXNlciA9IGF3YWl0IFVzZXIuZmluZEJ5SWQocmVxLnBhcmFtcy5pZCk7XG5cbiAgICBpZiAoIXVzZXIpIHtcbiAgICAgIHJlcy5zdGF0dXMoNDA0KS5zZW5kKHtcbiAgICAgICAgbWVzc2FnZTogJ1VzZXIgTm90IEZvdW5kJyxcbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICB1c2VyLm5hbWUgPSByZXEuYm9keS5uYW1lIHx8IHVzZXIubmFtZTtcbiAgICAgIHVzZXIuZW1haWwgPSByZXEuYm9keS5lbWFpbCB8fCB1c2VyLmVtYWlsO1xuICAgICAgdXNlci5wYXNzd29yZCA9IHJlcS5ib2R5LnBhc3N3b3JkIHx8IHVzZXIucGFzc3dvcmQ7XG4gICAgICBjb25zdCB1cGRhdGVkVXNlciA9IGF3YWl0IHVzZXIuc2F2ZSgpO1xuICAgICAgcmVzLnNlbmQoe1xuICAgICAgICBfaWQ6IHVwZGF0ZWRVc2VyLl9pZCxcbiAgICAgICAgbmFtZTogdXBkYXRlZFVzZXIubmFtZSxcbiAgICAgICAgZW1haWw6IHVwZGF0ZWRVc2VyLmVtYWlsLFxuICAgICAgICBpc0FkbWluOiB1cGRhdGVkVXNlci5pc0FkbWluLFxuICAgICAgICB0b2tlbjogZ2VuZXJhdGVUb2tlbih1cGRhdGVkVXNlciksXG4gICAgICB9KTtcbiAgICB9XG4gIH0pXG4pO1xuZXhwb3J0IGRlZmF1bHQgdXNlclJvdXRlcjtcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBaUQ7QUFFakQsTUFBTUEsVUFBVSxHQUFHQyxnQkFBTyxDQUFDQyxNQUFNLEVBQUU7QUFFbkNGLFVBQVUsQ0FBQ0csR0FBRyxDQUNaLGNBQWMsRUFDZCxJQUFBQyw0QkFBbUIsRUFBQyxPQUFPQyxHQUFHLEVBQUVDLEdBQUcsS0FBSztFQUN0QyxJQUFJO0lBQ0YsTUFBTUMsSUFBSSxHQUFHLElBQUlDLGtCQUFJLENBQUM7TUFDcEJDLElBQUksRUFBRSxPQUFPO01BQ2JDLEtBQUssRUFBRSxtQkFBbUI7TUFDMUJDLFFBQVEsRUFBRSxXQUFXO01BQ3JCQyxPQUFPLEVBQUU7SUFDWCxDQUFDLENBQUM7SUFDRixNQUFNQyxXQUFXLEdBQUcsTUFBTU4sSUFBSSxDQUFDTyxJQUFJLEVBQUU7SUFDckNSLEdBQUcsQ0FBQ1MsSUFBSSxDQUFDRixXQUFXLENBQUM7RUFDdkIsQ0FBQyxDQUFDLE9BQU9HLEdBQUcsRUFBRTtJQUNaVixHQUFHLENBQUNXLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQ0YsSUFBSSxDQUFDO01BQUVHLE9BQU8sRUFBRUYsR0FBRyxDQUFDRTtJQUFRLENBQUMsQ0FBQztFQUNoRDtBQUNGLENBQUMsQ0FBQyxDQUNIO0FBQ0RsQixVQUFVLENBQUNtQixJQUFJLENBQ2IsU0FBUyxFQUNULElBQUFmLDRCQUFtQixFQUFDLE9BQU9DLEdBQUcsRUFBRUMsR0FBRyxL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","map":{"version":3,"names":["userRouter","express","Router","get","expressAsyncHandler","req","res","user","User","name","email","password","isAdmin","createdUser","save","send","err","status","message","post","signinUser","findOne","body","_id","token","generateToken","put","isAuth","findById","params","id","updatedUser"],"sourceRoot":"/Users/thiago/Dev/workspace/prueba/Cadre Carton e-commerce/backend/routers/","sources":["userRouter.js"],"sourcesContent":["import express from 'express';\nimport expressAsyncHandler from 'express-async-handler';\nimport User from '../models/userModel';\nimport { generateToken, isAuth } from '../utils';\n\nconst userRouter = express.Router();\n\nuserRouter.get(\n  '/createadmin',\n  expressAsyncHandler(async (req, res) => {\n    try {\n      const user = new User({\n        name: 'admin',\n        email: 'admin@example.com',\n        password: 'jsamazona',\n        isAdmin: true,\n      });\n      const createdUser = await user.save();\n      res.send(createdUser);\n    } catch (err) {\n      res.status(500).send({ message: err.message });\n    }\n  })\n);\nuserRouter.post(\n  '/signin',\n  expressAsyncHandler(async (req, res) => {\n    const signinUser = await User.findOne({\n      email: req.body.email,\n      password: req.body.password,\n    });\n    if (!signinUser) {\n      res.status(401).send({\n        message: 'Invalid Email or Password',\n      });\n    } else {\n      res.send({\n        _id: signinUser._id,\n        name: signinUser.name,\n        email: signinUser.email,\n        isAdmin: signinUser.isAdmin,\n        token: generateToken(signinUser),\n      });\n    }\n  })\n);\nuserRouter.post(\n  '/register',\n  expressAsyncHandler(async (req, res) => {\n    const user = new User({\n      name: req.body.name,\n      email: req.body.email,\n      password: req.body.password,\n    });\n    const createdUser = await user.save();\n    if (!createdUser) {\n      res.status(401).send({\n        message: 'Invalid User Data',\n      });\n    } else {\n      res.send({\n        _id: createdUser._id,\n        name: createdUser.name,\n        email: createdUser.email,\n        isAdmin: createdUser.isAdmin,\n        token: generateToken(createdUser),\n      });\n    }\n  })\n);\nuserRouter.put(\n  '/:id',\n  isAuth,\n  expressAsyncHandler(async (req, res) => {\n    const user = await User.findById(req.params.id);\n\n    if (!user) {\n      res.status(404).send({\n        message: 'User Not Found',\n      });\n    } else {\n      user.name = req.body.name || user.name;\n      user.email = req.body.email || user.email;\n      user.password = req.body.password || user.password;\n      const updatedUser = await user.save();\n      res.send({\n        _id: updatedUser._id,\n        name: updatedUser.name,\n        email: updatedUser.email,\n        isAdmin: updatedUser.isAdmin,\n        token: generateToken(updatedUser),\n      });\n    }\n  })\n);\nexport default userRouter;\n"],"mappings":"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"}},"mtime":1668842268000},"{\"assumptions\":{},\"sourceRoot\":\"/Users/thiago/Dev/workspace/prueba/Cadre Carton e-commerce/backend/models/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/thiago/Dev/workspace/prueba/Cadre Carton e-commerce\",\"filename\":\"/Users/thiago/Dev/workspace/prueba/Cadre Carton e-commerce/backend/models/userModel.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/thiago/Dev/workspace/prueba/Cadre Carton e-commerce\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.19.6:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _mongoose = _interopRequireDefault(require(\"mongoose\"));\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\nconst userSchema = new _mongoose.default.Schema({\n  name: {\n    type: String,\n    required: true\n  },\n  email: {\n    type: String,\n    required: true,\n    index: true,\n    unique: true\n  },\n  password: {\n    type: String,\n    required: true\n  },\n  isAdmin: {\n    type: Boolean,\n    required: true,\n    default: false\n  }\n});\nconst User = _mongoose.default.model('User', userSchema);\nvar _default = User;\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJ1c2VyU2NoZW1hIiwibW9uZ29vc2UiLCJTY2hlbWEiLCJuYW1lIiwidHlwZSIsIlN0cmluZyIsInJlcXVpcmVkIiwiZW1haWwiLCJpbmRleCIsInVuaXF1ZSIsInBhc3N3b3JkIiwiaXNBZG1pbiIsIkJvb2xlYW4iLCJkZWZhdWx0IiwiVXNlciIsIm1vZGVsIl0sInNvdXJjZVJvb3QiOiIvVXNlcnMvdGhpYWdvL0Rldi93b3Jrc3BhY2UvcHJ1ZWJhL0NhZHJlIENhcnRvbiBlLWNvbW1lcmNlL2JhY2tlbmQvbW9kZWxzLyIsInNvdXJjZXMiOlsidXNlck1vZGVsLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBtb25nb29zZSBmcm9tICdtb25nb29zZSc7XG5cbmNvbnN0IHVzZXJTY2hlbWEgPSBuZXcgbW9uZ29vc2UuU2NoZW1hKHtcbiAgbmFtZTogeyB0eXBlOiBTdHJpbmcsIHJlcXVpcmVkOiB0cnVlIH0sXG4gIGVtYWlsOiB7XG4gICAgdHlwZTogU3RyaW5nLFxuICAgIHJlcXVpcmVkOiB0cnVlLFxuICAgIGluZGV4OiB0cnVlLFxuICAgIHVuaXF1ZTogdHJ1ZSxcbiAgfSxcbiAgcGFzc3dvcmQ6IHsgdHlwZTogU3RyaW5nLCByZXF1aXJlZDogdHJ1ZSB9LFxuICBpc0FkbWluOiB7IHR5cGU6IEJvb2xlYW4sIHJlcXVpcmVkOiB0cnVlLCBkZWZhdWx0OiBmYWxzZSB9LFxufSk7XG5jb25zdCBVc2VyID0gbW9uZ29vc2UubW9kZWwoJ1VzZXInLCB1c2VyU2NoZW1hKTtcbmV4cG9ydCBkZWZhdWx0IFVzZXI7XG4iXSwibWFwcGluZ3MiOiI7Ozs7OztBQUFBO0FBQWdDO0FBRWhDLE1BQU1BLFVBQVUsR0FBRyxJQUFJQyxpQkFBUSxDQUFDQyxNQUFNLENBQUM7RUFDckNDLElBQUksRUFBRTtJQUFFQyxJQUFJLEVBQUVDLE1BQU07SUFBRUMsUUFBUSxFQUFFO0VBQUssQ0FBQztFQUN0Q0MsS0FBSyxFQUFFO0lBQ0xILElBQUksRUFBRUMsTUFBTTtJQUNaQyxRQUFRLEVBQUUsSUFBSTtJQUNkRSxLQUFLLEVBQUUsSUFBSTtJQUNYQyxNQUFNLEVBQUU7RUFDVixDQUFDO0VBQ0RDLFFBQVEsRUFBRTtJQUFFTixJQUFJLEVBQUVDLE1BQU07SUFBRUMsUUFBUSxFQUFFO0VBQUssQ0FBQztFQUMxQ0ssT0FBTyxFQUFFO0lBQUVQLElBQUksRUFBRVEsT0FBTztJQUFFTixRQUFRLEVBQUUsSUFBSTtJQUFFTyxPQUFPLEVBQUU7RUFBTTtBQUMzRCxDQUFDLENBQUM7QUFDRixNQUFNQyxJQUFJLEdBQUdiLGlCQUFRLENBQUNjLEtBQUssQ0FBQyxNQUFNLEVBQUVmLFVBQVUsQ0FBQztBQUFDLGVBQ2pDYyxJQUFJO0FBQUEifQ==","map":{"version":3,"names":["userSchema","mongoose","Schema","name","type","String","required","email","index","unique","password","isAdmin","Boolean","default","User","model"],"sourceRoot":"/Users/thiago/Dev/workspace/prueba/Cadre Carton e-commerce/backend/models/","sources":["userModel.js"],"sourcesContent":["import mongoose from 'mongoose';\n\nconst userSchema = new mongoose.Schema({\n  name: { type: String, required: true },\n  email: {\n    type: String,\n    required: true,\n    index: true,\n    unique: true,\n  },\n  password: { type: String, required: true },\n  isAdmin: { type: Boolean, required: true, default: false },\n});\nconst User = mongoose.model('User', userSchema);\nexport default User;\n"],"mappings":";;;;;;AAAA;AAAgC;AAEhC,MAAMA,UAAU,GAAG,IAAIC,iBAAQ,CAACC,MAAM,CAAC;EACrCC,IAAI,EAAE;IAAEC,IAAI,EAAEC,MAAM;IAAEC,QAAQ,EAAE;EAAK,CAAC;EACtCC,KAAK,EAAE;IACLH,IAAI,EAAEC,MAAM;IACZC,QAAQ,EAAE,IAAI;IACdE,KAAK,EAAE,IAAI;IACXC,MAAM,EAAE;EACV,CAAC;EACDC,QAAQ,EAAE;IAAEN,IAAI,EAAEC,MAAM;IAAEC,QAAQ,EAAE;EAAK,CAAC;EAC1CK,OAAO,EAAE;IAAEP,IAAI,EAAEQ,OAAO;IAAEN,QAAQ,EAAE,IAAI;IAAEO,OAAO,EAAE;EAAM;AAC3D,CAAC,CAAC;AACF,MAAMC,IAAI,GAAGb,iBAAQ,CAACc,KAAK,CAAC,MAAM,EAAEf,UAAU,CAAC;AAAC,eACjCc,IAAI;AAAA"}},"mtime":1668842268000},"{\"assumptions\":{},\"sourceRoot\":\"/Users/thiago/Dev/workspace/prueba/Cadre Carton e-commerce/backend/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/thiago/Dev/workspace/prueba/Cadre Carton e-commerce\",\"filename\":\"/Users/thiago/Dev/workspace/prueba/Cadre Carton e-commerce/backend/utils.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/thiago/Dev/workspace/prueba/Cadre Carton e-commerce\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.19.6:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.isAuth = exports.isAdmin = exports.generateToken = void 0;\nvar _jsonwebtoken = _interopRequireDefault(require(\"jsonwebtoken\"));\nvar _config = _interopRequireDefault(require(\"./config\"));\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\nconst generateToken = user => _jsonwebtoken.default.sign({\n  _id: user._id,\n  name: user.name,\n  email: user.email,\n  isAdmin: user.isAdmin\n}, _config.default.JWT_SECRET);\nexports.generateToken = generateToken;\nconst isAuth = (req, res, next) => {\n  const bearerToken = req.headers.authorization;\n  if (!bearerToken) {\n    res.status(401).send({\n      message: 'Token is not supplied'\n    });\n  } else {\n    const token = bearerToken.slice(7, bearerToken.length);\n    _jsonwebtoken.default.verify(token, _config.default.JWT_SECRET, (err, data) => {\n      if (err) {\n        res.status(401).send({\n          message: 'Invalid Token'\n        });\n      } else {\n        req.user = data;\n        next();\n      }\n    });\n  }\n};\nexports.isAuth = isAuth;\nconst isAdmin = (req, res, next) => {\n  if (req.user && req.user.isAdmin) {\n    next();\n  } else {\n    res.status(401).send({\n      message: 'Token is not valid for admin user'\n    });\n  }\n};\nexports.isAdmin = isAdmin;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJnZW5lcmF0ZVRva2VuIiwidXNlciIsImp3dCIsInNpZ24iLCJfaWQiLCJuYW1lIiwiZW1haWwiLCJpc0FkbWluIiwiY29uZmlnIiwiSldUX1NFQ1JFVCIsImlzQXV0aCIsInJlcSIsInJlcyIsIm5leHQiLCJiZWFyZXJUb2tlbiIsImhlYWRlcnMiLCJhdXRob3JpemF0aW9uIiwic3RhdHVzIiwic2VuZCIsIm1lc3NhZ2UiLCJ0b2tlbiIsInNsaWNlIiwibGVuZ3RoIiwidmVyaWZ5IiwiZXJyIiwiZGF0YSJdLCJzb3VyY2VSb290IjoiL1VzZXJzL3RoaWFnby9EZXYvd29ya3NwYWNlL3BydWViYS9DYWRyZSBDYXJ0b24gZS1jb21tZXJjZS9iYWNrZW5kLyIsInNvdXJjZXMiOlsidXRpbHMuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGp3dCBmcm9tICdqc29ud2VidG9rZW4nO1xuaW1wb3J0IGNvbmZpZyBmcm9tICcuL2NvbmZpZyc7XG5cbmV4cG9ydCBjb25zdCBnZW5lcmF0ZVRva2VuID0gKHVzZXIpID0+IGp3dC5zaWduKFxuICAgIHtcbiAgICAgIF9pZDogdXNlci5faWQsXG4gICAgICBuYW1lOiB1c2VyLm5hbWUsXG4gICAgICBlbWFpbDogdXNlci5lbWFpbCxcbiAgICAgIGlzQWRtaW46IHVzZXIuaXNBZG1pbixcbiAgICB9LFxuICAgIGNvbmZpZy5KV1RfU0VDUkVUXG4gICk7XG5leHBvcnQgY29uc3QgaXNBdXRoID0gKHJlcSwgcmVzLCBuZXh0KSA9PiB7XG4gIGNvbnN0IGJlYXJlclRva2VuID0gcmVxLmhlYWRlcnMuYXV0aG9yaXphdGlvbjtcbiAgaWYgKCFiZWFyZXJUb2tlbikge1xuICAgIHJlcy5zdGF0dXMoNDAxKS5zZW5kKHsgbWVzc2FnZTogJ1Rva2VuIGlzIG5vdCBzdXBwbGllZCcgfSk7XG4gIH0gZWxzZSB7XG4gICAgY29uc3QgdG9rZW4gPSBiZWFyZXJUb2tlbi5zbGljZSg3LCBiZWFyZXJUb2tlbi5sZW5ndGgpO1xuICAgIGp3dC52ZXJpZnkodG9rZW4sIGNvbmZpZy5KV1RfU0VDUkVULCAoZXJyLCBkYXRhKSA9PiB7XG4gICAgICBpZiAoZXJyKSB7XG4gICAgICAgIHJlcy5zdGF0dXMoNDAxKS5zZW5kKHsgbWVzc2FnZTogJ0ludmFsaWQgVG9rZW4nIH0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmVxLnVzZXIgPSBkYXRhO1xuICAgICAgICBuZXh0KCk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cbn07XG5leHBvcnQgY29uc3QgaXNBZG1pbiA9IChyZXEsIHJlcywgbmV4dCkgPT4ge1xuICBpZiAocmVxLnVzZXIgJiYgcmVxLnVzZXIuaXNBZG1pbikge1xuICAgIG5leHQoKTtcbiAgfSBlbHNlIHtcbiAgICByZXMuc3RhdHVzKDQwMSkuc2VuZCh7IG1lc3NhZ2U6ICdUb2tlbiBpcyBub3QgdmFsaWQgZm9yIGFkbWluIHVzZXInIH0pO1xuICB9XG59O1xuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7QUFBQTtBQUNBO0FBQThCO0FBRXZCLE1BQU1BLGFBQWEsR0FBSUMsSUFBSSxJQUFLQyxxQkFBRyxDQUFDQyxJQUFJLENBQzNDO0VBQ0VDLEdBQUcsRUFBRUgsSUFBSSxDQUFDRyxHQUFHO0VBQ2JDLElBQUksRUFBRUosSUFBSSxDQUFDSSxJQUFJO0VBQ2ZDLEtBQUssRUFBRUwsSUFBSSxDQUFDSyxLQUFLO0VBQ2pCQyxPQUFPLEVBQUVOLElBQUksQ0FBQ007QUFDaEIsQ0FBQyxFQUNEQyxlQUFNLENBQUNDLFVBQVUsQ0FDbEI7QUFBQztBQUNHLE1BQU1DLE1BQU0sR0FBRyxDQUFDQyxHQUFHLEVBQUVDLEdBQUcsRUFBRUMsSUFBSSxLQUFLO0VBQ3hDLE1BQU1DLFdBQVcsR0FBR0gsR0FBRyxDQUFDSSxPQUFPLENBQUNDLGFBQWE7RUFDN0MsSUFBSSxDQUFDRixXQUFXLEVBQUU7SUFDaEJGLEdBQUcsQ0FBQ0ssTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDQyxJQUFJLENBQUM7TUFBRUMsT0FBTyxFQUFFO0lBQXdCLENBQUMsQ0FBQztFQUM1RCxDQUFDLE1BQU07SUFDTCxNQUFNQyxLQUFLLEdBQUdOLFdBQVcsQ0FBQ08sS0FBSyxDQUFDLENBQUMsRUFBRVAsV0FBVyxDQUFDUSxNQUFNLENBQUM7SUFDdERwQixxQkFBRyxDQUFDcUIsTUFBTSxDQUFDSCxLQUFLLEVBQUVaLGVBQU0sQ0FBQ0MsVUFBVSxFQUFFLENBQUNlLEdBQUcsRUFBRUMsSUFBSSxLQUFLO01BQ2xELElBQUlELEdBQUcsRUFBRTtRQUNQWixHQUFHLENBQUNLLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQ0MsSUFBSSxDQUFDO1VBQUVDLE9BQU8sRUFBRTtRQUFnQixDQUFDLENBQUM7TUFDcEQsQ0FBQyxNQUFNO1FBQ0xSLEdBQUcsQ0FBQ1YsSUFBSSxHQUFHd0IsSUFBSTtRQUNmWixJQUFJLEVBQUU7TUFDUjtJQUNGLENBQUMsQ0FBQztFQUNKO0FBQ0YsQ0FBQztBQUFDO0FBQ0ssTUFBTU4sT0FBTyxHQUFHLENBQUNJLEdBQUcsRUFBRUMsR0FBRyxFQUFFQyxJQUFJLEtBQUs7RUFDekMsSUFBSUYsR0FBRyxDQUFDVixJQUFJLElBQUlVLEdBQUcsQ0FBQ1YsSUFBSSxDQUFDTSxPQUFPLEVBQUU7SUFDaENNLElBQUksRUFBRTtFQUNSLENBQUMsTUFBTTtJQUNMRCxHQUFHLENBQUNLLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQ0MsSUFBSSxDQUFDO01BQUVDLE9BQU8sRUFBRTtJQUFvQyxDQUFDLENBQUM7RUFDeEU7QUFDRixDQUFDO0FBQUMifQ==","map":{"version":3,"names":["generateToken","user","jwt","sign","_id","name","email","isAdmin","config","JWT_SECRET","isAuth","req","res","next","bearerToken","headers","authorization","status","send","message","token","slice","length","verify","err","data"],"sourceRoot":"/Users/thiago/Dev/workspace/prueba/Cadre Carton e-commerce/backend/","sources":["utils.js"],"sourcesContent":["import jwt from 'jsonwebtoken';\nimport config from './config';\n\nexport const generateToken = (user) => jwt.sign(\n    {\n      _id: user._id,\n      name: user.name,\n      email: user.email,\n      isAdmin: user.isAdmin,\n    },\n    config.JWT_SECRET\n  );\nexport const isAuth = (req, res, next) => {\n  const bearerToken = req.headers.authorization;\n  if (!bearerToken) {\n    res.status(401).send({ message: 'Token is not supplied' });\n  } else {\n    const token = bearerToken.slice(7, bearerToken.length);\n    jwt.verify(token, config.JWT_SECRET, (err, data) => {\n      if (err) {\n        res.status(401).send({ message: 'Invalid Token' });\n      } else {\n        req.user = data;\n        next();\n      }\n    });\n  }\n};\nexport const isAdmin = (req, res, next) => {\n  if (req.user && req.user.isAdmin) {\n    next();\n  } else {\n    res.status(401).send({ message: 'Token is not valid for admin user' });\n  }\n};\n"],"mappings":";;;;;;AAAA;AACA;AAA8B;AAEvB,MAAMA,aAAa,GAAIC,IAAI,IAAKC,qBAAG,CAACC,IAAI,CAC3C;EACEC,GAAG,EAAEH,IAAI,CAACG,GAAG;EACbC,IAAI,EAAEJ,IAAI,CAACI,IAAI;EACfC,KAAK,EAAEL,IAAI,CAACK,KAAK;EACjBC,OAAO,EAAEN,IAAI,CAACM;AAChB,CAAC,EACDC,eAAM,CAACC,UAAU,CAClB;AAAC;AACG,MAAMC,MAAM,GAAG,CAACC,GAAG,EAAEC,GAAG,EAAEC,IAAI,KAAK;EACxC,MAAMC,WAAW,GAAGH,GAAG,CAACI,OAAO,CAACC,aAAa;EAC7C,IAAI,CAACF,WAAW,EAAE;IAChBF,GAAG,CAACK,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;MAAEC,OAAO,EAAE;IAAwB,CAAC,CAAC;EAC5D,CAAC,MAAM;IACL,MAAMC,KAAK,GAAGN,WAAW,CAACO,KAAK,CAAC,CAAC,EAAEP,WAAW,CAACQ,MAAM,CAAC;IACtDpB,qBAAG,CAACqB,MAAM,CAACH,KAAK,EAAEZ,eAAM,CAACC,UAAU,EAAE,CAACe,GAAG,EAAEC,IAAI,KAAK;MAClD,IAAID,GAAG,EAAE;QACPZ,GAAG,CAACK,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;UAAEC,OAAO,EAAE;QAAgB,CAAC,CAAC;MACpD,CAAC,MAAM;QACLR,GAAG,CAACV,IAAI,GAAGwB,IAAI;QACfZ,IAAI,EAAE;MACR;IACF,CAAC,CAAC;EACJ;AACF,CAAC;AAAC;AACK,MAAMN,OAAO,GAAG,CAACI,GAAG,EAAEC,GAAG,EAAEC,IAAI,KAAK;EACzC,IAAIF,GAAG,CAACV,IAAI,IAAIU,GAAG,CAACV,IAAI,CAACM,OAAO,EAAE;IAChCM,IAAI,EAAE;EACR,CAAC,MAAM;IACLD,GAAG,CAACK,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;MAAEC,OAAO,EAAE;IAAoC,CAAC,CAAC;EACxE;AACF,CAAC;AAAC"}},"mtime":1669886495869},"{\"assumptions\":{},\"sourceRoot\":\"/Users/thiago/Dev/workspace/prueba/Cadre Carton e-commerce/backend/routers/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/thiago/Dev/workspace/prueba/Cadre Carton e-commerce\",\"filename\":\"/Users/thiago/Dev/workspace/prueba/Cadre Carton e-commerce/backend/routers/orderRouter.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/thiago/Dev/workspace/prueba/Cadre Carton e-commerce\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.19.6:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _express = _interopRequireDefault(require(\"express\"));\nvar _expressAsyncHandler = _interopRequireDefault(require(\"express-async-handler\"));\nvar _utils = require(\"../utils\");\nvar _orderModel = _interopRequireDefault(require(\"../models/orderModel\"));\nvar _userModel = _interopRequireDefault(require(\"../models/userModel\"));\nvar _productModel = _interopRequireDefault(require(\"../models/productModel\"));\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\nconst orderRouter = _express.default.Router();\norderRouter.get('/summary', _utils.isAuth, _utils.isAdmin, (0, _expressAsyncHandler.default)(async (req, res) => {\n  const orders = await _orderModel.default.aggregate([{\n    $group: {\n      _id: null,\n      numOrders: {\n        $sum: 1\n      },\n      totalSales: {\n        $sum: '$totalPrice'\n      }\n    }\n  }]);\n  const users = await _userModel.default.aggregate([{\n    $group: {\n      _id: null,\n      numUsers: {\n        $sum: 1\n      }\n    }\n  }]);\n  const dailyOrders = await _orderModel.default.aggregate([{\n    $group: {\n      _id: {\n        $dateToString: {\n          format: '%Y-%m-%d',\n          date: '$createdAt'\n        }\n      },\n      orders: {\n        $sum: 1\n      },\n      sales: {\n        $sum: '$totalPrice'\n      }\n    }\n  }]);\n  const productCategories = await _productModel.default.aggregate([{\n    $group: {\n      _id: '$category',\n      count: {\n        $sum: 1\n      }\n    }\n  }]);\n  res.send({\n    users,\n    orders: orders.length === 0 ? [{\n      numOrders: 0,\n      totalSales: 0\n    }] : orders,\n    dailyOrders,\n    productCategories\n  });\n}));\norderRouter.get('/', _utils.isAuth, _utils.isAdmin, (0, _expressAsyncHandler.default)(async (req, res) => {\n  const orders = await _orderModel.default.find({}).populate('user');\n  res.send(orders);\n}));\norderRouter.get('/mine', _utils.isAuth, (0, _expressAsyncHandler.default)(async (req, res) => {\n  const orders = await _orderModel.default.find({\n    user: req.user._id\n  });\n  res.send(orders);\n}));\norderRouter.get('/:id', _utils.isAuth, (0, _expressAsyncHandler.default)(async (req, res) => {\n  const order = await _orderModel.default.findById(req.params.id);\n  if (order) {\n    res.send(order);\n  } else {\n    res.status(404).send({\n      message: 'Order Not Found'\n    });\n  }\n}));\norderRouter.post('/', _utils.isAuth, (0, _expressAsyncHandler.default)(async (req, res) => {\n  const order = new _orderModel.default({\n    orderItems: req.body.orderItems,\n    user: req.user._id,\n    shipping: req.body.shipping,\n    payment: req.body.payment,\n    itemsPrice: req.body.itemsPrice,\n    taxPrice: req.body.taxPrice,\n    shippingPrice: req.body.shippingPrice,\n    totalPrice: req.body.totalPrice\n  });\n  const createdOrder = await order.save();\n  res.status(201).send({\n    message: 'New Order Created',\n    order: createdOrder\n  });\n}));\norderRouter.delete('/:id', _utils.isAuth, _utils.isAdmin, (0, _expressAsyncHandler.default)(async (req, res) => {\n  const order = await _orderModel.default.findById(req.params.id);\n  if (order) {\n    const deletedOrder = await order.remove();\n    res.send({\n      message: 'Order Deleted',\n      product: deletedOrder\n    });\n  } else {\n    res.status(404).send({\n      message: 'Order Not Found'\n    });\n  }\n}));\norderRouter.put('/:id/pay', _utils.isAuth, (0, _expressAsyncHandler.default)(async (req, res) => {\n  const order = await _orderModel.default.findById(req.params.id);\n  if (order) {\n    order.isPaid = true;\n    order.paidAt = Date.now();\n    order.payment.paymentResult = {\n      payerID: req.body.payerID,\n      paymentID: req.body.paymentID,\n      orderID: req.body.orderID\n    };\n    const updatedOrder = await order.save();\n    res.send({\n      message: 'Order Paid',\n      order: updatedOrder\n    });\n  } else {\n    res.status(404).send({\n      message: 'Order Not Found.'\n    });\n  }\n}));\norderRouter.put('/:id/deliver', _utils.isAuth, (0, _expressAsyncHandler.default)(async (req, res) => {\n  const order = await _orderModel.default.findById(req.params.id);\n  if (order) {\n    order.isDelivered = true;\n    order.deliveredAt = Date.now();\n    const updatedOrder = await order.save();\n    res.send({\n      message: 'Order Delivered',\n      order: updatedOrder\n    });\n  } else {\n    res.status(404).send({\n      message: 'Order Not Found.'\n    });\n  }\n}));\nvar _default = orderRouter;\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJvcmRlclJvdXRlciIsImV4cHJlc3MiLCJSb3V0ZXIiLCJnZXQiLCJpc0F1dGgiLCJpc0FkbWluIiwiZXhwcmVzc0FzeW5jSGFuZGxlciIsInJlcSIsInJlcyIsIm9yZGVycyIsIk9yZGVyIiwiYWdncmVnYXRlIiwiJGdyb3VwIiwiX2lkIiwibnVtT3JkZXJzIiwiJHN1bSIsInRvdGFsU2FsZXMiLCJ1c2VycyIsIlVzZXIiLCJudW1Vc2VycyIsImRhaWx5T3JkZXJzIiwiJGRhdGVUb1N0cmluZyIsImZvcm1hdCIsImRhdGUiLCJzYWxlcyIsInByb2R1Y3RDYXRlZ29yaWVzIiwiUHJvZHVjdCIsImNvdW50Iiwic2VuZCIsImxlbmd0aCIsImZpbmQiLCJwb3B1bGF0ZSIsInVzZXIiLCJvcmRlciIsImZpbmRCeUlkIiwicGFyYW1zIiwiaWQiLCJzdGF0dXMiLCJtZXNzYWdlIiwicG9zdCIsIm9yZGVySXRlbXMiLCJib2R5Iiwic2hpcHBpbmciLCJwYXltZW50IiwiaXRlbXNQcmljZSIsInRheFByaWNlIiwic2hpcHBpbmdQcmljZSIsInRvdGFsUHJpY2UiLCJjcmVhdGVkT3JkZXIiLCJzYXZlIiwiZGVsZXRlIiwiZGVsZXRlZE9yZGVyIiwicmVtb3ZlIiwicHJvZHVjdCIsInB1dCIsImlzUGFpZCIsInBhaWRBdCIsIkRhdGUiLCJub3ciLCJwYXltZW50UmVzdWx0IiwicGF5ZXJJRCIsInBheW1lbnRJRCIsIm9yZGVySUQiLCJ1cGRhdGVkT3JkZXIiLCJpc0RlbGl2ZXJlZCIsImRlbGl2ZXJlZEF0Il0sInNvdXJjZVJvb3QiOiIvVXNlcnMvdGhpYWdvL0Rldi93b3Jrc3BhY2UvcHJ1ZWJhL0NhZHJlIENhcnRvbiBlLWNvbW1lcmNlL2JhY2tlbmQvcm91dGVycy8iLCJzb3VyY2VzIjpbIm9yZGVyUm91dGVyLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBleHByZXNzIGZyb20gJ2V4cHJlc3MnO1xuaW1wb3J0IGV4cHJlc3NBc3luY0hhbmRsZXIgZnJvbSAnZXhwcmVzcy1hc3luYy1oYW5kbGVyJztcbmltcG9ydCB7IGlzQXV0aCwgaXNBZG1pbiB9IGZyb20gJy4uL3V0aWxzJztcbmltcG9ydCBPcmRlciBmcm9tICcuLi9tb2RlbHMvb3JkZXJNb2RlbCc7XG5pbXBvcnQgVXNlciBmcm9tICcuLi9tb2RlbHMvdXNlck1vZGVsJztcbmltcG9ydCBQcm9kdWN0IGZyb20gJy4uL21vZGVscy9wcm9kdWN0TW9kZWwnO1xuXG5jb25zdCBvcmRlclJvdXRlciA9IGV4cHJlc3MuUm91dGVyKCk7XG5vcmRlclJvdXRlci5nZXQoXG4gICcvc3VtbWFyeScsXG4gIGlzQXV0aCxcbiAgaXNBZG1pbixcbiAgZXhwcmVzc0FzeW5jSGFuZGxlcihhc3luYyAocmVxLCByZXMpID0+IHtcbiAgICBjb25zdCBvcmRlcnMgPSBhd2FpdCBPcmRlci5hZ2dyZWdhdGUoW1xuICAgICAge1xuICAgICAgICAkZ3JvdXA6IHtcbiAgICAgICAgICBfaWQ6IG51bGwsXG4gICAgICAgICAgbnVtT3JkZXJzOiB7ICRzdW06IDEgfSxcbiAgICAgICAgICB0b3RhbFNhbGVzOiB7ICRzdW06ICckdG90YWxQcmljZScgfSxcbiAgICAgICAgfSxcbiAgICAgIH0sXG4gICAgXSk7XG4gICAgY29uc3QgdXNlcnMgPSBhd2FpdCBVc2VyLmFnZ3JlZ2F0ZShbXG4gICAgICB7XG4gICAgICAgICRncm91cDoge1xuICAgICAgICAgIF9pZDogbnVsbCxcbiAgICAgICAgICBudW1Vc2VyczogeyAkc3VtOiAxIH0sXG4gICAgICAgIH0sXG4gICAgICB9LFxuICAgIF0pO1xuICAgIGNvbnN0IGRhaWx5T3JkZXJzID0gYXdhaXQgT3JkZXIuYWdncmVnYXRlKFtcbiAgICAgIHtcbiAgICAgICAgJGdyb3VwOiB7XG4gICAgICAgICAgX2lkOiB7ICRkYXRlVG9TdHJpbmc6IHsgZm9ybWF0OiAnJVktJW0tJWQnLCBkYXRlOiAnJGNyZWF0ZWRBdCcgfSB9LFxuICAgICAgICAgIG9yZGVyczogeyAkc3VtOiAxIH0sXG4gICAgICAgICAgc2FsZXM6IHsgJHN1bTogJyR0b3RhbFByaWNlJyB9LFxuICAgICAgICB9LFxuICAgICAgfSxcbiAgICBdKTtcbiAgICBjb25zdCBwcm9kdWN0Q2F0ZWdvcmllcyA9IGF3YWl0IFByb2R1Y3QuYWdncmVnYXRlKFtcbiAgICAgIHtcbiAgICAgICAgJGdyb3VwOiB7XG4gICAgICAgICAgX2lkOiAnJGNhdGVnb3J5JyxcbiAgICAgICAgICBjb3VudDogeyAkc3VtOiAxIH0sXG4gICAgICAgIH0sXG4gICAgICB9LFxuICAgIF0pO1xuICAgIHJlcy5zZW5kKHtcbiAgICAgIHVzZXJzLFxuICAgICAgb3JkZXJzOiBvcmRlcnMubGVuZ3RoID09PSAwID8gW3sgbnVtT3JkZXJzOiAwLCB0b3RhbFNhbGVzOiAwIH1dIDogb3JkZXJzLFxuICAgICAgZGFpbHlPcmRlcnMsXG4gICAgICBwcm9kdWN0Q2F0ZWdvcmllcyxcbiAgICB9KTtcbiAgfSlcbik7XG5vcmRlclJvdXRlci5nZXQoXG4gICcvJyxcbiAgaXNBdXRoLFxuICBpc0FkbWluLFxuICBleHByZXNzQXN5bmNIYW5kbGVyKGFzeW5jIChyZXEsIHJlcykgPT4ge1xuICAgIGNvbnN0IG9yZGVycyA9IGF3YWl0IE9yZGVyLmZpbmQoe30pLnBvcHVsYXRlKCd1c2VyJyk7XG4gICAgcmVzLnNlbmQob3JkZXJzKTtcbiAgfSlcbik7XG5cbm9yZGVyUm91dGVyLmdldChcbiAgJy9taW5lJyxcbiAgaXNBdXRoLFxuICBleHByZXNzQXN5bmNIYW5kbGVyKGFzeW5jIChyZXEsIHJlcykgPT4ge1xuICAgIGNvbnN0IG9yZGVycyA9IGF3YWl0IE9yZGVyLmZpbmQoeyB1c2VyOiByZXEudXNlci5faWQgfSk7XG4gICAgcmVzLnNlbmQob3JkZXJzKTtcbiAgfSlcbik7XG5vcmRlclJvdXRlci5nZXQoXG4gICcvOmlkJyxcbiAgaXNBdXRoLFxuICBleHByZXNzQXN5bmNIYW5kbGVyKGFzeW5jIChyZXEsIHJlcykgPT4ge1xuICAgIGNvbnN0IG9yZGVyID0gYXdhaXQgT3JkZXIuZmluZEJ5SWQocmVxLnBhcmFtcy5pZCk7XG4gICAgaWYgKG9yZGVyKSB7XG4gICAgICByZXMuc2VuZChvcmRlcik7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJlcy5zdGF0dXMoNDA0KS5zZW5kKHsgbWVzc2FnZTogJ09yZGVyIE5vdCBGb3VuZCcgfSk7XG4gICAgfVxuICB9KVxuKTtcbm9yZGVyUm91dGVyLnBvc3QoXG4gICcvJyxcbiAgaXNBdXRoLFxuICBleHByZXNzQXN5bmNIYW5kbGVyKGFzeW5jIChyZXEsIHJlcykgPT4ge1xuICAgIGNvbnN0IG9yZGVyID0gbmV3IE9yZGVyKHtcbiAgICAgIG9yZGVySXRlbXM6IHJlcS5ib2R5Lm9yZGVySXRlbXMsXG4gICAgICB1c2VyOiByZXEudXNlci5faWQsXG4gICAgICBzaGlwcGluZzogcmVxLmJvZHkuc2hpcHBpbmcsXG4gICAgICBwYXltZW50OiByZXEuYm9keS5wYXltZW50LFxuICAgICAgaXRlbXNQcmljZTogcmVxLmJvZHkuaXRlbXNQcmljZSxcbiAgICAgIHRheFByaWNlOiByZXEuYm9keS50YXhQcmljZSxcbiAgICAgIHNoaXBwaW5nUHJpY2U6IHJlcS5ib2R5LnNoaXBwaW5nUHJpY2UsXG4gICAgICB0b3RhbFByaWNlOiByZXEuYm9keS50b3RhbFByaWNlLFxuICAgIH0pO1xuICAgIGNvbnN0IGNyZWF0ZWRPcmRlciA9IGF3YWl0IG9yZGVyLnNhdmUoKTtcbiAgICByZXMuc3RhdHVzKDIwMSkuc2VuZCh7IG1lc3NhZ2U6ICdOZXcgT3JkZXIgQ3JlYXRlZCcsIG9yZGVyOiBjcmVhdGVkT3JkZXIgfSk7XG4gIH0pXG4pO1xub3JkZXJSb3V0ZXIuZGVsZXRlKFxuICAnLzppZCcsXG4gIGlzQXV0aCxcbiAgaXNBZG1pbixcbiAgZXhwcmVzc0FzeW5jSGFuZGxlcihhc3luYyAocmVxLCByZXMpID0+IHtcbiAgICBjb25zdCBvcmRlciA9IGF3YWl0IE9yZGVyLmZpbmRCeUlkKHJlcS5wYXJhbXMuaWQpO1xuICAgIGlmIChvcmRlcikge1xuICAgICAgY29uc3QgZGVsZXRlZE9yZGVyID0gYXdhaXQgb3JkZXIucmVtb3ZlKCk7XG4gICAgICByZXMuc2VuZCh7IG1lc3NhZ2U6ICdPcmRlciBEZWxldGVkJywgcHJvZHVjdDogZGVsZXRlZE9yZGVyIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXMuc3RhdHVzKDQwNCkuc2VuZCh7IG1lc3NhZ2U6ICdPcmRlciBOb3QgRm91bmQnIH0pO1xuICAgIH1cbiAgfSlcbik7XG5cbm9yZGVyUm91dGVyLnB1dChcbiAgJy86aWQvcGF5JyxcbiAgaXNBdXRoLFxuICBleHByZXNzQXN5bmNIYW5kbGVyKGFzeW5jIChyZXEsIHJlcykgPT4ge1xuICAgIGNvbnN0IG9yZGVyID0gYXdhaXQgT3JkZXIuZmluZEJ5SWQocmVxLnBhcmFtcy5pZCk7XG4gICAgaWYgKG9yZGVyKSB7XG4gICAgICBvcmRlci5pc1BhaWQgPSB0cnVlO1xuICAgICAgb3JkZXIucGFpZEF0ID0gRGF0ZS5ub3coKTtcbiAgICAgIG9yZGVyLnBheW1lbnQucGF5bWVudFJlc3VsdCA9IHtcbiAgICAgICAgcGF5ZXJJRDogcmVxLmJvZHkucGF5ZXJJRCxcbiAgICAgICAgcGF5bWVudElEOiByZXEuYm9keS5wYXltZW50SUQsXG4gICAgICAgIG9yZGVySUQ6IHJlcS5ib2R5Lm9yZGVySUQsXG4gICAgICB9O1xuICAgICAgY29uc3QgdXBkYXRlZE9yZGVyID0gYXdhaXQgb3JkZXIuc2F2ZSgpO1xuICAgICAgcmVzLnNlbmQoeyBtZXNzYWdlOiAnT3JkZXIgUGFpZCcsIG9yZGVyOiB1cGRhdGVkT3JkZXIgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJlcy5zdGF0dXMoNDA0KS5zZW5kKHsgbWVzc2FnZTogJ09yZGVyIE5vdCBGb3VuZC4nIH0pO1xuICAgIH1cbiAgfSlcbik7XG5cbm9yZGVyUm91dGVyLnB1dChcbiAgJy86aWQvZGVsaXZlcicsXG4gIGlzQXV0aCxcbiAgZXhwcmVzc0FzeW5jSGFuZGxlcihhc3luYyAocmVxLCByZXMpID0+IHtcbiAgICBjb25zdCBvcmRlciA9IGF3YWl0IE9yZGVyLmZpbmRCeUlkKHJlcS5wYXJhbXMuaWQpO1xuICAgIGlmIChvcmRlcikge1xuICAgICAgb3JkZXIuaXNEZWxpdmVyZWQgPSB0cnVlO1xuICAgICAgb3JkZXIuZGVsaXZlcmVkQXQgPSBEYXRlLm5vdygpO1xuICAgICAgY29uc3QgdXBkYXRlZE9yZGVyID0gYXdhaXQgb3JkZXIuc2F2ZSgpO1xuICAgICAgcmVzLnNlbmQoeyBtZXNzYWdlOiAnT3JkZXIgRGVsaXZlcmVkJywgb3JkZXI6IHVwZGF0ZWRPcmRlciB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmVzLnN0YXR1cyg0MDQpLnNlbmQoeyBtZXNzYWdlOiAnT3JkZXIgTm90IEZvdW5kLicgfSk7XG4gICAgfVxuICB9KVxuKTtcblxuZXhwb3J0IGRlZmF1bHQgb3JkZXJSb3V0ZXI7XG4iXSwibWFwcGluZ3MiOiI7Ozs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUE2QztBQUU3QyxNQUFNQSxXQUFXLEdBQUdDLGdCQUFPLENBQUNDLE1BQU0sRUFBRTtBQUNwQ0YsV0FBVyxDQUFDRyxHQUFHLENBQ2IsVUFBVSxFQUNWQyxhQUFNLEVBQ05DLGNBQU8sRUFDUCxJQUFBQyw0QkFBbUIsRUFBQyxPQUFPQyxHQUFHLEVBQUVDLEdBQUcsS0FBSztFQUN0QyxNQUFNQyxNQUFNLEdBQUcsTUFBTUMsbUJBQUssQ0FBQ0MsU0FBUyxDQUFDLENBQ25DO0lBQ0VDLE1BQU0sRUFBRTtNQUNOQyxHQUFHLEVBQUUsSUFBSTtNQUNUQyxTQUFTLEVBQUU7UUFBRUMsSUFBSSxFQUFFO01BQUUsQ0FBQztNQUN0QkMsVUFBVSxFQUFFO1FBQUVELElBQUksRUFBRTtNQUFjO0lBQ3BDO0VBQ0YsQ0FBQyxDQUNGLENBQUM7RUFDRixNQUFNRSxLQUFLLEdBQUcsTUFBTUMsa0JBQUksQ0FBQ1AsU0FBUyxDQUFDLENBQ2pDO0lBQ0VDLE1BQU0sRUFBRTtNQUNOQyxHQUFHLEVBQUUsSUFBSTtNQUNUTSxRQUFRLEVB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","map":{"version":3,"names":["orderRouter","express","Router","get","isAuth","isAdmin","expressAsyncHandler","req","res","orders","Order","aggregate","$group","_id","numOrders","$sum","totalSales","users","User","numUsers","dailyOrders","$dateToString","format","date","sales","productCategories","Product","count","send","length","find","populate","user","order","findById","params","id","status","message","post","orderItems","body","shipping","payment","itemsPrice","taxPrice","shippingPrice","totalPrice","createdOrder","save","delete","deletedOrder","remove","product","put","isPaid","paidAt","Date","now","paymentResult","payerID","paymentID","orderID","updatedOrder","isDelivered","deliveredAt"],"sourceRoot":"/Users/thiago/Dev/workspace/prueba/Cadre Carton e-commerce/backend/routers/","sources":["orderRouter.js"],"sourcesContent":["import express from 'express';\nimport expressAsyncHandler from 'express-async-handler';\nimport { isAuth, isAdmin } from '../utils';\nimport Order from '../models/orderModel';\nimport User from '../models/userModel';\nimport Product from '../models/productModel';\n\nconst orderRouter = express.Router();\norderRouter.get(\n  '/summary',\n  isAuth,\n  isAdmin,\n  expressAsyncHandler(async (req, res) => {\n    const orders = await Order.aggregate([\n      {\n        $group: {\n          _id: null,\n          numOrders: { $sum: 1 },\n          totalSales: { $sum: '$totalPrice' },\n        },\n      },\n    ]);\n    const users = await User.aggregate([\n      {\n        $group: {\n          _id: null,\n          numUsers: { $sum: 1 },\n        },\n      },\n    ]);\n    const dailyOrders = await Order.aggregate([\n      {\n        $group: {\n          _id: { $dateToString: { format: '%Y-%m-%d', date: '$createdAt' } },\n          orders: { $sum: 1 },\n          sales: { $sum: '$totalPrice' },\n        },\n      },\n    ]);\n    const productCategories = await Product.aggregate([\n      {\n        $group: {\n          _id: '$category',\n          count: { $sum: 1 },\n        },\n      },\n    ]);\n    res.send({\n      users,\n      orders: orders.length === 0 ? [{ numOrders: 0, totalSales: 0 }] : orders,\n      dailyOrders,\n      productCategories,\n    });\n  })\n);\norderRouter.get(\n  '/',\n  isAuth,\n  isAdmin,\n  expressAsyncHandler(async (req, res) => {\n    const orders = await Order.find({}).populate('user');\n    res.send(orders);\n  })\n);\n\norderRouter.get(\n  '/mine',\n  isAuth,\n  expressAsyncHandler(async (req, res) => {\n    const orders = await Order.find({ user: req.user._id });\n    res.send(orders);\n  })\n);\norderRouter.get(\n  '/:id',\n  isAuth,\n  expressAsyncHandler(async (req, res) => {\n    const order = await Order.findById(req.params.id);\n    if (order) {\n      res.send(order);\n    } else {\n      res.status(404).send({ message: 'Order Not Found' });\n    }\n  })\n);\norderRouter.post(\n  '/',\n  isAuth,\n  expressAsyncHandler(async (req, res) => {\n    const order = new Order({\n      orderItems: req.body.orderItems,\n      user: req.user._id,\n      shipping: req.body.shipping,\n      payment: req.body.payment,\n      itemsPrice: req.body.itemsPrice,\n      taxPrice: req.body.taxPrice,\n      shippingPrice: req.body.shippingPrice,\n      totalPrice: req.body.totalPrice,\n    });\n    const createdOrder = await order.save();\n    res.status(201).send({ message: 'New Order Created', order: createdOrder });\n  })\n);\norderRouter.delete(\n  '/:id',\n  isAuth,\n  isAdmin,\n  expressAsyncHandler(async (req, res) => {\n    const order = await Order.findById(req.params.id);\n    if (order) {\n      const deletedOrder = await order.remove();\n      res.send({ message: 'Order Deleted', product: deletedOrder });\n    } else {\n      res.status(404).send({ message: 'Order Not Found' });\n    }\n  })\n);\n\norderRouter.put(\n  '/:id/pay',\n  isAuth,\n  expressAsyncHandler(async (req, res) => {\n    const order = await Order.findById(req.params.id);\n    if (order) {\n      order.isPaid = true;\n      order.paidAt = Date.now();\n      order.payment.paymentResult = {\n        payerID: req.body.payerID,\n        paymentID: req.body.paymentID,\n        orderID: req.body.orderID,\n      };\n      const updatedOrder = await order.save();\n      res.send({ message: 'Order Paid', order: updatedOrder });\n    } else {\n      res.status(404).send({ message: 'Order Not Found.' });\n    }\n  })\n);\n\norderRouter.put(\n  '/:id/deliver',\n  isAuth,\n  expressAsyncHandler(async (req, res) => {\n    const order = await Order.findById(req.params.id);\n    if (order) {\n      order.isDelivered = true;\n      order.deliveredAt = Date.now();\n      const updatedOrder = await order.save();\n      res.send({ message: 'Order Delivered', order: updatedOrder });\n    } else {\n      res.status(404).send({ message: 'Order Not Found.' });\n    }\n  })\n);\n\nexport default orderRouter;\n"],"mappings":"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"}},"mtime":1668842268000},"{\"assumptions\":{},\"sourceRoot\":\"/Users/thiago/Dev/workspace/prueba/Cadre Carton e-commerce/backend/models/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/thiago/Dev/workspace/prueba/Cadre Carton e-commerce\",\"filename\":\"/Users/thiago/Dev/workspace/prueba/Cadre Carton e-commerce/backend/models/orderModel.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/thiago/Dev/workspace/prueba/Cadre Carton e-commerce\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.19.6:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _mongoose = _interopRequireDefault(require(\"mongoose\"));\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\nconst orderSchema = new _mongoose.default.Schema({\n  orderItems: [{\n    name: {\n      type: String,\n      required: true\n    },\n    image: {\n      type: String,\n      required: true\n    },\n    price: {\n      type: Number,\n      required: true\n    },\n    qty: {\n      type: Number,\n      required: true\n    },\n    product: {\n      type: _mongoose.default.Schema.Types.ObjectId,\n      ref: 'Product',\n      required: true\n    }\n  }],\n  user: {\n    type: _mongoose.default.Schema.Types.ObjectId,\n    ref: 'User',\n    required: true\n  },\n  shipping: {\n    address: String,\n    city: String,\n    postalCode: String,\n    country: String\n  },\n  payment: {\n    paymentMethod: String,\n    paymentResult: {\n      orderID: String,\n      payerID: String,\n      paymentID: String\n    }\n  },\n  itemsPrice: Number,\n  taxPrice: Number,\n  shippingPrice: Number,\n  totalPrice: Number,\n  isPaid: {\n    type: Boolean,\n    required: true,\n    default: false\n  },\n  paidAt: Date,\n  isDelivered: {\n    type: Boolean,\n    required: true,\n    default: false\n  },\n  deliveredAt: Date\n}, {\n  timestamps: true\n});\nconst Order = _mongoose.default.model('Order', orderSchema);\nvar _default = Order;\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJvcmRlclNjaGVtYSIsIm1vbmdvb3NlIiwiU2NoZW1hIiwib3JkZXJJdGVtcyIsIm5hbWUiLCJ0eXBlIiwiU3RyaW5nIiwicmVxdWlyZWQiLCJpbWFnZSIsInByaWNlIiwiTnVtYmVyIiwicXR5IiwicHJvZHVjdCIsIlR5cGVzIiwiT2JqZWN0SWQiLCJyZWYiLCJ1c2VyIiwic2hpcHBpbmciLCJhZGRyZXNzIiwiY2l0eSIsInBvc3RhbENvZGUiLCJjb3VudHJ5IiwicGF5bWVudCIsInBheW1lbnRNZXRob2QiLCJwYXltZW50UmVzdWx0Iiwib3JkZXJJRCIsInBheWVySUQiLCJwYXltZW50SUQiLCJpdGVtc1ByaWNlIiwidGF4UHJpY2UiLCJzaGlwcGluZ1ByaWNlIiwidG90YWxQcmljZSIsImlzUGFpZCIsIkJvb2xlYW4iLCJkZWZhdWx0IiwicGFpZEF0IiwiRGF0ZSIsImlzRGVsaXZlcmVkIiwiZGVsaXZlcmVkQXQiLCJ0aW1lc3RhbXBzIiwiT3JkZXIiLCJtb2RlbCJdLCJzb3VyY2VSb290IjoiL1VzZXJzL3RoaWFnby9EZXYvd29ya3NwYWNlL3BydWViYS9DYWRyZSBDYXJ0b24gZS1jb21tZXJjZS9iYWNrZW5kL21vZGVscy8iLCJzb3VyY2VzIjpbIm9yZGVyTW9kZWwuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IG1vbmdvb3NlIGZyb20gJ21vbmdvb3NlJztcblxuY29uc3Qgb3JkZXJTY2hlbWEgPSBuZXcgbW9uZ29vc2UuU2NoZW1hKFxuICB7XG4gICAgb3JkZXJJdGVtczogW1xuICAgICAge1xuICAgICAgICBuYW1lOiB7IHR5cGU6IFN0cmluZywgcmVxdWlyZWQ6IHRydWUgfSxcbiAgICAgICAgaW1hZ2U6IHsgdHlwZTogU3RyaW5nLCByZXF1aXJlZDogdHJ1ZSB9LFxuICAgICAgICBwcmljZTogeyB0eXBlOiBOdW1iZXIsIHJlcXVpcmVkOiB0cnVlIH0sXG4gICAgICAgIHF0eTogeyB0eXBlOiBOdW1iZXIsIHJlcXVpcmVkOiB0cnVlIH0sXG4gICAgICAgIHByb2R1Y3Q6IHtcbiAgICAgICAgICB0eXBlOiBtb25nb29zZS5TY2hlbWEuVHlwZXMuT2JqZWN0SWQsXG4gICAgICAgICAgcmVmOiAnUHJvZHVjdCcsXG4gICAgICAgICAgcmVxdWlyZWQ6IHRydWUsXG4gICAgICAgIH0sXG4gICAgICB9LFxuICAgIF0sXG4gICAgdXNlcjogeyB0eXBlOiBtb25nb29zZS5TY2hlbWEuVHlwZXMuT2JqZWN0SWQsIHJlZjogJ1VzZXInLCByZXF1aXJlZDogdHJ1ZSB9LFxuICAgIHNoaXBwaW5nOiB7XG4gICAgICBhZGRyZXNzOiBTdHJpbmcsXG4gICAgICBjaXR5OiBTdHJpbmcsXG4gICAgICBwb3N0YWxDb2RlOiBTdHJpbmcsXG4gICAgICBjb3VudHJ5OiBTdHJpbmcsXG4gICAgfSxcbiAgICBwYXltZW50OiB7XG4gICAgICBwYXltZW50TWV0aG9kOiBTdHJpbmcsXG4gICAgICBwYXltZW50UmVzdWx0OiB7XG4gICAgICAgIG9yZGVySUQ6IFN0cmluZyxcbiAgICAgICAgcGF5ZXJJRDogU3RyaW5nLFxuICAgICAgICBwYXltZW50SUQ6IFN0cmluZyxcbiAgICAgIH0sXG4gICAgfSxcbiAgICBpdGVtc1ByaWNlOiBOdW1iZXIsXG4gICAgdGF4UHJpY2U6IE51bWJlcixcbiAgICBzaGlwcGluZ1ByaWNlOiBOdW1iZXIsXG4gICAgdG90YWxQcmljZTogTnVtYmVyLFxuICAgIGlzUGFpZDogeyB0eXBlOiBCb29sZWFuLCByZXF1aXJlZDogdHJ1ZSwgZGVmYXVsdDogZmFsc2UgfSxcbiAgICBwYWlkQXQ6IERhdGUsXG4gICAgaXNEZWxpdmVyZWQ6IHsgdHlwZTogQm9vbGVhbiwgcmVxdWlyZWQ6IHRydWUsIGRlZmF1bHQ6IGZhbHNlIH0sXG4gICAgZGVsaXZlcmVkQXQ6IERhdGUsXG4gIH0sXG4gIHtcbiAgICB0aW1lc3RhbXBzOiB0cnVlLFxuICB9XG4pO1xuY29uc3QgT3JkZXIgPSBtb25nb29zZS5tb2RlbCgnT3JkZXInLCBvcmRlclNjaGVtYSk7XG5leHBvcnQgZGVmYXVsdCBPcmRlcjtcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQUE7QUFBZ0M7QUFFaEMsTUFBTUEsV0FBVyxHQUFHLElBQUlDLGlCQUFRLENBQUNDLE1BQU0sQ0FDckM7RUFDRUMsVUFBVSxFQUFFLENBQ1Y7SUFDRUMsSUFBSSxFQUFFO01BQUVDLElBQUksRUFBRUMsTUFBTTtNQUFFQyxRQUFRLEVBQUU7SUFBSyxDQUFDO0lBQ3RDQyxLQUFLLEVBQUU7TUFBRUgsSUFBSSxFQUFFQyxNQUFNO01BQUVDLFFBQVEsRUFBRTtJQUFLLENBQUM7SUFDdkNFLEtBQUssRUFBRTtNQUFFSixJQUFJLEVBQUVLLE1BQU07TUFBRUgsUUFBUSxFQUFFO0lBQUssQ0FBQztJQUN2Q0ksR0FBRyxFQUFFO01BQUVOLElBQUksRUFBRUssTUFBTTtNQUFFSCxRQUFRLEVBQUU7SUFBSyxDQUFDO0lBQ3JDSyxPQUFPLEVBQUU7TUFDUFAsSUFBSSxFQUFFSixpQkFBUSxDQUFDQyxNQUFNLENBQUNXLEtBQUssQ0FBQ0MsUUFBUTtNQUNwQ0MsR0FBRyxFQUFFLFNBQVM7TUFDZFIsUUFBUSxFQUFFO0lBQ1o7RUFDRixDQUFDLENBQ0Y7RUFDRFMsSUFBSSxFQUFFO0lBQUVYLElBQUksRUFBRUosaUJBQVEsQ0FBQ0MsTUFBTSxDQUFDVyxLQUFLLENBQUNDLFFBQVE7SUFBRUMsR0FBRyxFQUFFLE1BQU07SUFBRVIsUUFBUSxFQUFFO0VBQUssQ0FBQztFQUMzRVUsUUFBUSxFQUFFO0lBQ1JDLE9BQU8sRUFBRVosTUFBTTtJQUNmYSxJQUFJLEVBQUViLE1BQU07SUFDWmMsVUFBVSxFQUFFZCxNQUFNO0lBQ2xCZSxPQUFPLEVBQUVmO0VBQ1gsQ0FBQztFQUNEZ0IsT0FBTyxFQUFFO0lBQ1BDLGFBQWEsRUFBRWpCLE1BQU07SUFDckJrQixhQUFhLEVBQUU7TUFDYkMsT0FBTyxFQUFFbkIsTUFBTTtNQUNmb0IsT0FBTyxFQUFFcEIsTUFBTTtNQUNmcUIsU0FBUyxFQUFFckI7SUFDYjtFQUNGLENBQUM7RUFDRHNCLFVBQVUsRUFBRWxCLE1BQU07RUFDbEJtQixRQUFRLEVBQUVuQixNQUFNO0VBQ2hCb0IsYUFBYSxFQUFFcEIsTUFBTTtFQUNyQnFCLFVBQVUsRUFBRXJCLE1BQU07RUFDbEJzQixNQUFNLEVBQUU7SUFBRTNCLElBQUksRUFBRTRCLE9BQU87SUFBRTFCLFFBQVEsRUFBRSxJQUFJO0lBQUUyQixPQUFPLEVBQUU7RUFBTSxDQUFDO0VBQ3pEQyxNQUFNLEVBQUVDLElBQUk7RUFDWkMsV0FBVyxFQUFFO0lBQUVoQyxJQUFJLEVBQUU0QixPQUFPO0lBQUUxQixRQUFRLEVBQUUsSUFBSTtJQUFFMkIsT0FBTyxFQUFFO0VBQU0sQ0FBQztFQUM5REksV0FBVyxFQUFFRjtBQUNmLENBQUMsRUFDRDtFQUNFRyxVQUFVLEVBQUU7QUFDZCxDQUFDLENBQ0Y7QUFDRCxNQUFNQyxLQUFLLEdBQUd2QyxpQkFBUSxDQUFDd0MsS0FBSyxDQUFDLE9BQU8sRUFBRXpDLFdBQVcsQ0FBQztBQUFDLGVBQ3BDd0MsS0FBSztBQUFBIn0=","map":{"version":3,"names":["orderSchema","mongoose","Schema","orderItems","name","type","String","required","image","price","Number","qty","product","Types","ObjectId","ref","user","shipping","address","city","postalCode","country","payment","paymentMethod","paymentResult","orderID","payerID","paymentID","itemsPrice","taxPrice","shippingPrice","totalPrice","isPaid","Boolean","default","paidAt","Date","isDelivered","deliveredAt","timestamps","Order","model"],"sourceRoot":"/Users/thiago/Dev/workspace/prueba/Cadre Carton e-commerce/backend/models/","sources":["orderModel.js"],"sourcesContent":["import mongoose from 'mongoose';\n\nconst orderSchema = new mongoose.Schema(\n  {\n    orderItems: [\n      {\n        name: { type: String, required: true },\n        image: { type: String, required: true },\n        price: { type: Number, required: true },\n        qty: { type: Number, required: true },\n        product: {\n          type: mongoose.Schema.Types.ObjectId,\n          ref: 'Product',\n          required: true,\n        },\n      },\n    ],\n    user: { type: mongoose.Schema.Types.ObjectId, ref: 'User', required: true },\n    shipping: {\n      address: String,\n      city: String,\n      postalCode: String,\n      country: String,\n    },\n    payment: {\n      paymentMethod: String,\n      paymentResult: {\n        orderID: String,\n        payerID: String,\n        paymentID: String,\n      },\n    },\n    itemsPrice: Number,\n    taxPrice: Number,\n    shippingPrice: Number,\n    totalPrice: Number,\n    isPaid: { type: Boolean, required: true, default: false },\n    paidAt: Date,\n    isDelivered: { type: Boolean, required: true, default: false },\n    deliveredAt: Date,\n  },\n  {\n    timestamps: true,\n  }\n);\nconst Order = mongoose.model('Order', orderSchema);\nexport default Order;\n"],"mappings":";;;;;;AAAA;AAAgC;AAEhC,MAAMA,WAAW,GAAG,IAAIC,iBAAQ,CAACC,MAAM,CACrC;EACEC,UAAU,EAAE,CACV;IACEC,IAAI,EAAE;MAAEC,IAAI,EAAEC,MAAM;MAAEC,QAAQ,EAAE;IAAK,CAAC;IACtCC,KAAK,EAAE;MAAEH,IAAI,EAAEC,MAAM;MAAEC,QAAQ,EAAE;IAAK,CAAC;IACvCE,KAAK,EAAE;MAAEJ,IAAI,EAAEK,MAAM;MAAEH,QAAQ,EAAE;IAAK,CAAC;IACvCI,GAAG,EAAE;MAAEN,IAAI,EAAEK,MAAM;MAAEH,QAAQ,EAAE;IAAK,CAAC;IACrCK,OAAO,EAAE;MACPP,IAAI,EAAEJ,iBAAQ,CAACC,MAAM,CAACW,KAAK,CAACC,QAAQ;MACpCC,GAAG,EAAE,SAAS;MACdR,QAAQ,EAAE;IACZ;EACF,CAAC,CACF;EACDS,IAAI,EAAE;IAAEX,IAAI,EAAEJ,iBAAQ,CAACC,MAAM,CAACW,KAAK,CAACC,QAAQ;IAAEC,GAAG,EAAE,MAAM;IAAER,QAAQ,EAAE;EAAK,CAAC;EAC3EU,QAAQ,EAAE;IACRC,OAAO,EAAEZ,MAAM;IACfa,IAAI,EAAEb,MAAM;IACZc,UAAU,EAAEd,MAAM;IAClBe,OAAO,EAAEf;EACX,CAAC;EACDgB,OAAO,EAAE;IACPC,aAAa,EAAEjB,MAAM;IACrBkB,aAAa,EAAE;MACbC,OAAO,EAAEnB,MAAM;MACfoB,OAAO,EAAEpB,MAAM;MACfqB,SAAS,EAAErB;IACb;EACF,CAAC;EACDsB,UAAU,EAAElB,MAAM;EAClBmB,QAAQ,EAAEnB,MAAM;EAChBoB,aAAa,EAAEpB,MAAM;EACrBqB,UAAU,EAAErB,MAAM;EAClBsB,MAAM,EAAE;IAAE3B,IAAI,EAAE4B,OAAO;IAAE1B,QAAQ,EAAE,IAAI;IAAE2B,OAAO,EAAE;EAAM,CAAC;EACzDC,MAAM,EAAEC,IAAI;EACZC,WAAW,EAAE;IAAEhC,IAAI,EAAE4B,OAAO;IAAE1B,QAAQ,EAAE,IAAI;IAAE2B,OAAO,EAAE;EAAM,CAAC;EAC9DI,WAAW,EAAEF;AACf,CAAC,EACD;EACEG,UAAU,EAAE;AACd,CAAC,CACF;AACD,MAAMC,KAAK,GAAGvC,iBAAQ,CAACwC,KAAK,CAAC,OAAO,EAAEzC,WAAW,CAAC;AAAC,eACpCwC,KAAK;AAAA"}},"mtime":1668842268000},"{\"assumptions\":{},\"sourceRoot\":\"/Users/thiago/Dev/workspace/prueba/Cadre Carton e-commerce/backend/models/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/thiago/Dev/workspace/prueba/Cadre Carton e-commerce\",\"filename\":\"/Users/thiago/Dev/workspace/prueba/Cadre Carton e-commerce/backend/models/productModel.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/thiago/Dev/workspace/prueba/Cadre Carton e-commerce\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.19.6:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _mongoose = _interopRequireDefault(require(\"mongoose\"));\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\nconst reviewSchema = new _mongoose.default.Schema({\n  user: {\n    type: _mongoose.default.Schema.Types.ObjectId,\n    ref: 'User',\n    required: true\n  },\n  name: {\n    type: String,\n    required: true\n  },\n  rating: {\n    type: Number,\n    required: true,\n    default: 0,\n    min: 0,\n    max: 5\n  },\n  comment: {\n    type: String,\n    required: true\n  }\n}, {\n  timestamps: true\n});\nconst productSchema = new _mongoose.default.Schema({\n  name: {\n    type: String,\n    required: true\n  },\n  description: {\n    type: String,\n    required: true\n  },\n  category: {\n    type: String,\n    required: true\n  },\n  brand: {\n    type: String,\n    required: true\n  },\n  image: {\n    type: String,\n    required: true\n  },\n  price: {\n    type: Number,\n    default: 0.0,\n    required: true\n  },\n  countInStock: {\n    type: Number,\n    default: 0,\n    required: true\n  },\n  rating: {\n    type: Number,\n    default: 0.0,\n    required: true\n  },\n  numReviews: {\n    type: Number,\n    default: 0,\n    required: true\n  },\n  reviews: [reviewSchema]\n}, {\n  timestamps: true\n});\nconst Product = _mongoose.default.model('Product', productSchema);\nvar _default = Product;\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJyZXZpZXdTY2hlbWEiLCJtb25nb29zZSIsIlNjaGVtYSIsInVzZXIiLCJ0eXBlIiwiVHlwZXMiLCJPYmplY3RJZCIsInJlZiIsInJlcXVpcmVkIiwibmFtZSIsIlN0cmluZyIsInJhdGluZyIsIk51bWJlciIsImRlZmF1bHQiLCJtaW4iLCJtYXgiLCJjb21tZW50IiwidGltZXN0YW1wcyIsInByb2R1Y3RTY2hlbWEiLCJkZXNjcmlwdGlvbiIsImNhdGVnb3J5IiwiYnJhbmQiLCJpbWFnZSIsInByaWNlIiwiY291bnRJblN0b2NrIiwibnVtUmV2aWV3cyIsInJldmlld3MiLCJQcm9kdWN0IiwibW9kZWwiXSwic291cmNlUm9vdCI6Ii9Vc2Vycy90aGlhZ28vRGV2L3dvcmtzcGFjZS9wcnVlYmEvQ2FkcmUgQ2FydG9uIGUtY29tbWVyY2UvYmFja2VuZC9tb2RlbHMvIiwic291cmNlcyI6WyJwcm9kdWN0TW9kZWwuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IG1vbmdvb3NlIGZyb20gJ21vbmdvb3NlJztcblxuY29uc3QgcmV2aWV3U2NoZW1hID0gbmV3IG1vbmdvb3NlLlNjaGVtYShcbiAge1xuICAgIHVzZXI6IHsgdHlwZTogbW9uZ29vc2UuU2NoZW1hLlR5cGVzLk9iamVjdElkLCByZWY6ICdVc2VyJywgcmVxdWlyZWQ6IHRydWUgfSxcbiAgICBuYW1lOiB7IHR5cGU6IFN0cmluZywgcmVxdWlyZWQ6IHRydWUgfSxcbiAgICByYXRpbmc6IHtcbiAgICAgIHR5cGU6IE51bWJlcixcbiAgICAgIHJlcXVpcmVkOiB0cnVlLFxuICAgICAgZGVmYXVsdDogMCxcbiAgICAgIG1pbjogMCxcbiAgICAgIG1heDogNSxcbiAgICB9LFxuICAgIGNvbW1lbnQ6IHsgdHlwZTogU3RyaW5nLCByZXF1aXJlZDogdHJ1ZSB9LFxuICB9LFxuICB7IHRpbWVzdGFtcHM6IHRydWUgfVxuKTtcblxuY29uc3QgcHJvZHVjdFNjaGVtYSA9IG5ldyBtb25nb29zZS5TY2hlbWEoXG4gIHtcbiAgICBuYW1lOiB7IHR5cGU6IFN0cmluZywgcmVxdWlyZWQ6IHRydWUgfSxcbiAgICBkZXNjcmlwdGlvbjogeyB0eXBlOiBTdHJpbmcsIHJlcXVpcmVkOiB0cnVlIH0sXG4gICAgY2F0ZWdvcnk6IHsgdHlwZTogU3RyaW5nLCByZXF1aXJlZDogdHJ1ZSB9LFxuICAgIGJyYW5kOiB7IHR5cGU6IFN0cmluZywgcmVxdWlyZWQ6IHRydWUgfSxcbiAgICBpbWFnZTogeyB0eXBlOiBTdHJpbmcsIHJlcXVpcmVkOiB0cnVlIH0sXG4gICAgcHJpY2U6IHsgdHlwZTogTnVtYmVyLCBkZWZhdWx0OiAwLjAsIHJlcXVpcmVkOiB0cnVlIH0sXG4gICAgY291bnRJblN0b2NrOiB7IHR5cGU6IE51bWJlciwgZGVmYXVsdDogMCwgcmVxdWlyZWQ6IHRydWUgfSxcbiAgICByYXRpbmc6IHsgdHlwZTogTnVtYmVyLCBkZWZhdWx0OiAwLjAsIHJlcXVpcmVkOiB0cnVlIH0sXG4gICAgbnVtUmV2aWV3czogeyB0eXBlOiBOdW1iZXIsIGRlZmF1bHQ6IDAsIHJlcXVpcmVkOiB0cnVlIH0sXG4gICAgcmV2aWV3czogW3Jldmlld1NjaGVtYV0sXG4gIH0sXG4gIHsgdGltZXN0YW1wczogdHJ1ZSB9XG4pO1xuY29uc3QgUHJvZHVjdCA9IG1vbmdvb3NlLm1vZGVsKCdQcm9kdWN0JywgcHJvZHVjdFNjaGVtYSk7XG5leHBvcnQgZGVmYXVsdCBQcm9kdWN0O1xuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7QUFBQTtBQUFnQztBQUVoQyxNQUFNQSxZQUFZLEdBQUcsSUFBSUMsaUJBQVEsQ0FBQ0MsTUFBTSxDQUN0QztFQUNFQyxJQUFJLEVBQUU7SUFBRUMsSUFBSSxFQUFFSCxpQkFBUSxDQUFDQyxNQUFNLENBQUNHLEtBQUssQ0FBQ0MsUUFBUTtJQUFFQyxHQUFHLEVBQUUsTUFBTTtJQUFFQyxRQUFRLEVBQUU7RUFBSyxDQUFDO0VBQzNFQyxJQUFJLEVBQUU7SUFBRUwsSUFBSSxFQUFFTSxNQUFNO0lBQUVGLFFBQVEsRUFBRTtFQUFLLENBQUM7RUFDdENHLE1BQU0sRUFBRTtJQUNOUCxJQUFJLEVBQUVRLE1BQU07SUFDWkosUUFBUSxFQUFFLElBQUk7SUFDZEssT0FBTyxFQUFFLENBQUM7SUFDVkMsR0FBRyxFQUFFLENBQUM7SUFDTkMsR0FBRyxFQUFFO0VBQ1AsQ0FBQztFQUNEQyxPQUFPLEVBQUU7SUFBRVosSUFBSSxFQUFFTSxNQUFNO0lBQUVGLFFBQVEsRUFBRTtFQUFLO0FBQzFDLENBQUMsRUFDRDtFQUFFUyxVQUFVLEVBQUU7QUFBSyxDQUFDLENBQ3JCO0FBRUQsTUFBTUMsYUFBYSxHQUFHLElBQUlqQixpQkFBUSxDQUFDQyxNQUFNLENBQ3ZDO0VBQ0VPLElBQUksRUFBRTtJQUFFTCxJQUFJLEVBQUVNLE1BQU07SUFBRUYsUUFBUSxFQUFFO0VBQUssQ0FBQztFQUN0Q1csV0FBVyxFQUFFO0lBQUVmLElBQUksRUFBRU0sTUFBTTtJQUFFRixRQUFRLEVBQUU7RUFBSyxDQUFDO0VBQzdDWSxRQUFRLEVBQUU7SUFBRWhCLElBQUksRUFBRU0sTUFBTTtJQUFFRixRQUFRLEVBQUU7RUFBSyxDQUFDO0VBQzFDYSxLQUFLLEVBQUU7SUFBRWpCLElBQUksRUFBRU0sTUFBTTtJQUFFRixRQUFRLEVBQUU7RUFBSyxDQUFDO0VBQ3ZDYyxLQUFLLEVBQUU7SUFBRWxCLElBQUksRUFBRU0sTUFBTTtJQUFFRixRQUFRLEVBQUU7RUFBSyxDQUFDO0VBQ3ZDZSxLQUFLLEVBQUU7SUFBRW5CLElBQUksRUFBRVEsTUFBTTtJQUFFQyxPQUFPLEVBQUUsR0FBRztJQUFFTCxRQUFRLEVBQUU7RUFBSyxDQUFDO0VBQ3JEZ0IsWUFBWSxFQUFFO0lBQUVwQixJQUFJLEVBQUVRLE1BQU07SUFBRUMsT0FBTyxFQUFFLENBQUM7SUFBRUwsUUFBUSxFQUFFO0VBQUssQ0FBQztFQUMxREcsTUFBTSxFQUFFO0lBQUVQLElBQUksRUFBRVEsTUFBTTtJQUFFQyxPQUFPLEVBQUUsR0FBRztJQUFFTCxRQUFRLEVBQUU7RUFBSyxDQUFDO0VBQ3REaUIsVUFBVSxFQUFFO0lBQUVyQixJQUFJLEVBQUVRLE1BQU07SUFBRUMsT0FBTyxFQUFFLENBQUM7SUFBRUwsUUFBUSxFQUFFO0VBQUssQ0FBQztFQUN4RGtCLE9BQU8sRUFBRSxDQUFDMUIsWUFBWTtBQUN4QixDQUFDLEVBQ0Q7RUFBRWlCLFVBQVUsRUFBRTtBQUFLLENBQUMsQ0FDckI7QUFDRCxNQUFNVSxPQUFPLEdBQUcxQixpQkFBUSxDQUFDMkIsS0FBSyxDQUFDLFNBQVMsRUFBRVYsYUFBYSxDQUFDO0FBQUMsZUFDMUNTLE9BQU87QUFBQSJ9","map":{"version":3,"names":["reviewSchema","mongoose","Schema","user","type","Types","ObjectId","ref","required","name","String","rating","Number","default","min","max","comment","timestamps","productSchema","description","category","brand","image","price","countInStock","numReviews","reviews","Product","model"],"sourceRoot":"/Users/thiago/Dev/workspace/prueba/Cadre Carton e-commerce/backend/models/","sources":["productModel.js"],"sourcesContent":["import mongoose from 'mongoose';\n\nconst reviewSchema = new mongoose.Schema(\n  {\n    user: { type: mongoose.Schema.Types.ObjectId, ref: 'User', required: true },\n    name: { type: String, required: true },\n    rating: {\n      type: Number,\n      required: true,\n      default: 0,\n      min: 0,\n      max: 5,\n    },\n    comment: { type: String, required: true },\n  },\n  { timestamps: true }\n);\n\nconst productSchema = new mongoose.Schema(\n  {\n    name: { type: String, required: true },\n    description: { type: String, required: true },\n    category: { type: String, required: true },\n    brand: { type: String, required: true },\n    image: { type: String, required: true },\n    price: { type: Number, default: 0.0, required: true },\n    countInStock: { type: Number, default: 0, required: true },\n    rating: { type: Number, default: 0.0, required: true },\n    numReviews: { type: Number, default: 0, required: true },\n    reviews: [reviewSchema],\n  },\n  { timestamps: true }\n);\nconst Product = mongoose.model('Product', productSchema);\nexport default Product;\n"],"mappings":";;;;;;AAAA;AAAgC;AAEhC,MAAMA,YAAY,GAAG,IAAIC,iBAAQ,CAACC,MAAM,CACtC;EACEC,IAAI,EAAE;IAAEC,IAAI,EAAEH,iBAAQ,CAACC,MAAM,CAACG,KAAK,CAACC,QAAQ;IAAEC,GAAG,EAAE,MAAM;IAAEC,QAAQ,EAAE;EAAK,CAAC;EAC3EC,IAAI,EAAE;IAAEL,IAAI,EAAEM,MAAM;IAAEF,QAAQ,EAAE;EAAK,CAAC;EACtCG,MAAM,EAAE;IACNP,IAAI,EAAEQ,MAAM;IACZJ,QAAQ,EAAE,IAAI;IACdK,OAAO,EAAE,CAAC;IACVC,GAAG,EAAE,CAAC;IACNC,GAAG,EAAE;EACP,CAAC;EACDC,OAAO,EAAE;IAAEZ,IAAI,EAAEM,MAAM;IAAEF,QAAQ,EAAE;EAAK;AAC1C,CAAC,EACD;EAAES,UAAU,EAAE;AAAK,CAAC,CACrB;AAED,MAAMC,aAAa,GAAG,IAAIjB,iBAAQ,CAACC,MAAM,CACvC;EACEO,IAAI,EAAE;IAAEL,IAAI,EAAEM,MAAM;IAAEF,QAAQ,EAAE;EAAK,CAAC;EACtCW,WAAW,EAAE;IAAEf,IAAI,EAAEM,MAAM;IAAEF,QAAQ,EAAE;EAAK,CAAC;EAC7CY,QAAQ,EAAE;IAAEhB,IAAI,EAAEM,MAAM;IAAEF,QAAQ,EAAE;EAAK,CAAC;EAC1Ca,KAAK,EAAE;IAAEjB,IAAI,EAAEM,MAAM;IAAEF,QAAQ,EAAE;EAAK,CAAC;EACvCc,KAAK,EAAE;IAAElB,IAAI,EAAEM,MAAM;IAAEF,QAAQ,EAAE;EAAK,CAAC;EACvCe,KAAK,EAAE;IAAEnB,IAAI,EAAEQ,MAAM;IAAEC,OAAO,EAAE,GAAG;IAAEL,QAAQ,EAAE;EAAK,CAAC;EACrDgB,YAAY,EAAE;IAAEpB,IAAI,EAAEQ,MAAM;IAAEC,OAAO,EAAE,CAAC;IAAEL,QAAQ,EAAE;EAAK,CAAC;EAC1DG,MAAM,EAAE;IAAEP,IAAI,EAAEQ,MAAM;IAAEC,OAAO,EAAE,GAAG;IAAEL,QAAQ,EAAE;EAAK,CAAC;EACtDiB,UAAU,EAAE;IAAErB,IAAI,EAAEQ,MAAM;IAAEC,OAAO,EAAE,CAAC;IAAEL,QAAQ,EAAE;EAAK,CAAC;EACxDkB,OAAO,EAAE,CAAC1B,YAAY;AACxB,CAAC,EACD;EAAEiB,UAAU,EAAE;AAAK,CAAC,CACrB;AACD,MAAMU,OAAO,GAAG1B,iBAAQ,CAAC2B,KAAK,CAAC,SAAS,EAAEV,aAAa,CAAC;AAAC,eAC1CS,OAAO;AAAA"}},"mtime":1668842268000},"{\"assumptions\":{},\"sourceRoot\":\"/Users/thiago/Dev/workspace/prueba/Cadre Carton e-commerce/backend/routers/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/thiago/Dev/workspace/prueba/Cadre Carton e-commerce\",\"filename\":\"/Users/thiago/Dev/workspace/prueba/Cadre Carton e-commerce/backend/routers/productRouter.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/thiago/Dev/workspace/prueba/Cadre Carton e-commerce\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.19.6:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _express = _interopRequireDefault(require(\"express\"));\nvar _expressAsyncHandler = _interopRequireDefault(require(\"express-async-handler\"));\nvar _utils = require(\"../utils\");\nvar _productModel = _interopRequireDefault(require(\"../models/productModel\"));\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\nconst productRouter = _express.default.Router();\nproductRouter.get('/', (0, _expressAsyncHandler.default)(async (req, res) => {\n  const searchKeyword = req.query.searchKeyword ? {\n    name: {\n      $regex: req.query.searchKeyword,\n      $options: 'i'\n    }\n  } : {};\n  const products = await _productModel.default.find({\n    ...searchKeyword\n  });\n  res.send(products);\n}));\nproductRouter.get('/:id', (0, _expressAsyncHandler.default)(async (req, res) => {\n  const product = await _productModel.default.findById(req.params.id);\n  res.send(product);\n}));\nproductRouter.post('/', _utils.isAuth, _utils.isAdmin, (0, _expressAsyncHandler.default)(async (req, res) => {\n  const product = new _productModel.default({\n    name: 'sample product',\n    description: 'sample desc',\n    category: 'sample category',\n    brand: 'sample brand',\n    image: '/images/product-1.jpg'\n  });\n  const createdProduct = await product.save();\n  if (createdProduct) {\n    res.status(201).send({\n      message: 'Product Created',\n      product: createdProduct\n    });\n  } else {\n    res.status(500).send({\n      message: 'Error in creating product'\n    });\n  }\n}));\nproductRouter.put('/:id', _utils.isAuth, _utils.isAdmin, (0, _expressAsyncHandler.default)(async (req, res) => {\n  const productId = req.params.id;\n  const product = await _productModel.default.findById(productId);\n  if (product) {\n    product.name = req.body.name;\n    product.price = req.body.price;\n    product.image = req.body.image;\n    product.brand = req.body.brand;\n    product.category = req.body.category;\n    product.countInStock = req.body.countInStock;\n    product.description = req.body.description;\n    const updatedProduct = await product.save();\n    if (updatedProduct) {\n      res.send({\n        message: 'Product Updated',\n        product: updatedProduct\n      });\n    } else {\n      res.status(500).send({\n        message: 'Error in updaing product'\n      });\n    }\n  } else {\n    res.status(404).send({\n      message: 'Product Not Found'\n    });\n  }\n}));\nproductRouter.delete('/:id', _utils.isAuth, _utils.isAdmin, (0, _expressAsyncHandler.default)(async (req, res) => {\n  const product = await _productModel.default.findById(req.params.id);\n  if (product) {\n    const deletedProduct = await product.remove();\n    res.send({\n      message: 'Product Deleted',\n      product: deletedProduct\n    });\n  } else {\n    res.status(404).send({\n      message: 'Product Not Found'\n    });\n  }\n}));\nproductRouter.post('/:id/reviews', _utils.isAuth, (0, _expressAsyncHandler.default)(async (req, res) => {\n  const product = await _productModel.default.findById(req.params.id);\n  if (product) {\n    const review = {\n      rating: req.body.rating,\n      comment: req.body.comment,\n      user: req.user._id,\n      name: req.user.name\n    };\n    product.reviews.push(review);\n    product.rating = product.reviews.reduce((a, c) => c.rating + a, 0) / product.reviews.length;\n    product.numReviews = product.reviews.length;\n    const updatedProduct = await product.save();\n    res.status(201).send({\n      message: 'Comment Created.',\n      data: updatedProduct.reviews[updatedProduct.reviews.length - 1]\n    });\n  } else {\n    throw Error('Product does not exist.');\n  }\n}));\nvar _default = productRouter;\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJwcm9kdWN0Um91dGVyIiwiZXhwcmVzcyIsIlJvdXRlciIsImdldCIsImV4cHJlc3NBc3luY0hhbmRsZXIiLCJyZXEiLCJyZXMiLCJzZWFyY2hLZXl3b3JkIiwicXVlcnkiLCJuYW1lIiwiJHJlZ2V4IiwiJG9wdGlvbnMiLCJwcm9kdWN0cyIsIlByb2R1Y3QiLCJmaW5kIiwic2VuZCIsInByb2R1Y3QiLCJmaW5kQnlJZCIsInBhcmFtcyIsImlkIiwicG9zdCIsImlzQXV0aCIsImlzQWRtaW4iLCJkZXNjcmlwdGlvbiIsImNhdGVnb3J5IiwiYnJhbmQiLCJpbWFnZSIsImNyZWF0ZWRQcm9kdWN0Iiwic2F2ZSIsInN0YXR1cyIsIm1lc3NhZ2UiLCJwdXQiLCJwcm9kdWN0SWQiLCJib2R5IiwicHJpY2UiLCJjb3VudEluU3RvY2siLCJ1cGRhdGVkUHJvZHVjdCIsImRlbGV0ZSIsImRlbGV0ZWRQcm9kdWN0IiwicmVtb3ZlIiwicmV2aWV3IiwicmF0aW5nIiwiY29tbWVudCIsInVzZXIiLCJfaWQiLCJyZXZpZXdzIiwicHVzaCIsInJlZHVjZSIsImEiLCJjIiwibGVuZ3RoIiwibnVtUmV2aWV3cyIsImRhdGEiLCJFcnJvciJdLCJzb3VyY2VSb290IjoiL1VzZXJzL3RoaWFnby9EZXYvd29ya3NwYWNlL3BydWViYS9DYWRyZSBDYXJ0b24gZS1jb21tZXJjZS9iYWNrZW5kL3JvdXRlcnMvIiwic291cmNlcyI6WyJwcm9kdWN0Um91dGVyLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBleHByZXNzIGZyb20gJ2V4cHJlc3MnO1xuaW1wb3J0IGV4cHJlc3NBc3luY0hhbmRsZXIgZnJvbSAnZXhwcmVzcy1hc3luYy1oYW5kbGVyJztcbmltcG9ydCB7IGlzQXV0aCwgaXNBZG1pbiB9IGZyb20gJy4uL3V0aWxzJztcbmltcG9ydCBQcm9kdWN0IGZyb20gJy4uL21vZGVscy9wcm9kdWN0TW9kZWwnO1xuXG5jb25zdCBwcm9kdWN0Um91dGVyID0gZXhwcmVzcy5Sb3V0ZXIoKTtcbnByb2R1Y3RSb3V0ZXIuZ2V0KFxuICAnLycsXG4gIGV4cHJlc3NBc3luY0hhbmRsZXIoYXN5bmMgKHJlcSwgcmVzKSA9PiB7XG4gICAgY29uc3Qgc2VhcmNoS2V5d29yZCA9IHJlcS5xdWVyeS5zZWFyY2hLZXl3b3JkXG4gICAgICA/IHtcbiAgICAgICAgICBuYW1lOiB7XG4gICAgICAgICAgICAkcmVnZXg6IHJlcS5xdWVyeS5zZWFyY2hLZXl3b3JkLFxuICAgICAgICAgICAgJG9wdGlvbnM6ICdpJyxcbiAgICAgICAgICB9LFxuICAgICAgICB9XG4gICAgICA6IHt9O1xuICAgIGNvbnN0IHByb2R1Y3RzID0gYXdhaXQgUHJvZHVjdC5maW5kKHsgLi4uc2VhcmNoS2V5d29yZCB9KTtcbiAgICByZXMuc2VuZChwcm9kdWN0cyk7XG4gIH0pXG4pO1xucHJvZHVjdFJvdXRlci5nZXQoXG4gICcvOmlkJyxcbiAgZXhwcmVzc0FzeW5jSGFuZGxlcihhc3luYyAocmVxLCByZXMpID0+IHtcbiAgICBjb25zdCBwcm9kdWN0ID0gYXdhaXQgUHJvZHVjdC5maW5kQnlJZChyZXEucGFyYW1zLmlkKTtcbiAgICByZXMuc2VuZChwcm9kdWN0KTtcbiAgfSlcbik7XG5cbnByb2R1Y3RSb3V0ZXIucG9zdChcbiAgJy8nLFxuICBpc0F1dGgsXG4gIGlzQWRtaW4sXG4gIGV4cHJlc3NBc3luY0hhbmRsZXIoYXN5bmMgKHJlcSwgcmVzKSA9PiB7XG4gICAgY29uc3QgcHJvZHVjdCA9IG5ldyBQcm9kdWN0KHtcbiAgICAgIG5hbWU6ICdzYW1wbGUgcHJvZHVjdCcsXG4gICAgICBkZXNjcmlwdGlvbjogJ3NhbXBsZSBkZXNjJyxcbiAgICAgIGNhdGVnb3J5OiAnc2FtcGxlIGNhdGVnb3J5JyxcbiAgICAgIGJyYW5kOiAnc2FtcGxlIGJyYW5kJyxcbiAgICAgIGltYWdlOiAnL2ltYWdlcy9wcm9kdWN0LTEuanBnJyxcbiAgICB9KTtcbiAgICBjb25zdCBjcmVhdGVkUHJvZHVjdCA9IGF3YWl0IHByb2R1Y3Quc2F2ZSgpO1xuICAgIGlmIChjcmVhdGVkUHJvZHVjdCkge1xuICAgICAgcmVzXG4gICAgICAgIC5zdGF0dXMoMjAxKVxuICAgICAgICAuc2VuZCh7IG1lc3NhZ2U6ICdQcm9kdWN0IENyZWF0ZWQnLCBwcm9kdWN0OiBjcmVhdGVkUHJvZHVjdCB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmVzLnN0YXR1cyg1MDApLnNlbmQoeyBtZXNzYWdlOiAnRXJyb3IgaW4gY3JlYXRpbmcgcHJvZHVjdCcgfSk7XG4gICAgfVxuICB9KVxuKTtcbnByb2R1Y3RSb3V0ZXIucHV0KFxuICAnLzppZCcsXG4gIGlzQXV0aCxcbiAgaXNBZG1pbixcbiAgZXhwcmVzc0FzeW5jSGFuZGxlcihhc3luYyAocmVxLCByZXMpID0+IHtcbiAgICBjb25zdCBwcm9kdWN0SWQgPSByZXEucGFyYW1zLmlkO1xuICAgIGNvbnN0IHByb2R1Y3QgPSBhd2FpdCBQcm9kdWN0LmZpbmRCeUlkKHByb2R1Y3RJZCk7XG4gICAgaWYgKHByb2R1Y3QpIHtcbiAgICAgIHByb2R1Y3QubmFtZSA9IHJlcS5ib2R5Lm5hbWU7XG4gICAgICBwcm9kdWN0LnByaWNlID0gcmVxLmJvZHkucHJpY2U7XG4gICAgICBwcm9kdWN0LmltYWdlID0gcmVxLmJvZHkuaW1hZ2U7XG4gICAgICBwcm9kdWN0LmJyYW5kID0gcmVxLmJvZHkuYnJhbmQ7XG4gICAgICBwcm9kdWN0LmNhdGVnb3J5ID0gcmVxLmJvZHkuY2F0ZWdvcnk7XG4gICAgICBwcm9kdWN0LmNvdW50SW5TdG9jayA9IHJlcS5ib2R5LmNvdW50SW5TdG9jaztcbiAgICAgIHByb2R1Y3QuZGVzY3JpcHRpb24gPSByZXEuYm9keS5kZXNjcmlwdGlvbjtcbiAgICAgIGNvbnN0IHVwZGF0ZWRQcm9kdWN0ID0gYXdhaXQgcHJvZHVjdC5zYXZlKCk7XG4gICAgICBpZiAodXBkYXRlZFByb2R1Y3QpIHtcbiAgICAgICAgcmVzLnNlbmQoeyBtZXNzYWdlOiAnUHJvZHVjdCBVcGRhdGVkJywgcHJvZHVjdDogdXBkYXRlZFByb2R1Y3QgfSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXMuc3RhdHVzKDUwMCkuc2VuZCh7IG1lc3NhZ2U6ICdFcnJvciBpbiB1cGRhaW5nIHByb2R1Y3QnIH0pO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICByZXMuc3RhdHVzKDQwNCkuc2VuZCh7IG1lc3NhZ2U6ICdQcm9kdWN0IE5vdCBGb3VuZCcgfSk7XG4gICAgfVxuICB9KVxuKTtcbnByb2R1Y3RSb3V0ZXIuZGVsZXRlKFxuICAnLzppZCcsXG4gIGlzQXV0aCxcbiAgaXNBZG1pbixcbiAgZXhwcmVzc0FzeW5jSGFuZGxlcihhc3luYyAocmVxLCByZXMpID0+IHtcbiAgICBjb25zdCBwcm9kdWN0ID0gYXdhaXQgUHJvZHVjdC5maW5kQnlJZChyZXEucGFyYW1zLmlkKTtcbiAgICBpZiAocHJvZHVjdCkge1xuICAgICAgY29uc3QgZGVsZXRlZFByb2R1Y3QgPSBhd2FpdCBwcm9kdWN0LnJlbW92ZSgpO1xuICAgICAgcmVzLnNlbmQoeyBtZXNzYWdlOiAnUHJvZHVjdCBEZWxldGVkJywgcHJvZHVjdDogZGVsZXRlZFByb2R1Y3QgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJlcy5zdGF0dXMoNDA0KS5zZW5kKHsgbWVzc2FnZTogJ1Byb2R1Y3QgTm90IEZvdW5kJyB9KTtcbiAgICB9XG4gIH0pXG4pO1xuXG5wcm9kdWN0Um91dGVyLnBvc3QoXG4gICcvOmlkL3Jldmlld3MnLFxuICBpc0F1dGgsXG4gIGV4cHJlc3NBc3luY0hhbmRsZXIoYXN5bmMgKHJlcSwgcmVzKSA9PiB7XG4gICAgY29uc3QgcHJvZHVjdCA9IGF3YWl0IFByb2R1Y3QuZmluZEJ5SWQocmVxLnBhcmFtcy5pZCk7XG4gICAgaWYgKHByb2R1Y3QpIHtcbiAgICAgIGNvbnN0IHJldmlldyA9IHtcbiAgICAgICAgcmF0aW5nOiByZXEuYm9keS5yYXRpbmcsXG4gICAgICAgIGNvbW1lbnQ6IHJlcS5ib2R5LmNvbW1lbnQsXG4gICAgICAgIHVzZXI6IHJlcS51c2VyLl9pZCxcbiAgICAgICAgbmFtZTogcmVxLnVzZXIubmFtZSxcbiAgICAgIH07XG4gICAgICBwcm9kdWN0LnJldmlld3MucHVzaChyZXZpZXcpO1xuICAgICAgcHJvZHVjdC5yYXRpbmcgPVxuICAgICAgICBwcm9kdWN0LnJldmlld3MucmVkdWNlKChhLCBjKSA9PiBjLnJhdGluZyArIGEsIDApIC9cbiAgICAgICAgcHJvZHVjdC5yZXZpZXdzLmxlbmd0aDtcbiAgICAgIHByb2R1Y3QubnVtUmV2aWV3cyA9IHByb2R1Y3QucmV2aWV3cy5sZW5ndGg7XG4gICAgICBjb25zdCB1cGRhdGVkUHJvZHVjdCA9IGF3YWl0IHByb2R1Y3Quc2F2ZSgpO1xuICAgICAgcmVzLnN0YXR1cygyMDEpLnNlbmQoe1xuICAgICAgICBtZXNzYWdlOiAnQ29tbWVudCBDcmVhdGVkLicsXG4gICAgICAgIGRhdGE6IHVwZGF0ZWRQcm9kdWN0LnJldmlld3NbdXBkYXRlZFByb2R1Y3QucmV2aWV3cy5sZW5ndGggLSAxXSxcbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aHJvdyBFcnJvcignUHJvZHVjdCBkb2VzIG5vdCBleGlzdC4nKTtcbiAgICB9XG4gIH0pXG4pO1xuXG5leHBvcnQgZGVmYXVsdCBwcm9kdWN0Um91dGVyO1xuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUE2QztBQUU3QyxNQUFNQSxhQUFhLEdBQUdDLGdCQUFPLENBQUNDLE1BQU0sRUFBRTtBQUN0Q0YsYUFBYSxDQUFDRyxHQUFHLENBQ2YsR0FBRyxFQUNILElBQUFDLDRCQUFtQixFQUFDLE9BQU9DLEdBQUcsRUFBRUMsR0FBRyxLQUFLO0VBQ3RDLE1BQU1DLGFBQWEsR0FBR0YsR0FBRyxDQUFDRyxLQUFLLENBQUNELGFBQWEsR0FDekM7SUFDRUUsSUFBSSxFQUFFO01BQ0pDLE1BQU0sRUFBRUwsR0FBRyxDQUFDRyxLQUFLLENBQUNELGFBQWE7TUFDL0JJLFFBQVEsRUFBRTtJQUNaO0VBQ0YsQ0FBQyxHQUNE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","map":{"version":3,"names":["productRouter","express","Router","get","expressAsyncHandler","req","res","searchKeyword","query","name","$regex","$options","products","Product","find","send","product","findById","params","id","post","isAuth","isAdmin","description","category","brand","image","createdProduct","save","status","message","put","productId","body","price","countInStock","updatedProduct","delete","deletedProduct","remove","review","rating","comment","user","_id","reviews","push","reduce","a","c","length","numReviews","data","Error"],"sourceRoot":"/Users/thiago/Dev/workspace/prueba/Cadre Carton e-commerce/backend/routers/","sources":["productRouter.js"],"sourcesContent":["import express from 'express';\nimport expressAsyncHandler from 'express-async-handler';\nimport { isAuth, isAdmin } from '../utils';\nimport Product from '../models/productModel';\n\nconst productRouter = express.Router();\nproductRouter.get(\n  '/',\n  expressAsyncHandler(async (req, res) => {\n    const searchKeyword = req.query.searchKeyword\n      ? {\n          name: {\n            $regex: req.query.searchKeyword,\n            $options: 'i',\n          },\n        }\n      : {};\n    const products = await Product.find({ ...searchKeyword });\n    res.send(products);\n  })\n);\nproductRouter.get(\n  '/:id',\n  expressAsyncHandler(async (req, res) => {\n    const product = await Product.findById(req.params.id);\n    res.send(product);\n  })\n);\n\nproductRouter.post(\n  '/',\n  isAuth,\n  isAdmin,\n  expressAsyncHandler(async (req, res) => {\n    const product = new Product({\n      name: 'sample product',\n      description: 'sample desc',\n      category: 'sample category',\n      brand: 'sample brand',\n      image: '/images/product-1.jpg',\n    });\n    const createdProduct = await product.save();\n    if (createdProduct) {\n      res\n        .status(201)\n        .send({ message: 'Product Created', product: createdProduct });\n    } else {\n      res.status(500).send({ message: 'Error in creating product' });\n    }\n  })\n);\nproductRouter.put(\n  '/:id',\n  isAuth,\n  isAdmin,\n  expressAsyncHandler(async (req, res) => {\n    const productId = req.params.id;\n    const product = await Product.findById(productId);\n    if (product) {\n      product.name = req.body.name;\n      product.price = req.body.price;\n      product.image = req.body.image;\n      product.brand = req.body.brand;\n      product.category = req.body.category;\n      product.countInStock = req.body.countInStock;\n      product.description = req.body.description;\n      const updatedProduct = await product.save();\n      if (updatedProduct) {\n        res.send({ message: 'Product Updated', product: updatedProduct });\n      } else {\n        res.status(500).send({ message: 'Error in updaing product' });\n      }\n    } else {\n      res.status(404).send({ message: 'Product Not Found' });\n    }\n  })\n);\nproductRouter.delete(\n  '/:id',\n  isAuth,\n  isAdmin,\n  expressAsyncHandler(async (req, res) => {\n    const product = await Product.findById(req.params.id);\n    if (product) {\n      const deletedProduct = await product.remove();\n      res.send({ message: 'Product Deleted', product: deletedProduct });\n    } else {\n      res.status(404).send({ message: 'Product Not Found' });\n    }\n  })\n);\n\nproductRouter.post(\n  '/:id/reviews',\n  isAuth,\n  expressAsyncHandler(async (req, res) => {\n    const product = await Product.findById(req.params.id);\n    if (product) {\n      const review = {\n        rating: req.body.rating,\n        comment: req.body.comment,\n        user: req.user._id,\n        name: req.user.name,\n      };\n      product.reviews.push(review);\n      product.rating =\n        product.reviews.reduce((a, c) => c.rating + a, 0) /\n        product.reviews.length;\n      product.numReviews = product.reviews.length;\n      const updatedProduct = await product.save();\n      res.status(201).send({\n        message: 'Comment Created.',\n        data: updatedProduct.reviews[updatedProduct.reviews.length - 1],\n      });\n    } else {\n      throw Error('Product does not exist.');\n    }\n  })\n);\n\nexport default productRouter;\n"],"mappings":";;;;;;AAAA;AACA;AACA;AACA;AAA6C;AAE7C,MAAMA,aAAa,GAAGC,gBAAO,CAACC,MAAM,EAAE;AACtCF,aAAa,CAACG,GAAG,CACf,GAAG,EACH,IAAAC,4BAAmB,EAAC,OAAOC,GAAG,EAAEC,GAAG,KAAK;EACtC,MAAMC,aAAa,GAAGF,GAAG,CAACG,KAAK,CAACD,aAAa,GACzC;IACEE,IAAI,EAAE;MACJC,MAAM,EAAEL,GAAG,CAACG,KAAK,CAACD,aAAa;MAC/BI,QAAQ,EAAE;IACZ;EACF,CAAC,GACD,CAAC,CAAC;EACN,MAAMC,QAAQ,GAAG,MAAMC,qBAAO,CAACC,IAAI,CAAC;IAAE,GAAGP;EAAc,CAAC,CAAC;EACzDD,GAAG,CAACS,IAAI,CAACH,QAAQ,CAAC;AACpB,CAAC,CAAC,CACH;AACDZ,aAAa,CAACG,GAAG,CACf,MAAM,EACN,IAAAC,4BAAmB,EAAC,OAAOC,GAAG,EAAEC,GAAG,KAAK;EACtC,MAAMU,OAAO,GAAG,MAAMH,qBAAO,CAACI,QAAQ,CAACZ,GAAG,CAACa,MAAM,CAACC,EAAE,CAAC;EACrDb,GAAG,CAACS,IAAI,CAACC,OAAO,CAAC;AACnB,CAAC,CAAC,CACH;AAEDhB,aAAa,CAACoB,IAAI,CAChB,GAAG,EACHC,aAAM,EACNC,cAAO,EACP,IAAAlB,4BAAmB,EAAC,OAAOC,GAAG,EAAEC,GAAG,KAAK;EACtC,MAAMU,OAAO,GAAG,IAAIH,qBAAO,CAAC;IAC1BJ,IAAI,EAAE,gBAAgB;IACtBc,WAAW,EAAE,aAAa;IAC1BC,QAAQ,EAAE,iBAAiB;IAC3BC,KAAK,EAAE,cAAc;IACrBC,KAAK,EAAE;EACT,CAAC,CAAC;EACF,MAAMC,cAAc,GAAG,MAAMX,OAAO,CAACY,IAAI,EAAE;EAC3C,IAAID,cAAc,EAAE;IAClBrB,GAAG,CACAuB,MAAM,CAAC,GAAG,CAAC,CACXd,IAAI,CAAC;MAAEe,OAAO,EAAE,iBAAiB;MAAEd,OAAO,EAAEW;IAAe,CAAC,CAAC;EAClE,CAAC,MAAM;IACLrB,GAAG,CAACuB,MAAM,CAAC,GAAG,CAAC,CAACd,IAAI,CAAC;MAAEe,OAAO,EAAE;IAA4B,CAAC,CAAC;EAChE;AACF,CAAC,CAAC,CACH;AACD9B,aAAa,CAAC+B,GAAG,CACf,MAAM,EACNV,aAAM,EACNC,cAAO,EACP,IAAAlB,4BAAmB,EAAC,OAAOC,GAAG,EAAEC,GAAG,KAAK;EACtC,MAAM0B,SAAS,GAAG3B,GAAG,CAACa,MAAM,CAACC,EAAE;EAC/B,MAAMH,OAAO,GAAG,MAAMH,qBAAO,CAACI,QAAQ,CAACe,SAAS,CAAC;EACjD,IAAIhB,OAAO,EAAE;IACXA,OAAO,CAACP,IAAI,GAAGJ,GAAG,CAAC4B,IAAI,CAACxB,IAAI;IAC5BO,OAAO,CAACkB,KAAK,GAAG7B,GAAG,CAAC4B,IAAI,CAACC,KAAK;IAC9BlB,OAAO,CAACU,KAAK,GAAGrB,GAAG,CAAC4B,IAAI,CAACP,KAAK;IAC9BV,OAAO,CAACS,KAAK,GAAGpB,GAAG,CAAC4B,IAAI,CAACR,KAAK;IAC9BT,OAAO,CAACQ,QAAQ,GAAGnB,GAAG,CAAC4B,IAAI,CAACT,QAAQ;IACpCR,OAAO,CAACmB,YAAY,GAAG9B,GAAG,CAAC4B,IAAI,CAACE,YAAY;IAC5CnB,OAAO,CAACO,WAAW,GAAGlB,GAAG,CAAC4B,IAAI,CAACV,WAAW;IAC1C,MAAMa,cAAc,GAAG,MAAMpB,OAAO,CAACY,IAAI,EAAE;IAC3C,IAAIQ,cAAc,EAAE;MAClB9B,GAAG,CAACS,IAAI,CAAC;QAAEe,OAAO,EAAE,iBAAiB;QAAEd,OAAO,EAAEoB;MAAe,CAAC,CAAC;IACnE,CAAC,MAAM;MACL9B,GAAG,CAACuB,MAAM,CAAC,GAAG,CAAC,CAACd,IAAI,CAAC;QAAEe,OAAO,EAAE;MAA2B,CAAC,CAAC;IAC/D;EACF,CAAC,MAAM;IACLxB,GAAG,CAACuB,MAAM,CAAC,GAAG,CAAC,CAACd,IAAI,CAAC;MAAEe,OAAO,EAAE;IAAoB,CAAC,CAAC;EACxD;AACF,CAAC,CAAC,CACH;AACD9B,aAAa,CAACqC,MAAM,CAClB,MAAM,EACNhB,aAAM,EACNC,cAAO,EACP,IAAAlB,4BAAmB,EAAC,OAAOC,GAAG,EAAEC,GAAG,KAAK;EACtC,MAAMU,OAAO,GAAG,MAAMH,qBAAO,CAACI,QAAQ,CAACZ,GAAG,CAACa,MAAM,CAACC,EAAE,CAAC;EACrD,IAAIH,OAAO,EAAE;IACX,MAAMsB,cAAc,GAAG,MAAMtB,OAAO,CAACuB,MAAM,EAAE;IAC7CjC,GAAG,CAACS,IAAI,CAAC;MAAEe,OAAO,EAAE,iBAAiB;MAAEd,OAAO,EAAEsB;IAAe,CAAC,CAAC;EACnE,CAAC,MAAM;IACLhC,GAAG,CAACuB,MAAM,CAAC,GAAG,CAAC,CAACd,IAAI,CAAC;MAAEe,OAAO,EAAE;IAAoB,CAAC,CAAC;EACxD;AACF,CAAC,CAAC,CACH;AAED9B,aAAa,CAACoB,IAAI,CAChB,cAAc,EACdC,aAAM,EACN,IAAAjB,4BAAmB,EAAC,OAAOC,GAAG,EAAEC,GAAG,KAAK;EACtC,MAAMU,OAAO,GAAG,MAAMH,qBAAO,CAACI,QAAQ,CAACZ,GAAG,CAACa,MAAM,CAACC,EAAE,CAAC;EACrD,IAAIH,OAAO,EAAE;IACX,MAAMwB,MAAM,GAAG;MACbC,MAAM,EAAEpC,GAAG,CAAC4B,IAAI,CAACQ,MAAM;MACvBC,OAAO,EAAErC,GAAG,CAAC4B,IAAI,CAACS,OAAO;MACzBC,IAAI,EAAEtC,GAAG,CAACsC,IAAI,CAACC,GAAG;MAClBnC,IAAI,EAAEJ,GAAG,CAACsC,IAAI,CAAClC;IACjB,CAAC;IACDO,OAAO,CAAC6B,OAAO,CAACC,IAAI,CAACN,MAAM,CAAC;IAC5BxB,OAAO,CAACyB,MAAM,GACZzB,OAAO,CAAC6B,OAAO,CAACE,MAAM,CAAC,CAACC,CAAC,EAAEC,CAAC,KAAKA,CAAC,CAACR,MAAM,GAAGO,CAAC,EAAE,CAAC,CAAC,GACjDhC,OAAO,CAAC6B,OAAO,CAACK,MAAM;IACxBlC,OAAO,CAACmC,UAAU,GAAGnC,OAAO,CAAC6B,OAAO,CAACK,MAAM;IAC3C,MAAMd,cAAc,GAAG,MAAMpB,OAAO,CAACY,IAAI,EAAE;IAC3CtB,GAAG,CAACuB,MAAM,CAAC,GAAG,CAAC,CAACd,IAAI,CAAC;MACnBe,OAAO,EAAE,kBAAkB;MAC3BsB,IAAI,EAAEhB,cAAc,CAACS,OAAO,CAACT,cAAc,CAACS,OAAO,CAACK,MAAM,GAAG,CAAC;IAChE,CAAC,CAAC;EACJ,CAAC,MAAM;IACL,MAAMG,KAAK,CAAC,yBAAyB,CAAC;EACxC;AACF,CAAC,CAAC,CACH;AAAC,eAEarD,aAAa;AAAA"}},"mtime":1668842268000},"{\"assumptions\":{},\"sourceRoot\":\"/Users/thiago/Dev/workspace/prueba/Cadre Carton e-commerce/backend/routers/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/thiago/Dev/workspace/prueba/Cadre Carton e-commerce\",\"filename\":\"/Users/thiago/Dev/workspace/prueba/Cadre Carton e-commerce/backend/routers/uploadRouter.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/thiago/Dev/workspace/prueba/Cadre Carton e-commerce\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.19.6:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _express = _interopRequireDefault(require(\"express\"));\nvar _multer = _interopRequireDefault(require(\"multer\"));\nvar _utils = require(\"../utils\");\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\nconst storage = _multer.default.diskStorage({\n  destination(req, file, cb) {\n    cb(null, 'uploads/');\n  },\n  filename(req, file, cb) {\n    cb(null, `${Date.now()}.jpg`);\n  }\n});\nconst upload = (0, _multer.default)({\n  storage\n});\nconst uploadRouter = _express.default.Router();\nuploadRouter.post('/', _utils.isAuth, _utils.isAdmin, upload.single('image'), (req, res) => {\n  res.status(201).send({\n    image: `/${req.file.path}`\n  });\n});\nvar _default = uploadRouter;\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJzdG9yYWdlIiwibXVsdGVyIiwiZGlza1N0b3JhZ2UiLCJkZXN0aW5hdGlvbiIsInJlcSIsImZpbGUiLCJjYiIsImZpbGVuYW1lIiwiRGF0ZSIsIm5vdyIsInVwbG9hZCIsInVwbG9hZFJvdXRlciIsImV4cHJlc3MiLCJSb3V0ZXIiLCJwb3N0IiwiaXNBdXRoIiwiaXNBZG1pbiIsInNpbmdsZSIsInJlcyIsInN0YXR1cyIsInNlbmQiLCJpbWFnZSIsInBhdGgiXSwic291cmNlUm9vdCI6Ii9Vc2Vycy90aGlhZ28vRGV2L3dvcmtzcGFjZS9wcnVlYmEvQ2FkcmUgQ2FydG9uIGUtY29tbWVyY2UvYmFja2VuZC9yb3V0ZXJzLyIsInNvdXJjZXMiOlsidXBsb2FkUm91dGVyLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBleHByZXNzIGZyb20gJ2V4cHJlc3MnO1xuaW1wb3J0IG11bHRlciBmcm9tICdtdWx0ZXInO1xuaW1wb3J0IHsgaXNBdXRoLCBpc0FkbWluIH0gZnJvbSAnLi4vdXRpbHMnO1xuXG5jb25zdCBzdG9yYWdlID0gbXVsdGVyLmRpc2tTdG9yYWdlKHtcbiAgZGVzdGluYXRpb24ocmVxLCBmaWxlLCBjYikge1xuICAgIGNiKG51bGwsICd1cGxvYWRzLycpO1xuICB9LFxuICBmaWxlbmFtZShyZXEsIGZpbGUsIGNiKSB7XG4gICAgY2IobnVsbCwgYCR7RGF0ZS5ub3coKX0uanBnYCk7XG4gIH0sXG59KTtcblxuY29uc3QgdXBsb2FkID0gbXVsdGVyKHsgc3RvcmFnZSB9KTtcbmNvbnN0IHVwbG9hZFJvdXRlciA9IGV4cHJlc3MuUm91dGVyKCk7XG5cbnVwbG9hZFJvdXRlci5wb3N0KCcvJywgaXNBdXRoLCBpc0FkbWluLCB1cGxvYWQuc2luZ2xlKCdpbWFnZScpLCAocmVxLCByZXMpID0+IHtcbiAgcmVzLnN0YXR1cygyMDEpLnNlbmQoeyBpbWFnZTogYC8ke3JlcS5maWxlLnBhdGh9YCB9KTtcbn0pO1xuZXhwb3J0IGRlZmF1bHQgdXBsb2FkUm91dGVyO1xuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFBMkM7QUFFM0MsTUFBTUEsT0FBTyxHQUFHQyxlQUFNLENBQUNDLFdBQVcsQ0FBQztFQUNqQ0MsV0FBVyxDQUFDQyxHQUFHLEVBQUVDLElBQUksRUFBRUMsRUFBRSxFQUFFO0lBQ3pCQSxFQUFFLENBQUMsSUFBSSxFQUFFLFVBQVUsQ0FBQztFQUN0QixDQUFDO0VBQ0RDLFFBQVEsQ0FBQ0gsR0FBRyxFQUFFQyxJQUFJLEVBQUVDLEVBQUUsRUFBRTtJQUN0QkEsRUFBRSxDQUFDLElBQUksRUFBRyxHQUFFRSxJQUFJLENBQUNDLEdBQUcsRUFBRyxNQUFLLENBQUM7RUFDL0I7QUFDRixDQUFDLENBQUM7QUFFRixNQUFNQyxNQUFNLEdBQUcsSUFBQVQsZUFBTSxFQUFDO0VBQUVEO0FBQVEsQ0FBQyxDQUFDO0FBQ2xDLE1BQU1XLFlBQVksR0FBR0MsZ0JBQU8sQ0FBQ0MsTUFBTSxFQUFFO0FBRXJDRixZQUFZLENBQUNHLElBQUksQ0FBQyxHQUFHLEVBQUVDLGFBQU0sRUFBRUMsY0FBTyxFQUFFTixNQUFNLENBQUNPLE1BQU0sQ0FBQyxPQUFPLENBQUMsRUFBRSxDQUFDYixHQUFHLEVBQUVjLEdBQUcsS0FBSztFQUM1RUEsR0FBRyxDQUFDQyxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUNDLElBQUksQ0FBQztJQUFFQyxLQUFLLEVBQUcsSUFBR2pCLEdBQUcsQ0FBQ0MsSUFBSSxDQUFDaUIsSUFBSztFQUFFLENBQUMsQ0FBQztBQUN0RCxDQUFDLENBQUM7QUFBQyxlQUNZWCxZQUFZO0FBQUEifQ==","map":{"version":3,"names":["storage","multer","diskStorage","destination","req","file","cb","filename","Date","now","upload","uploadRouter","express","Router","post","isAuth","isAdmin","single","res","status","send","image","path"],"sourceRoot":"/Users/thiago/Dev/workspace/prueba/Cadre Carton e-commerce/backend/routers/","sources":["uploadRouter.js"],"sourcesContent":["import express from 'express';\nimport multer from 'multer';\nimport { isAuth, isAdmin } from '../utils';\n\nconst storage = multer.diskStorage({\n  destination(req, file, cb) {\n    cb(null, 'uploads/');\n  },\n  filename(req, file, cb) {\n    cb(null, `${Date.now()}.jpg`);\n  },\n});\n\nconst upload = multer({ storage });\nconst uploadRouter = express.Router();\n\nuploadRouter.post('/', isAuth, isAdmin, upload.single('image'), (req, res) => {\n  res.status(201).send({ image: `/${req.file.path}` });\n});\nexport default uploadRouter;\n"],"mappings":";;;;;;AAAA;AACA;AACA;AAA2C;AAE3C,MAAMA,OAAO,GAAGC,eAAM,CAACC,WAAW,CAAC;EACjCC,WAAW,CAACC,GAAG,EAAEC,IAAI,EAAEC,EAAE,EAAE;IACzBA,EAAE,CAAC,IAAI,EAAE,UAAU,CAAC;EACtB,CAAC;EACDC,QAAQ,CAACH,GAAG,EAAEC,IAAI,EAAEC,EAAE,EAAE;IACtBA,EAAE,CAAC,IAAI,EAAG,GAAEE,IAAI,CAACC,GAAG,EAAG,MAAK,CAAC;EAC/B;AACF,CAAC,CAAC;AAEF,MAAMC,MAAM,GAAG,IAAAT,eAAM,EAAC;EAAED;AAAQ,CAAC,CAAC;AAClC,MAAMW,YAAY,GAAGC,gBAAO,CAACC,MAAM,EAAE;AAErCF,YAAY,CAACG,IAAI,CAAC,GAAG,EAAEC,aAAM,EAAEC,cAAO,EAAEN,MAAM,CAACO,MAAM,CAAC,OAAO,CAAC,EAAE,CAACb,GAAG,EAAEc,GAAG,KAAK;EAC5EA,GAAG,CAACC,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;IAAEC,KAAK,EAAG,IAAGjB,GAAG,CAACC,IAAI,CAACiB,IAAK;EAAE,CAAC,CAAC;AACtD,CAAC,CAAC;AAAC,eACYX,YAAY;AAAA"}},"mtime":1668842268000},"{\"assumptions\":{},\"sourceRoot\":\"/Users/thiago/Dev/workspace/prueba/Cadre Carton e-commerce/backend/routers/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/thiago/Dev/workspace/prueba/Cadre Carton e-commerce\",\"filename\":\"/Users/thiago/Dev/workspace/prueba/Cadre Carton e-commerce/backend/routers/userRouter.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/thiago/Dev/workspace/prueba/Cadre Carton e-commerce\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.19.6:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _express = _interopRequireDefault(require(\"express\"));\nvar _expressAsyncHandler = _interopRequireDefault(require(\"express-async-handler\"));\nvar _userModel = _interopRequireDefault(require(\"../models/userModel\"));\nvar _utils = require(\"../utils\");\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\nconst userRouter = _express.default.Router();\nuserRouter.get('/createadmin', (0, _expressAsyncHandler.default)(async (req, res) => {\n  try {\n    const user = new _userModel.default({\n      name: 'admin',\n      email: 'admin@example.com',\n      password: 'jsamazona',\n      isAdmin: true\n    });\n    const createdUser = await user.save();\n    res.send(createdUser);\n  } catch (err) {\n    res.status(500).send({\n      message: err.message\n    });\n  }\n}));\nuserRouter.post('/signin', (0, _expressAsyncHandler.default)(async (req, res) => {\n  const signinUser = await _userModel.default.findOne({\n    email: req.body.email,\n    password: req.body.password\n  });\n  if (!signinUser) {\n    res.status(401).send({\n      message: 'Invalid Email or Password'\n    });\n  } else {\n    res.send({\n      _id: signinUser._id,\n      name: signinUser.name,\n      email: signinUser.email,\n      isAdmin: signinUser.isAdmin,\n      token: (0, _utils.generateToken)(signinUser)\n    });\n  }\n}));\nuserRouter.post('/register', (0, _expressAsyncHandler.default)(async (req, res) => {\n  const user = new _userModel.default({\n    name: req.body.name,\n    email: req.body.email,\n    password: req.body.password\n  });\n  const createdUser = await user.save();\n  if (!createdUser) {\n    res.status(401).send({\n      message: 'Invalid User Data'\n    });\n  } else {\n    res.send({\n      _id: createdUser._id,\n      name: createdUser.name,\n      email: createdUser.email,\n      isAdmin: createdUser.isAdmin,\n      token: (0, _utils.generateToken)(createdUser)\n    });\n  }\n}));\nuserRouter.put('/:id', _utils.isAuth, (0, _expressAsyncHandler.default)(async (req, res) => {\n  const user = await _userModel.default.findById(req.params.id);\n  if (!user) {\n    res.status(404).send({\n      message: 'User Not Found'\n    });\n  } else {\n    user.name = req.body.name || user.name;\n    user.email = req.body.email || user.email;\n    user.password = req.body.password || user.password;\n    const updatedUser = await user.save();\n    res.send({\n      _id: updatedUser._id,\n      name: updatedUser.name,\n      email: updatedUser.email,\n      isAdmin: updatedUser.isAdmin,\n      token: (0, _utils.generateToken)(updatedUser)\n    });\n  }\n}));\nvar _default = userRouter;\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJ1c2VyUm91dGVyIiwiZXhwcmVzcyIsIlJvdXRlciIsImdldCIsImV4cHJlc3NBc3luY0hhbmRsZXIiLCJyZXEiLCJyZXMiLCJ1c2VyIiwiVXNlciIsIm5hbWUiLCJlbWFpbCIsInBhc3N3b3JkIiwiaXNBZG1pbiIsImNyZWF0ZWRVc2VyIiwic2F2ZSIsInNlbmQiLCJlcnIiLCJzdGF0dXMiLCJtZXNzYWdlIiwicG9zdCIsInNpZ25pblVzZXIiLCJmaW5kT25lIiwiYm9keSIsIl9pZCIsInRva2VuIiwiZ2VuZXJhdGVUb2tlbiIsInB1dCIsImlzQXV0aCIsImZpbmRCeUlkIiwicGFyYW1zIiwiaWQiLCJ1cGRhdGVkVXNlciJdLCJzb3VyY2VSb290IjoiL1VzZXJzL3RoaWFnby9EZXYvd29ya3NwYWNlL3BydWViYS9DYWRyZSBDYXJ0b24gZS1jb21tZXJjZS9iYWNrZW5kL3JvdXRlcnMvIiwic291cmNlcyI6WyJ1c2VyUm91dGVyLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBleHByZXNzIGZyb20gJ2V4cHJlc3MnO1xuaW1wb3J0IGV4cHJlc3NBc3luY0hhbmRsZXIgZnJvbSAnZXhwcmVzcy1hc3luYy1oYW5kbGVyJztcbmltcG9ydCBVc2VyIGZyb20gJy4uL21vZGVscy91c2VyTW9kZWwnO1xuaW1wb3J0IHsgZ2VuZXJhdGVUb2tlbiwgaXNBdXRoIH0gZnJvbSAnLi4vdXRpbHMnO1xuXG5jb25zdCB1c2VyUm91dGVyID0gZXhwcmVzcy5Sb3V0ZXIoKTtcblxudXNlclJvdXRlci5nZXQoXG4gICcvY3JlYXRlYWRtaW4nLFxuICBleHByZXNzQXN5bmNIYW5kbGVyKGFzeW5jIChyZXEsIHJlcykgPT4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCB1c2VyID0gbmV3IFVzZXIoe1xuICAgICAgICBuYW1lOiAnYWRtaW4nLFxuICAgICAgICBlbWFpbDogJ2FkbWluQGV4YW1wbGUuY29tJyxcbiAgICAgICAgcGFzc3dvcmQ6ICdqc2FtYXpvbmEnLFxuICAgICAgICBpc0FkbWluOiB0cnVlLFxuICAgICAgfSk7XG4gICAgICBjb25zdCBjcmVhdGVkVXNlciA9IGF3YWl0IHVzZXIuc2F2ZSgpO1xuICAgICAgcmVzLnNlbmQoY3JlYXRlZFVzZXIpO1xuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgcmVzLnN0YXR1cyg1MDApLnNlbmQoeyBtZXNzYWdlOiBlcnIubWVzc2FnZSB9KTtcbiAgICB9XG4gIH0pXG4pO1xudXNlclJvdXRlci5wb3N0KFxuICAnL3NpZ25pbicsXG4gIGV4cHJlc3NBc3luY0hhbmRsZXIoYXN5bmMgKHJlcSwgcmVzKSA9PiB7XG4gICAgY29uc3Qgc2lnbmluVXNlciA9IGF3YWl0IFVzZXIuZmluZE9uZSh7XG4gICAgICBlbWFpbDogcmVxLmJvZHkuZW1haWwsXG4gICAgICBwYXNzd29yZDogcmVxLmJvZHkucGFzc3dvcmQsXG4gICAgfSk7XG4gICAgaWYgKCFzaWduaW5Vc2VyKSB7XG4gICAgICByZXMuc3RhdHVzKDQwMSkuc2VuZCh7XG4gICAgICAgIG1lc3NhZ2U6ICdJbnZhbGlkIEVtYWlsIG9yIFBhc3N3b3JkJyxcbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXMuc2VuZCh7XG4gICAgICAgIF9pZDogc2lnbmluVXNlci5faWQsXG4gICAgICAgIG5hbWU6IHNpZ25pblVzZXIubmFtZSxcbiAgICAgICAgZW1haWw6IHNpZ25pblVzZXIuZW1haWwsXG4gICAgICAgIGlzQWRtaW46IHNpZ25pblVzZXIuaXNBZG1pbixcbiAgICAgICAgdG9rZW46IGdlbmVyYXRlVG9rZW4oc2lnbmluVXNlciksXG4gICAgICB9KTtcbiAgICB9XG4gIH0pXG4pO1xudXNlclJvdXRlci5wb3N0KFxuICAnL3JlZ2lzdGVyJyxcbiAgZXhwcmVzc0FzeW5jSGFuZGxlcihhc3luYyAocmVxLCByZXMpID0+IHtcbiAgICBjb25zdCB1c2VyID0gbmV3IFVzZXIoe1xuICAgICAgbmFtZTogcmVxLmJvZHkubmFtZSxcbiAgICAgIGVtYWlsOiByZXEuYm9keS5lbWFpbCxcbiAgICAgIHBhc3N3b3JkOiByZXEuYm9keS5wYXNzd29yZCxcbiAgICB9KTtcbiAgICBjb25zdCBjcmVhdGVkVXNlciA9IGF3YWl0IHVzZXIuc2F2ZSgpO1xuICAgIGlmICghY3JlYXRlZFVzZXIpIHtcbiAgICAgIHJlcy5zdGF0dXMoNDAxKS5zZW5kKHtcbiAgICAgICAgbWVzc2FnZTogJ0ludmFsaWQgVXNlciBEYXRhJyxcbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXMuc2VuZCh7XG4gICAgICAgIF9pZDogY3JlYXRlZFVzZXIuX2lkLFxuICAgICAgICBuYW1lOiBjcmVhdGVkVXNlci5uYW1lLFxuICAgICAgICBlbWFpbDogY3JlYXRlZFVzZXIuZW1haWwsXG4gICAgICAgIGlzQWRtaW46IGNyZWF0ZWRVc2VyLmlzQWRtaW4sXG4gICAgICAgIHRva2VuOiBnZW5lcmF0ZVRva2VuKGNyZWF0ZWRVc2VyKSxcbiAgICAgIH0pO1xuICAgIH1cbiAgfSlcbik7XG51c2VyUm91dGVyLnB1dChcbiAgJy86aWQnLFxuICBpc0F1dGgsXG4gIGV4cHJlc3NBc3luY0hhbmRsZXIoYXN5bmMgKHJlcSwgcmVzKSA9PiB7XG4gICAgY29uc3QgdXNlciA9IGF3YWl0IFVzZXIuZmluZEJ5SWQocmVxLnBhcmFtcy5pZCk7XG5cbiAgICBpZiAoIXVzZXIpIHtcbiAgICAgIHJlcy5zdGF0dXMoNDA0KS5zZW5kKHtcbiAgICAgICAgbWVzc2FnZTogJ1VzZXIgTm90IEZvdW5kJyxcbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICB1c2VyLm5hbWUgPSByZXEuYm9keS5uYW1lIHx8IHVzZXIubmFtZTtcbiAgICAgIHVzZXIuZW1haWwgPSByZXEuYm9keS5lbWFpbCB8fCB1c2VyLmVtYWlsO1xuICAgICAgdXNlci5wYXNzd29yZCA9IHJlcS5ib2R5LnBhc3N3b3JkIHx8IHVzZXIucGFzc3dvcmQ7XG4gICAgICBjb25zdCB1cGRhdGVkVXNlciA9IGF3YWl0IHVzZXIuc2F2ZSgpO1xuICAgICAgcmVzLnNlbmQoe1xuICAgICAgICBfaWQ6IHVwZGF0ZWRVc2VyLl9pZCxcbiAgICAgICAgbmFtZTogdXBkYXRlZFVzZXIubmFtZSxcbiAgICAgICAgZW1haWw6IHVwZGF0ZWRVc2VyLmVtYWlsLFxuICAgICAgICBpc0FkbWluOiB1cGRhdGVkVXNlci5pc0FkbWluLFxuICAgICAgICB0b2tlbjogZ2VuZXJhdGVUb2tlbih1cGRhdGVkVXNlciksXG4gICAgICB9KTtcbiAgICB9XG4gIH0pXG4pO1xuZXhwb3J0IGRlZmF1bHQgdXNlclJvdXRlcjtcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBaUQ7QUFFakQsTUFBTUEsVUFBVSxHQUFHQyxnQkFBTyxDQUFDQyxNQUFNLEVBQUU7QUFFbkNGLFVBQVUsQ0FBQ0csR0FBRyxDQUNaLGNBQWMsRUFDZCxJQUFBQyw0QkFBbUIsRUFBQyxPQUFPQyxHQUFHLEVBQUVDLEdBQUcsS0FBSztFQUN0QyxJQUFJO0lBQ0YsTUFBTUMsSUFBSSxHQUFHLElBQUlDLGtCQUFJLENBQUM7TUFDcEJDLElBQUksRUFBRSxPQUFPO01BQ2JDLEtBQUssRUFBRSxtQkFBbUI7TUFDMUJDLFFBQVEsRUFBRSxXQUFXO01BQ3JCQyxPQUFPLEVBQUU7SUFDWCxDQUFDLENBQUM7SUFDRixNQUFNQyxXQUFXLEdBQUcsTUFBTU4sSUFBSSxDQUFDTyxJQUFJLEVBQUU7SUFDckNSLEdBQUcsQ0FBQ1MsSUFBSSxDQUFDRixXQUFXLENBQUM7RUFDdkIsQ0FBQyxDQUFDLE9BQU9HLEdBQUcsRUFBRTtJQUNaVixHQUFHLENBQUNXLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQ0YsSUFBSSxDQUFDO01BQUVHLE9BQU8sRUFBRUYsR0FBRyxDQUFDRTtJQUFRLENBQUMsQ0FBQztFQUNoRDtBQUNGLENBQUMsQ0FBQyxDQUNIO0FBQ0RsQixVQUFVLENBQUNtQixJQUFJLENBQ2IsU0FBUyxFQUNULElBQUFmLDRCQUFtQixFQUFDLE9BQU9DLEdBQUcsRUFBRUMsR0FBRyxL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","map":{"version":3,"names":["userRouter","express","Router","get","expressAsyncHandler","req","res","user","User","name","email","password","isAdmin","createdUser","save","send","err","status","message","post","signinUser","findOne","body","_id","token","generateToken","put","isAuth","findById","params","id","updatedUser"],"sourceRoot":"/Users/thiago/Dev/workspace/prueba/Cadre Carton e-commerce/backend/routers/","sources":["userRouter.js"],"sourcesContent":["import express from 'express';\nimport expressAsyncHandler from 'express-async-handler';\nimport User from '../models/userModel';\nimport { generateToken, isAuth } from '../utils';\n\nconst userRouter = express.Router();\n\nuserRouter.get(\n  '/createadmin',\n  expressAsyncHandler(async (req, res) => {\n    try {\n      const user = new User({\n        name: 'admin',\n        email: 'admin@example.com',\n        password: 'jsamazona',\n        isAdmin: true,\n      });\n      const createdUser = await user.save();\n      res.send(createdUser);\n    } catch (err) {\n      res.status(500).send({ message: err.message });\n    }\n  })\n);\nuserRouter.post(\n  '/signin',\n  expressAsyncHandler(async (req, res) => {\n    const signinUser = await User.findOne({\n      email: req.body.email,\n      password: req.body.password,\n    });\n    if (!signinUser) {\n      res.status(401).send({\n        message: 'Invalid Email or Password',\n      });\n    } else {\n      res.send({\n        _id: signinUser._id,\n        name: signinUser.name,\n        email: signinUser.email,\n        isAdmin: signinUser.isAdmin,\n        token: generateToken(signinUser),\n      });\n    }\n  })\n);\nuserRouter.post(\n  '/register',\n  expressAsyncHandler(async (req, res) => {\n    const user = new User({\n      name: req.body.name,\n      email: req.body.email,\n      password: req.body.password,\n    });\n    const createdUser = await user.save();\n    if (!createdUser) {\n      res.status(401).send({\n        message: 'Invalid User Data',\n      });\n    } else {\n      res.send({\n        _id: createdUser._id,\n        name: createdUser.name,\n        email: createdUser.email,\n        isAdmin: createdUser.isAdmin,\n        token: generateToken(createdUser),\n      });\n    }\n  })\n);\nuserRouter.put(\n  '/:id',\n  isAuth,\n  expressAsyncHandler(async (req, res) => {\n    const user = await User.findById(req.params.id);\n\n    if (!user) {\n      res.status(404).send({\n        message: 'User Not Found',\n      });\n    } else {\n      user.name = req.body.name || user.name;\n      user.email = req.body.email || user.email;\n      user.password = req.body.password || user.password;\n      const updatedUser = await user.save();\n      res.send({\n        _id: updatedUser._id,\n        name: updatedUser.name,\n        email: updatedUser.email,\n        isAdmin: updatedUser.isAdmin,\n        token: generateToken(updatedUser),\n      });\n    }\n  })\n);\nexport default userRouter;\n"],"mappings":"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"}},"mtime":1668842268000}}